<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒèŠ½AI - å®Œæ•´iPadæ¼”ç¤º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="mengya-common.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: 
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #1e293b 0%, #334155 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 40px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            overflow: hidden;
        }
        
        /* iPad Pro 11å¯¸è®¾å¤‡æ¨¡æ‹Ÿ */
        .ipad-pro-device {
            width: 900px;
            height: 650px;
            background: 
                linear-gradient(145deg, #2c2c2e 0%, #1c1c1e 100%);
            border-radius: 25px;
            padding: 12px;
            box-shadow: 
                0 0 0 2px #404040,
                0 0 0 8px #2c2c2e,
                0 0 0 12px #1a1a1a,
                0 25px 80px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            transform: perspective(1200px) rotateX(8deg) rotateY(-3deg);
            animation: deviceHover 8s ease-in-out infinite;
        }
        
        @keyframes deviceHover {
            0%, 100% { 
                transform: perspective(1200px) rotateX(8deg) rotateY(-3deg) translateY(0px);
                box-shadow: 
                    0 0 0 2px #404040,
                    0 0 0 8px #2c2c2e,
                    0 0 0 12px #1a1a1a,
                    0 25px 80px rgba(0, 0, 0, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }
            50% { 
                transform: perspective(1200px) rotateX(8deg) rotateY(-3deg) translateY(-12px);
                box-shadow: 
                    0 0 0 2px #404040,
                    0 0 0 8px #2c2c2e,
                    0 0 0 12px #1a1a1a,
                    0 35px 100px rgba(0, 0, 0, 0.8),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }
        }
        
        /* Face IDä¼ æ„Ÿå™¨ */
        .face-id-sensor {
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 6px;
            background: #1a1a1a;
            border-radius: 3px;
        }
        
        /* iPadå±å¹• */
        .ipad-screen {
            width: 100%;
            height: 100%;
            background: #000;
            border-radius: 18px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.3);
        }
        
        /* å±å¹•åå°„æ•ˆæœ */
        .screen-reflection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                transparent 30%, 
                transparent 70%, 
                rgba(255, 255, 255, 0.05) 100%);
            pointer-events: none;
            z-index: 1000;
        }
        
        /* iOS 17é£æ ¼çŠ¶æ€æ  */
        .ios-status-bar {
            height: 35px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 25px;
            font-size: 15px;
            font-weight: 600;
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .status-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .signal-strength {
            display: flex;
            gap: 2px;
        }
        
        .signal-bar {
            width: 3px;
            height: 12px;
            background: white;
            border-radius: 1px;
        }
        
        .signal-bar:nth-child(2) { height: 10px; }
        .signal-bar:nth-child(3) { height: 8px; }
        .signal-bar:nth-child(4) { height: 6px; }
        
        .battery-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .battery-icon {
            width: 24px;
            height: 12px;
            border: 1px solid white;
            border-radius: 2px;
            position: relative;
        }
        
        .battery-fill {
            width: 85%;
            height: 100%;
            background: #34d399;
            border-radius: 1px;
        }
        
        .battery-tip {
            width: 2px;
            height: 6px;
            background: white;
            border-radius: 0 1px 1px 0;
            position: absolute;
            right: -3px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* èŒèŠ½AI Appç•Œé¢ */
        .mengya-app {
            width: 100%;
            height: calc(100% - 35px);
            background: #f2f2f7;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Appå¯¼èˆªæ  */
        .app-navigation {
            height: 70px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0 20px;
        }
        
        .app-logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .app-logo {
            font-size: 32px;
            /* ç§»é™¤æ—‹è½¬åŠ¨ç”»ï¼Œæ”¹ä¸ºè½»å¾®æµ®åŠ¨æ•ˆæœ */
            animation: logoFloat 4s ease-in-out infinite;
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }
        
        .app-title {
            font-size: 22px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .app-subtitle {
            font-size: 12px;
            color: #8e8e93;
            font-weight: 500;
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        /* æ¬¢è¿æ¨ªå¹… */
        .welcome-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .welcome-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 50%);
            animation: bannerGlow 8s ease-in-out infinite;
        }
        
        @keyframes bannerGlow {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
        }
        
        .welcome-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .welcome-text {
            flex: 1;
        }
        
        .welcome-greeting {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .welcome-message {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.4;
        }
        
        .welcome-avatar {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            animation: welcomeFloat 3s ease-in-out infinite;
        }
        
        @keyframes welcomeFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        /* åŠŸèƒ½å¡ç‰‡ç½‘æ ¼ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .feature-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .feature-card:active {
            transform: translateY(-2px);
        }
        
        .feature-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .feature-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .feature-title {
            font-size: 16px;
            font-weight: 700;
            color: #1d1d1f;
        }
        
        .feature-subtitle {
            font-size: 13px;
            color: #8e8e93;
            margin-bottom: 12px;
        }
        
        .feature-content {
            font-size: 14px;
            color: #3a3a3c;
            line-height: 1.4;
        }
        
        .feature-badge {
            background: #ff3b30;
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 8px;
        }
        
        /* èƒ½åŠ›è®­ç»ƒå¡ç‰‡æ ·å¼ */
        .training-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .training-card .feature-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* è™šæ‹Ÿä¼™ä¼´å¡ç‰‡æ ·å¼ */
        .partner-card {
            background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
            color: white;
        }
        
        .partner-card .feature-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* AIåŠ©æ•™å¡ç‰‡æ ·å¼ */
        .ai-card {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }
        
        .ai-card .feature-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* é¦–é¡µæ ·å¼å®šä¹‰ */
        .today-learning {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);
        }
        
        .learning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .learning-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .learning-streak {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .learning-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }
        
        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 12px;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .ability-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .ability-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .ability-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }
        
        .ability-item.completed {
            border-color: #34d399;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }
        
        .ability-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .ability-name {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .ability-progress {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .ability-item.completed .ability-progress {
            color: #059669;
            font-weight: 600;
        }
        
        /* æ•…äº‹å¢™å¡ç‰‡æ ·å¼ */
        .story-card {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            color: white;
        }
        
        .story-card .feature-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* åº•éƒ¨Tab Bar */
        .tab-bar {
            height: 90px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 30px;
        }
        
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            padding: 8px 20px;
            border-radius: 12px;
            transition: all 0.2s ease;
            color: #8e8e93;
            position: relative;
        }
        
        .tab-item.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .tab-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .tab-icon {
            font-size: 26px;
            margin-bottom: 2px;
        }
        
        .tab-label {
            font-size: 11px;
            font-weight: 600;
        }
        
        .notification-dot {
            position: absolute;
            top: 8px;
            right: 15px;
            width: 8px;
            height: 8px;
            background: #ff3b30;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        /* HomeæŒ‡ç¤ºå™¨ */
        .home-indicator {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }
        
        /* è®¾å¤‡ç¯å¢ƒå…‰ */
        .device-glow {
            position: absolute;
            top: -100px;
            left: -100px;
            width: calc(100% + 200px);
            height: calc(100% + 200px);
            background: 
                radial-gradient(circle at 40% 40%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(236, 72, 153, 0.15) 0%, transparent 50%);
            animation: glowShift 12s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes glowShift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(20px, -20px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }
        
        /* å¯åŠ¨åŠ¨ç”» */
        .startup-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 100;
            transition: opacity 1.5s ease;
        }
        
        .startup-animation.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .startup-logo {
            font-size: 80px;
            margin-bottom: 24px;
            animation: startupPulse 2s ease-in-out infinite;
        }
        
        @keyframes startupPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .startup-text {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 32px;
            text-align: center;
        }
        
        .startup-progress {
            width: 240px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .startup-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            width: 0%;
            animation: startupProgress 4s ease-out forwards;
        }
        
        @keyframes startupProgress {
            to { width: 100%; }
        }
        
        /* å†…å®¹åŠ è½½åŠ¨ç”» */
        .content-fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: contentFadeIn 0.8s ease forwards;
        }
        
        @keyframes contentFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 3Dè®¾å¤‡é˜´å½± */
        .device-shadow {
            position: absolute;
            bottom: -120px;
            left: 50%;
            transform: translateX(-50%) perspective(1000px) rotateX(90deg);
            width: 80%;
            height: 120px;
            background: 
                radial-gradient(ellipse, rgba(0, 0, 0, 0.3) 0%, transparent 70%);
            filter: blur(20px);
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <!-- è®¾å¤‡ç¯å¢ƒå…‰ -->
    <div class="device-glow"></div>
    
    <!-- iPad Proè®¾å¤‡ -->
    <div class="ipad-pro-device">
        <!-- Face IDä¼ æ„Ÿå™¨ -->
        <div class="face-id-sensor"></div>
        
        <!-- iPadå±å¹• -->
        <div class="ipad-screen">
            <!-- å±å¹•åå°„æ•ˆæœ -->
            <div class="screen-reflection"></div>
            
            <!-- å¯åŠ¨åŠ¨ç”» -->
            <div class="startup-animation" id="startupAnimation">
                <div class="startup-logo">ğŸŒ±</div>
                <div class="startup-text">
                    èŒèŠ½AI<br>
                    <span style="font-size: 14px; opacity: 0.8;">æ™ºèƒ½å„¿ç«¥å­¦ä¹ å¹³å°</span>
                </div>
                <div class="startup-progress">
                    <div class="startup-progress-fill"></div>
                </div>
            </div>
            
            <!-- iOSçŠ¶æ€æ  -->
            <div class="ios-status-bar">
                <div class="status-left">
                    <span id="currentTime">14:32</span>
                    <span style="font-size: 12px; opacity: 0.8;">å‘¨æ—¥</span>
                </div>
                <div class="status-right">
                    <div class="signal-strength">
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                    </div>
                    <i class="fas fa-wifi" style="font-size: 14px;"></i>
                    <div class="battery-indicator">
                        <span style="font-size: 12px;">87%</span>
                        <div class="battery-icon">
                            <div class="battery-fill"></div>
                            <div class="battery-tip"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- èŒèŠ½AI App -->
            <div class="mengya-app">
                <!-- Appå¯¼èˆª -->
                <div class="app-navigation">
                    <div class="app-logo-section">
                        <div class="app-logo">ğŸŒ±</div>
                        <div>
                            <div class="app-title">èŒèŠ½AI</div>
                            <div class="app-subtitle">æ™ºèƒ½å­¦ä¹ ä¼™ä¼´</div>
                        </div>
                    </div>
                </div>
                
                <!-- Appå†…å®¹ -->
                <div class="app-content" id="appContent">
                    <!-- æ¬¢è¿æ¨ªå¹… -->
                    <div class="welcome-banner content-fade-in" style="animation-delay: 0.2s;">
                        <div class="welcome-content">
                            <div class="welcome-text">
                                <div class="welcome-greeting">ä¸‹åˆå¥½ï¼Œå°æ˜ï¼</div>
                                <div class="welcome-message">ä»Šå¤©æ˜¯å­¦ä¹ çš„ç¬¬5å¤©ï¼Œè®©æˆ‘ä»¬ç»§ç»­ç²¾å½©çš„å­¦ä¹ ä¹‹æ—…å§ï¼</div>
                            </div>
                            <div class="welcome-avatar">ğŸ‘¦</div>
                        </div>
                    </div>
                    
                    <!-- åŠŸèƒ½å¡ç‰‡ç½‘æ ¼ -->
                    <div class="feature-grid">
                        <!-- èƒ½åŠ›è®­ç»ƒ -->
                        <div class="feature-card training-card content-fade-in" style="animation-delay: 0.4s;" onclick="openTrainingCenter()">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸ¯</div>
                                <div class="feature-badge">NEW</div>
                            </div>
                            <div class="feature-title">èƒ½åŠ›è®­ç»ƒä¸­å¿ƒ</div>
                            <div class="feature-subtitle">äº”å¤§æ ¸å¿ƒèƒ½åŠ›æå‡</div>
                            <div class="feature-content">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">ä»Šæ—¥è¿›åº¦</div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>è¡¨è¾¾åŠ› ğŸ’¬</span>
                                        <span>65/100</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>åˆ›é€ åŠ› ğŸ¨</span>
                                        <span>80/100 âœ“</span>
                                    </div>
                                </div>
                                <button style="background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; width: 100%;">
                                    å¼€å§‹è®­ç»ƒ â†’
                                </button>
                            </div>
                        </div>
                        
                        <!-- è™šæ‹Ÿä¼™ä¼´ -->
                        <div class="feature-card partner-card content-fade-in" style="animation-delay: 0.6s;" onclick="openPartnerCenter()">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸŒ±</div>
                                <div style="font-size: 12px; opacity: 0.9;">Lv.4</div>
                            </div>
                            <div class="feature-title">æˆ‘çš„ä¼™ä¼´</div>
                            <div class="feature-subtitle">å°èŠ½èŠ½é™ªä½ æˆé•¿</div>
                            <div class="feature-content">
                                <div style="text-align: center; margin: 16px 0;">
                                    <div style="font-size: 32px; margin-bottom: 8px;">ğŸŒ³</div>
                                    <div style="font-size: 14px; opacity: 0.9;">å¼€å¿ƒæ„‰æ‚¦ â€¢ æƒ³è¦å­¦ä¹ </div>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button onclick="event.stopPropagation(); feedPartnerQuick()" style="flex: 1; background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 6px; border-radius: 6px; font-size: 11px;">å–‚é£Ÿ</button>
                                    <button onclick="event.stopPropagation(); playWithPartnerQuick()" style="flex: 1; background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 6px; border-radius: 6px; font-size: 11px;">æ¸¸æˆ</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AIåŠ©æ•™ -->
                        <div class="feature-card ai-card content-fade-in" style="animation-delay: 0.8s;" onclick="openAIAssistant()">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸ¤–</div>
                                <div style="display: flex; gap: 4px;">
                                    <div style="background: #ff3b30; color: white; padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: bold;">AIé©±åŠ¨</div>
                                    <div class="feature-badge">3</div>
                                </div>
                            </div>
                            <div class="feature-title">AIåŠ©æ•™å°èŒ</div>
                            <div class="feature-subtitle">åŸºäºå­¦ç§‘å†…å®¹çš„æ™ºèƒ½æŒ‡å¯¼</div>
                            <div class="feature-content">
                                <div style="background: rgba(255, 255, 255, 0.2); padding: 12px; border-radius: 8px; margin-bottom: 12px; font-size: 13px;">
                                    "åŸºäºä½ çš„èƒ½åŠ›åˆ†æï¼Œæˆ‘æ¨èè¯­æ–‡+æ•°å­¦èåˆçš„é€»è¾‘è¡¨è¾¾è®­ç»ƒ"
                                </div>
                                <button style="background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; width: 100%;">
                                    è·å–AIæŒ‡å¯¼ â†’
                                </button>
                            </div>
                        </div>
                        
                        <!-- æ•…äº‹å¢™ -->
                        <div class="feature-card story-card content-fade-in" style="animation-delay: 1.0s;" onclick="openStoryWall()">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸ“š</div>
                                <div style="font-size: 12px; opacity: 0.9;">çƒ­é—¨</div>
                            </div>
                            <div class="feature-title">æ•…äº‹åˆ›ä½œå¢™</div>
                            <div class="feature-subtitle">åˆ†äº«ä½ çš„åˆ›æ„ä½œå“</div>
                            <div class="feature-content">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 13px; opacity: 0.9; margin-bottom: 6px;">ğŸ“– ã€Šå°å…”å­çš„å†’é™©ã€‹</div>
                                    <div style="font-size: 12px; opacity: 0.8;">â¤ï¸ 28ä¸ªèµ â€¢ ğŸ”¥ çƒ­é—¨ä½œå“</div>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button onclick="event.stopPropagation(); likeStory()" style="flex: 1; background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 6px; border-radius: 6px; font-size: 11px;">ç‚¹èµ</button>
                                    <button onclick="event.stopPropagation(); shareStory()" style="flex: 1; background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 6px; border-radius: 6px; font-size: 11px;">åˆ†äº«</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä»Šæ—¥æˆå°± -->
                    <div class="ios-card content-fade-in" style="animation-delay: 1.2s; background: white; border-radius: 16px; padding: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 20px;">ğŸ†</span>
                                <span style="font-size: 16px; font-weight: 700; color: #1d1d1f;">ä»Šæ—¥æˆå°±</span>
                            </div>
                            <span style="color: #667eea; font-size: 14px; font-weight: 500;">æŸ¥çœ‹å…¨éƒ¨</span>
                        </div>
                        
                        <div style="display: flex; gap: 12px; overflow-x: auto; padding-bottom: 8px;">
                            <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 12px; padding: 16px; text-align: center; min-width: 100px; position: relative;">
                                <div style="position: absolute; top: -4px; right: -4px; background: #ff3b30; color: white; font-size: 8px; padding: 2px 4px; border-radius: 4px; font-weight: bold;">NEW</div>
                                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ¨</div>
                                <div style="font-size: 12px; font-weight: 600;">åˆ›æ„å¤§å¸ˆ</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #34d399, #10b981); color: white; border-radius: 12px; padding: 16px; text-align: center; min-width: 100px;">
                                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ’¬</div>
                                <div style="font-size: 12px; font-weight: 600;">è¡¨è¾¾ä¸“å®¶</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 12px; padding: 16px; text-align: center; min-width: 100px;">
                                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ”¥</div>
                                <div style="font-size: 12px; font-weight: 600;">åšæŒå† å†›</div>
                            </div>
                            
                            <div style="background: #f2f2f7; border: 2px dashed #d1d5db; border-radius: 12px; padding: 16px; text-align: center; min-width: 100px; color: #8e8e93;">
                                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ”’</div>
                                <div style="font-size: 12px; font-weight: 600;">å¾…è§£é”</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Bar -->
                <div class="tab-bar">
                    <div class="tab-item active" onclick="switchTab('home')">
                        <div class="tab-icon">ğŸ </div>
                        <div class="tab-label">é¦–é¡µ</div>
                    </div>
                    
                    <div class="tab-item" onclick="switchTab('learning')">
                        <div class="tab-icon">ğŸ¯</div>
                        <div class="tab-label">è®­ç»ƒ</div>
                    </div>
                    
                    <div class="tab-item" onclick="switchTab('ai')">
                        <div class="tab-icon">ğŸ¤–</div>
                        <div class="tab-label">AIåŠ©æ•™</div>
                        <div class="notification-dot"></div>
                    </div>
                    
                    <div class="tab-item" onclick="switchTab('story')">
                        <div class="tab-icon">ğŸ“š</div>
                        <div class="tab-label">æ•…äº‹</div>
                    </div>
                    
                    <div class="tab-item" onclick="switchTab('profile')">
                        <div class="tab-icon">ğŸ‘¤</div>
                        <div class="tab-label">æˆ‘çš„</div>
                    </div>
                    
                    <div class="tab-item" onclick="switchTab('parent')">
                        <div class="tab-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <div class="tab-label">å®¶é•¿ç«¯</div>
                    </div>
                </div>
            </div>
            
            <!-- HomeæŒ‡ç¤ºå™¨ -->
            <div class="home-indicator"></div>
        </div>
        
        <!-- è®¾å¤‡é˜´å½± -->
        <div class="device-shadow"></div>
    </div>

    <script>
        // é¡µé¢å¯åŠ¨
        document.addEventListener('DOMContentLoaded', function() {
            startApp();
            updateTime();
            setInterval(updateTime, 1000);
        });
        
        // å¯åŠ¨åº”ç”¨
        function startApp() {
            // å¯åŠ¨åŠ¨ç”»
            setTimeout(() => {
                document.getElementById('startupAnimation').classList.add('hidden');
                
                // æ£€æŸ¥æ˜¯å¦éœ€è¦AIæµ‹è¯„
                setTimeout(() => {
                    checkNeedAssessment();
                }, 500);
            }, 4000);
        }
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦AIæµ‹è¯„
        function checkNeedAssessment() {
            // æ£€æŸ¥æ˜¯å¦åœ¨å½“å‰ä¼šè¯ä¸­å·²å®Œæˆæµ‹è¯„
            const hasCompletedAssessment = localStorage.getItem('mengya_assessment_completed') === 'true';
            const sessionAssessmentCompleted = sessionStorage.getItem('session_assessment_completed') === 'true';
            
            if (!hasCompletedAssessment || !sessionAssessmentCompleted) {
                // æ¸…é™¤ä¹‹å‰çš„æµ‹è¯„è®°å½•ï¼Œç¡®ä¿é‡æ–°æµ‹è¯„
                localStorage.removeItem('mengya_assessment_completed');
                localStorage.removeItem('mengya_assessment_data');
                sessionStorage.removeItem('session_assessment_completed');
                
                // æ˜¾ç¤ºAIæµ‹è¯„å¼•å¯¼
                showAIAssessmentIntro();
                
                // æ˜¾ç¤ºå¯åŠ¨æç¤º
                showNotification('ğŸš€ æ¬¢è¿ä½¿ç”¨èŒèŠ½AIï¼å³å°†å¼€å§‹AIèƒ½åŠ›æµ‹è¯„...');
            } else {
                // å¦‚æœå½“å‰ä¼šè¯å·²å®Œæˆæµ‹è¯„ï¼Œç›´æ¥è¿›å…¥åº”ç”¨
                initializeAppData();
                showWelcomeNotification();
            }
        }
        
        // æ˜¾ç¤ºAIæµ‹è¯„ä»‹ç»
        function showAIAssessmentIntro() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 40px; text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 20px;">ğŸ¤–</div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #1d1d1f; margin-bottom: 12px;">AIæ™ºèƒ½æµ‹è¯„</h2>
                    <p style="color: #8e8e93; font-size: 16px; margin-bottom: 32px; line-height: 1.5;">
                        ä¸ºäº†ç»™ä½ æä¾›æœ€é€‚åˆçš„å­¦ä¹ å†…å®¹ï¼Œ<br>
                        AIåŠ©æ•™éœ€è¦å…ˆäº†è§£ä½ çš„èƒ½åŠ›æ°´å¹³
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 32px;">
                        <h3 style="margin-bottom: 16px;">ğŸ¯ AIæµ‹è¯„ç‰¹è‰²</h3>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px; text-align: left;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="background: rgba(255, 255, 255, 0.2); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ğŸ§ </div>
                                <span>æ™ºèƒ½åˆ†æäº”å¤§æ ¸å¿ƒèƒ½åŠ›æ°´å¹³</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="background: rgba(255, 255, 255, 0.2); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ğŸ¯</div>
                                <span>AIè‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="background: rgba(255, 255, 255, 0.2); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ğŸ“š</div>
                                <span>åŸºäºå­¦ç§‘å†…å®¹çš„æ™ºèƒ½å†…å®¹ç”Ÿæˆ</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="background: rgba(255, 255, 255, 0.2); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">â±ï¸</div>
                                <span>çº¦éœ€5åˆ†é’Ÿï¼Œè½»æ¾æœ‰è¶£</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 16px; justify-content: center;">
                        <button onclick="startAIAssessment()" style="background: #007AFF; color: white; border: none; padding: 16px 32px; border-radius: 25px; cursor: pointer; font-weight: 600; font-size: 18px; box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);">
                            ğŸš€ å¼€å§‹AIæµ‹è¯„
                        </button>
                        <button onclick="skipAssessment()" style="background: #8e8e93; color: white; border: none; padding: 16px 24px; border-radius: 25px; cursor: pointer; font-weight: 500;">
                            è·³è¿‡æµ‹è¯„
                        </button>
                    </div>
                </div>
            `;
        }
        
        // åˆå§‹åŒ–åº”ç”¨æ•°æ®
        async function initializeAppData() {
            try {
                // å®Œæ•´çš„ç”¨æˆ·æ•°æ®
                await MengyaUtils.Data.setData('child.profile', {
                    nickname: 'å°æ˜',
                    avatar: 'ğŸ‘¦',
                    level: 4,
                    experience: 320,
                    joinDate: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
                    preferences: {
                        favoriteSubject: 'creativity',
                        learningStyle: 'visual',
                        difficulty: 'intermediate'
                    }
                });

                // è¯¦ç»†çš„å­¦ä¹ è¿›åº¦
                await MengyaUtils.Data.setData('child.progress', {
                    totalTasks: 18,
                    completedTasks: 12,
                    currentStreak: 5,
                    maxStreak: 9,
                    todayTasks: 3,
                    todayExp: 45,
                    todayTime: 25,
                    weeklyGoal: 5,
                    monthlyGoal: 20,
                    abilities: {
                        expression: 65,
                        logic: 45,
                        creativity: 80,
                        exploration: 35,
                        habit: 55
                    },
                    weeklyProgress: [
                        { day: 'å‘¨ä¸€', tasks: 2, exp: 30 },
                        { day: 'å‘¨äºŒ', tasks: 1, exp: 15 },
                        { day: 'å‘¨ä¸‰', tasks: 3, exp: 45 },
                        { day: 'å‘¨å››', tasks: 2, exp: 30 },
                        { day: 'å‘¨äº”', tasks: 1, exp: 15 },
                        { day: 'å‘¨å…­', tasks: 2, exp: 30 },
                        { day: 'å‘¨æ—¥', tasks: 1, exp: 15 }
                    ]
                });

                // é«˜çº§è™šæ‹Ÿä¼™ä¼´ç³»ç»Ÿ
                await MengyaUtils.Data.setData('child.virtualPartner', {
                    name: 'å°èŠ½èŠ½',
                    level: 4,
                    growth: 580,
                    activity: 420,
                    mood: 'excited',
                    personality: 'cheerful',
                    favoriteActivity: 'learning',
                    lastInteraction: new Date().toISOString(),
                    milestones: [100, 300, 500, 800],
                    accessories: {
                        hat: false,
                        glasses: false,
                        bow: true
                    },
                    evolutionStage: 'tree', // seedling -> sprout -> tree -> forest -> wisdom
                    specialAbilities: ['creativity_boost', 'learning_reminder']
                });

                // ä¸°å¯Œçš„æˆå°±ç³»ç»Ÿ
                await MengyaUtils.Data.setData('child.achievements', [
                    {
                        id: 'first-step',
                        name: 'åˆå­¦è€…',
                        description: 'å®Œæˆç¬¬ä¸€ä¸ªè®­ç»ƒä»»åŠ¡',
                        icon: 'ğŸŒ±',
                        category: 'milestone',
                        rarity: 'common',
                        unlockTime: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
                        notified: true
                    },
                    {
                        id: 'creative-master',
                        name: 'åˆ›æ„å¤§å¸ˆ',
                        description: 'åˆ›é€ åŠ›è¾¾åˆ°80ç‚¹',
                        icon: 'ğŸ¨',
                        category: 'ability',
                        rarity: 'rare',
                        unlockTime: new Date(Date.now() - 10 * 60 * 1000).toISOString(),
                        notified: false
                    },
                    {
                        id: 'expression-expert',
                        name: 'è¡¨è¾¾ä¸“å®¶',
                        description: 'è¡¨è¾¾åŠ›è¾¾åˆ°60ç‚¹',
                        icon: 'ğŸ’¬',
                        category: 'ability',
                        rarity: 'uncommon',
                        unlockTime: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                        notified: true
                    },
                    {
                        id: 'streak-champion',
                        name: 'åšæŒå† å†›',
                        description: 'è¿ç»­å­¦ä¹ 5å¤©',
                        icon: 'ğŸ”¥',
                        category: 'habit',
                        rarity: 'uncommon',
                        unlockTime: new Date().toISOString(),
                        notified: false
                    }
                ]);

                // å­¦ä¹ å†…å®¹åº“
                await MengyaUtils.Data.setData('learning.content', {
                    stories: [
                        {
                            id: 'rabbit_adventure',
                            title: 'å°å…”å­çš„å†’é™©',
                            content: 'ä»å‰æœ‰ä¸€åªå‹‡æ•¢çš„å°å…”å­...',
                            difficulty: 'easy',
                            skills: ['expression', 'creativity'],
                            likes: 28,
                            author: 'å°çº¢',
                            aiTags: ['æƒ³è±¡åŠ›ä¸°å¯Œ', 'æƒ…èŠ‚ç”ŸåŠ¨', 'è¯­è¨€ä¼˜ç¾']
                        },
                        {
                            id: 'magic_garden',
                            title: 'ç¥å¥‡çš„èŠ±å›­',
                            content: 'åœ¨ä¸€ä¸ªç¥ç§˜çš„èŠ±å›­é‡Œ...',
                            difficulty: 'medium',
                            skills: ['exploration', 'logic'],
                            likes: 35,
                            author: 'å°æ˜',
                            aiTags: ['é€»è¾‘æ¸…æ™°', 'æ¢ç´¢ç²¾ç¥', 'è§‚å¯Ÿä»”ç»†']
                        }
                    ],
                    tasks: [
                        {
                            id: 'expression_basic',
                            name: 'çœ‹å›¾è¯´è¯',
                            description: 'è§‚å¯Ÿå›¾ç‰‡ï¼Œç”¨è‡ªå·±çš„è¯æè¿°çœ‹åˆ°çš„å†…å®¹',
                            ability: 'expression',
                            difficulty: 'easy',
                            estimatedTime: 10,
                            rewards: { exp: 15, coins: 5 }
                        },
                        {
                            id: 'logic_puzzle',
                            name: 'é€»è¾‘æ‹¼å›¾',
                            description: 'é€šè¿‡é€»è¾‘æ¨ç†å®Œæˆæ‹¼å›¾æŒ‘æˆ˜',
                            ability: 'logic',
                            difficulty: 'medium',
                            estimatedTime: 15,
                            rewards: { exp: 20, coins: 8 }
                        }
                    ]
                });
                
                console.log('âœ… åº”ç”¨æ•°æ®åˆå§‹åŒ–å®Œæˆ');
                
            } catch (error) {
                console.error('åº”ç”¨æ•°æ®åˆå§‹åŒ–å¤±è´¥:', error);
            }
        }
        
        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('zh-CN', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('currentTime').textContent = timeString;
        }
        
        // æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
        function showWelcomeNotification() {
            setTimeout(() => {
                showNotification('ğŸŒ± æ¬¢è¿å›æ¥ï¼å°èŠ½èŠ½æƒ³ä½ äº†ï¼');
            }, 1000);
            
            // æ£€æŸ¥æ˜¯å¦æœ‰æ–°æˆå°±
            setTimeout(() => {
                showNotification('ğŸ† æ­å–œï¼ä½ è·å¾—äº†"åˆ›æ„å¤§å¸ˆ"æ–°æˆå°±ï¼');
            }, 3000);
        }
        
        // iOSé€šçŸ¥å‡½æ•°ï¼ˆä¿®å¤ç¼ºå¤±å‡½æ•°ï¼‰
        function showIOSNotification(message, duration = 3000) {
            showNotification(message, duration);
        }
        
        // iOSé£æ ¼é€šçŸ¥
        function showNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: absolute;
                top: 50px;
                left: 50%;
                transform: translateX(-50%) translateY(-100px);
                background: rgba(0, 0, 0, 0.85);
                color: white;
                padding: 12px 20px;
                border-radius: 12px;
                font-size: 14px;
                font-weight: 500;
                backdrop-filter: blur(20px);
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 1001;
                max-width: 280px;
                text-align: center;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(-100px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 400);
            }, duration);
        }
        
        // Tabåˆ‡æ¢åŠŸèƒ½
        function switchTab(tab) {
            document.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
            
            // æ ¹æ®tabå‚æ•°åˆ‡æ¢åˆ°å¯¹åº”ç•Œé¢
            switch(tab) {
                case 'home':
                    switchToHomeInterface();
                    showNotification('ğŸ  é¦–é¡µ');
                    break;
                case 'learning':
                    switchToTrainingInterface();
                    showNotification('ğŸ¯ è®­ç»ƒä¸­å¿ƒ');
                    break;
                case 'ai':
                    switchToAIInterface();
                    showNotification('ğŸ¤– AIåŠ©æ•™');
                    break;
                case 'story':
                    switchToStoryInterface();
                    showNotification('ğŸ“š æ•…äº‹å¢™');
                    break;
                case 'profile':
                    switchToProfileInterface();
                    showNotification('ğŸ‘¤ ä¸ªäººä¸­å¿ƒ');
                    break;
                case 'parent':
                    openParentPortal();
                    showNotification('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶é•¿ç«¯');
                    break;
            }
        }
        
        // åŠŸèƒ½å…¥å£
        function openTrainingCenter() {
            showNotification('ğŸ¯ æ­£åœ¨æ‰“å¼€èƒ½åŠ›è®­ç»ƒä¸­å¿ƒ...');
            
            // æ¨¡æ‹Ÿé¡µé¢åˆ‡æ¢åˆ°è®­ç»ƒç•Œé¢
            setTimeout(() => {
                switchToTrainingInterface();
            }, 1000);
        }
        
        function openPartnerCenter() {
            showNotification('ğŸŒ± æŸ¥çœ‹å­¦ä¹ ä¼™ä¼´çš„æˆé•¿è®°å½•...');
            
            // åˆ‡æ¢åˆ°ä¼™ä¼´è¯¦ç»†ç•Œé¢
            setTimeout(() => {
                switchToPartnerInterface();
            }, 1000);
        }
        
        function openAIAssistant() {
            showNotification('ğŸ¤– AIåŠ©æ•™å‡†å¤‡å°±ç»ª...');
            
            // åˆ‡æ¢åˆ°AIå¯¹è¯ç•Œé¢
            setTimeout(() => {
                switchToAIInterface();
            }, 1000);
        }
        
        function openStoryWall() {
            showNotification('ğŸ“š æ­£åœ¨åŠ è½½æ•…äº‹å†…å®¹...');
            
            // åˆ‡æ¢åˆ°æ•…äº‹ç•Œé¢
            setTimeout(() => {
                switchToStoryInterface();
            }, 1000);
        }
        
        function openProfileCenter() {
            showNotification('ğŸ‘¤ æ­£åœ¨åŠ è½½ä¸ªäººæ•°æ®...');
            
            // åˆ‡æ¢åˆ°ä¸ªäººä¸­å¿ƒç•Œé¢
            setTimeout(() => {
                switchToProfileInterface();
            }, 1000);
        }
        
        // ä¼™ä¼´äº¤äº’åŠŸèƒ½ï¼ˆä»…ç”¨äºæŸ¥çœ‹ï¼Œä¸ä¸»åŠ¨å¢åŠ æˆé•¿å€¼ï¼‰
        function interactWithPartner() {
            showNotification('ğŸŒ± å°èŠ½èŠ½æ­£åœ¨å®‰é™ç­‰å¾…ï¼Œå®Œæˆè®­ç»ƒä»»åŠ¡è®©å®ƒæˆé•¿å§ï¼');
        }
        
        function likeStory() {
            showNotification('â¤ï¸ å·²ä¸ºã€Šå°å…”å­çš„å†’é™©ã€‹ç‚¹èµï¼');
        }
        
        function shareStory() {
            showNotification('ğŸ“¤ æ•…äº‹åˆ†äº«æˆåŠŸï¼ä½ çš„æœ‹å‹ä»¬ä¼šçœ‹åˆ°è¿™ä¸ªç²¾å½©æ•…äº‹ï¼');
        }
        
        // ç•Œé¢åˆ‡æ¢å‡½æ•°
        function switchToTrainingInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToHomeInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">èƒ½åŠ›è®­ç»ƒä¸­å¿ƒ</h2>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                        <div onclick="startTraining('expression')" style="background: white; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 32px; margin-bottom: 12px;">ğŸ’¬</div>
                            <div style="font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">è¡¨è¾¾åŠ›è®­ç»ƒ</div>
                            <div style="font-size: 14px; color: #8e8e93; margin-bottom: 12px;">æå‡è¯­è¨€è¡¨è¾¾èƒ½åŠ›</div>
                            <div style="background: #e5e5ea; height: 6px; border-radius: 3px; margin-bottom: 8px; overflow: hidden;">
                                <div style="background: #007AFF; height: 100%; width: 65%; border-radius: 3px;"></div>
                            </div>
                            <div style="font-size: 12px; color: #007AFF; font-weight: 600;">65/100 - è¿›è¡Œä¸­</div>
                        </div>
                        
                        <div onclick="startTraining('logic')" style="background: white; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 32px; margin-bottom: 12px;">ğŸ§ </div>
                            <div style="font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">é€»è¾‘åŠ›è®­ç»ƒ</div>
                            <div style="font-size: 14px; color: #8e8e93; margin-bottom: 12px;">å¢å¼ºæ¨ç†æ€è€ƒèƒ½åŠ›</div>
                            <div style="background: #e5e5ea; height: 6px; border-radius: 3px; margin-bottom: 8px; overflow: hidden;">
                                <div style="background: #007AFF; height: 100%; width: 45%; border-radius: 3px;"></div>
                            </div>
                            <div style="font-size: 12px; color: #007AFF; font-weight: 600;">45/100 - è¿›è¡Œä¸­</div>
                        </div>
                        
                        <div onclick="startTraining('creativity')" style="background: white; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 32px; margin-bottom: 12px;">ğŸ¨</div>
                            <div style="font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">åˆ›é€ åŠ›è®­ç»ƒ</div>
                            <div style="font-size: 14px; color: #8e8e93; margin-bottom: 12px;">æ¿€å‘æƒ³è±¡åŠ›å’Œåˆ›æ–°</div>
                            <div style="background: #e5e5ea; height: 6px; border-radius: 3px; margin-bottom: 8px; overflow: hidden;">
                                <div style="background: #34d399; height: 100%; width: 80%; border-radius: 3px;"></div>
                            </div>
                            <div style="font-size: 12px; color: #34d399; font-weight: 600;">80/100 - ä¼˜ç§€</div>
                        </div>
                        
                        <div onclick="startTraining('exploration')" style="background: white; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 32px; margin-bottom: 12px;">ğŸ”</div>
                            <div style="font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">æ¢ç©¶åŠ›è®­ç»ƒ</div>
                            <div style="font-size: 14px; color: #8e8e93; margin-bottom: 12px;">åŸ¹å…»å¥½å¥‡å¿ƒå’Œæ¢ç´¢</div>
                            <div style="background: #e5e5ea; height: 6px; border-radius: 3px; margin-bottom: 8px; overflow: hidden;">
                                <div style="background: #007AFF; height: 100%; width: 35%; border-radius: 3px;"></div>
                            </div>
                            <div style="font-size: 12px; color: #007AFF; font-weight: 600;">35/100 - è¿›è¡Œä¸­</div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ¯</div>
                        <h3 style="color: #1d1d1f; margin-bottom: 8px;">é€‰æ‹©è®­ç»ƒé¡¹ç›®</h3>
                        <p style="color: #8e8e93; font-size: 14px;">ç‚¹å‡»ä¸Šæ–¹å¡ç‰‡å¼€å§‹ç›¸åº”çš„èƒ½åŠ›è®­ç»ƒ</p>
                    </div>
                </div>
            `;
        }
        
        function switchToAIInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="height: 100%; display: flex; flex-direction: column;">
                    <div style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #e5e5ea;">
                        <button onclick="switchToHomeInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›
                        </button>
                        <div style="flex: 1; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700; color: #1d1d1f;">AIåŠ©æ•™å°èŒ</div>
                            <div style="font-size: 12px; color: #34d399;">â— åœ¨çº¿</div>
                        </div>
                    </div>
                    
                    <div style="flex: 1; overflow-y: auto; padding: 20px;" id="chatArea">
                        <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 12px;">ğŸ¤–</div>
                            <h3 style="color: #1d1d1f; margin-bottom: 8px;">AIåŠ©æ•™å°èŒ</h3>
                            <p style="color: #8e8e93; font-size: 14px;">ä½ å¥½å°æ˜ï¼æˆ‘çœ‹åˆ°ä½ çš„åˆ›é€ åŠ›å¾ˆæ£’ï¼Œå·²ç»80ç‚¹äº†ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</p>
                        </div>
                        
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px;">
                            <button onclick="sendQuickAIMessage('æˆ‘çš„è¿›åº¦æ€ä¹ˆæ ·')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 8px 12px; border-radius: 16px; font-size: 12px; cursor: pointer; color: #1d1d1f;">ğŸ“Š æŸ¥çœ‹è¿›åº¦</button>
                            <button onclick="sendQuickAIMessage('å°èŠ½èŠ½æ€ä¹ˆæ ·äº†')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 8px 12px; border-radius: 16px; font-size: 12px; cursor: pointer; color: #1d1d1f;">ğŸŒ± ä¼™ä¼´çŠ¶æ€</button>
                            <button onclick="sendQuickAIMessage('æˆ‘æƒ³å­¦ä¹ ')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 8px 12px; border-radius: 16px; font-size: 12px; cursor: pointer; color: #1d1d1f;">ğŸ“ å¼€å§‹å­¦ä¹ </button>
                            <button onclick="sendQuickAIMessage('ç»™æˆ‘è®²ä¸ªæ•…äº‹')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 8px 12px; border-radius: 16px; font-size: 12px; cursor: pointer; color: #1d1d1f;">ğŸ“š å¬æ•…äº‹</button>
                        </div>
                        
                        <div id="chatMessages"></div>
                    </div>
                    
                    <div style="padding: 16px 20px; border-top: 1px solid #e5e5ea; background: white;">
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <input type="text" id="chatInput" placeholder="è¾“å…¥ä½ æƒ³è¯´çš„è¯..." style="flex: 1; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 20px; outline: none; font-size: 14px;" onkeypress="handleChatKeyPress(event)">
                            <button onclick="sendChatMessage()" style="background: #007AFF; color: white; border: none; width: 44px; height: 44px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function switchToStoryInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                        <div style="display: flex; align-items: center;">
                            <button onclick="switchToHomeInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                                <i class="fas fa-arrow-left"></i> è¿”å›
                            </button>
                            <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">æ•…äº‹åˆ›ä½œå¢™</h2>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button onclick="openStoryPublish()" style="background: #007AFF; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                <i class="fas fa-plus"></i> å‘å¸ƒæ•…äº‹
                            </button>
                            <button onclick="openCollaboration()" style="background: #34d399; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                <i class="fas fa-users"></i> å…±åˆ›æ•…äº‹
                            </button>
                        </div>
                    </div>
                    
                    <!-- å…±åˆ›æ•…äº‹æ¨è -->
                    <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 20px;">ğŸ¤</span>
                                <span style="font-size: 16px; font-weight: 600;">æ­£åœ¨å…±åˆ›</span>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 4px 8px; border-radius: 8px; font-size: 11px;">3äººå‚ä¸</div>
                        </div>
                        <h3 style="margin-bottom: 8px;">ã€Šæ£®æ—å¤§å†’é™©ã€‹- å¤šäººæ¥é¾™æ•…äº‹</h3>
                        <p style="opacity: 0.9; font-size: 13px; margin-bottom: 12px;">
                            å°æ˜å¼€å§‹ï¼šåœ¨ä¸€ä¸ªé˜³å…‰æ˜åªšçš„æ—©æ™¨ï¼Œå°ç†Šå†³å®šå»æ£®æ—æ¢é™©...<br>
                            å°çº¢æ¥é¾™ï¼šçªç„¶ï¼Œå°ç†Šå¬åˆ°äº†å¥‡æ€ªçš„å£°éŸ³ï¼Œå®ƒå°å¿ƒç¿¼ç¿¼åœ°èµ°å‘å£°éŸ³æ¥æº...<br>
                            <span style="color: #fff3cd;">ç­‰å¾…ä½ æ¥ç»­å†™ â†’ </span>
                        </p>
                        <button onclick="joinCollaboration()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            âœï¸ æ¥ä¸‹å»å†™
                        </button>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                <div style="width: 32px; height: 32px; background: #ff9500; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold;">å°</div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">å°çº¢</div>
                                    <div style="font-size: 12px; color: #8e8e93;">2å°æ—¶å‰</div>
                                </div>
                                <div style="margin-left: auto; background: #ff3b30; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold;">ğŸ”¥ çƒ­é—¨</div>
                            </div>
                            <h3 style="color: #1d1d1f; margin-bottom: 8px;">ã€Šå°å…”å­çš„å†’é™©ã€‹</h3>
                            <p style="color: #3a3a3c; font-size: 14px; line-height: 1.5; margin-bottom: 12px;">ä»å‰æœ‰ä¸€åªå‹‡æ•¢çš„å°å…”å­ï¼Œå®ƒä½åœ¨ç¾ä¸½çš„æ£®æ—é‡Œã€‚æœ‰ä¸€å¤©ï¼Œå°å…”å­å†³å®šå»å¯»æ‰¾ä¼ è¯´ä¸­çš„å½©è™¹èŠ±ï¼Œå¼€å§‹äº†ä¸€æ®µå¥‡å¦™çš„å†’é™©ä¹‹æ—…ã€‚åœ¨è·¯ä¸Šï¼Œå®ƒé‡åˆ°äº†æ™ºæ…§çš„è€çŒ«å¤´é¹°ï¼Œå‹å–„çš„å°æ¾é¼ ï¼Œè¿˜æœ‰ç¥ç§˜çš„é­”æ³•å¸ˆ...</p>
                            <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 8px; font-size: 11px;">æƒ³è±¡åŠ›ä¸°å¯Œ</span>
                                <span style="background: #e8f5e8; color: #388e3c; padding: 4px 8px; border-radius: 8px; font-size: 11px;">æƒ…èŠ‚ç”ŸåŠ¨</span>
                                <span style="background: #fce4ec; color: #c2185b; padding: 4px 8px; border-radius: 8px; font-size: 11px;">è¯­è¨€ä¼˜ç¾</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; gap: 16px;">
                                    <button onclick="likeStoryDetail()" style="background: none; border: none; color: #ff3b30; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-heart"></i> <span id="likeCount">28</span>
                                    </button>
                                    <button onclick="commentStory()" style="background: none; border: none; color: #8e8e93; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-comment"></i> 12
                                    </button>
                                    <button onclick="shareStoryDetail()" style="background: none; border: none; color: #007AFF; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-share"></i> åˆ†äº«
                                    </button>
                                </div>
                                <div style="background: #007AFF; color: white; padding: 6px 12px; border-radius: 16px; font-size: 12px; font-weight: 600;">AIè¯„åˆ†: 96åˆ†</div>
                            </div>
                        </div>
                        
                        <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                <div style="width: 32px; height: 32px; background: #34d399; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold;">æ˜</div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">å°æ˜</div>
                                    <div style="font-size: 12px; color: #8e8e93;">1å¤©å‰</div>
                                </div>
                                <div style="margin-left: auto; background: #667eea; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold;">åŸåˆ›</div>
                            </div>
                            <h3 style="color: #1d1d1f; margin-bottom: 8px;">ã€Šç¥å¥‡çš„èŠ±å›­ã€‹</h3>
                            <p style="color: #3a3a3c; font-size: 14px; line-height: 1.5; margin-bottom: 12px;">åœ¨ä¸€ä¸ªç¥ç§˜çš„èŠ±å›­é‡Œï¼Œä½ç€ä¼šè¯´è¯çš„èŠ±æœµã€‚æ¯å½“æœ‰å°æœ‹å‹æ¥åˆ°èŠ±å›­ï¼ŒèŠ±æœµä»¬å°±ä¼šç”¨ç”œç¾çš„å£°éŸ³è®²è¿°å®ƒä»¬ç»å†çš„å¥‡å¦™å†’é™©ã€‚æœ‰ä¸€å¤©ï¼Œä¸€ä¸ªå°å¥³å­©è¯¯å…¥äº†è¿™ä¸ªèŠ±å›­...</p>
                            <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 8px; font-size: 11px;">é€»è¾‘æ¸…æ™°</span>
                                <span style="background: #fff3e0; color: #f57c00; padding: 4px 8px; border-radius: 8px; font-size: 11px;">æ¢ç´¢ç²¾ç¥</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; gap: 16px;">
                                    <button onclick="likeStorySecond()" style="background: none; border: none; color: #ff3b30; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-heart"></i> <span id="likeCount2">35</span>
                                    </button>
                                    <button onclick="commentStory()" style="background: none; border: none; color: #8e8e93; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-comment"></i> 18
                                    </button>
                                    <button onclick="shareStoryDetail()" style="background: none; border: none; color: #007AFF; cursor: pointer; display: flex; align-items: center; gap: 4px;">
                                        <i class="fas fa-share"></i> åˆ†äº«
                                    </button>
                                </div>
                                <div style="background: #34d399; color: white; padding: 6px 12px; border-radius: 16px; font-size: 12px; font-weight: 600;">AIè¯„åˆ†: 89åˆ†</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function switchToPartnerInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToHomeInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">æˆ‘çš„å­¦ä¹ ä¼™ä¼´</h2>
                    </div>
                    
                    <!-- ä¼™ä¼´ä¸»è¦ä¿¡æ¯å¡ç‰‡ -->
                    <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-radius: 20px; padding: 24px; margin-bottom: 20px; border: 1px solid #bbf7d0;">
                        <div style="text-align: center; margin-bottom: 24px;">
                            <div style="position: relative; display: inline-block; margin-bottom: 16px;">
                                <div style="width: 120px; height: 120px; background: linear-gradient(135deg, #a7f3d0, #34d399); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 12px 40px rgba(52, 211, 153, 0.3); margin: 0 auto; cursor: pointer;" onclick="partnerBigInteraction()">
                                    <div style="font-size: 60px;">ğŸŒ³</div>
                                </div>
                                <div style="position: absolute; top: -8px; right: -8px; background: #059669; color: white; border-radius: 16px; padding: 4px 12px; font-size: 12px; font-weight: 700; box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);">Lv.4</div>
                            </div>
                            
                            <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 8px; color: #065f46;">å°èŠ½èŠ½</h3>
                            <p style="font-size: 16px; color: #047857; margin-bottom: 20px;">æ™ºæ…§æˆé•¿æ ‘</p>
                            
                            <!-- çŠ¶æ€æ ‡ç­¾ -->
                            <div style="display: inline-flex; align-items: center; background: #f0f9ff; color: #0c4a6e; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 500; border: 1px solid #bae6fd;">
                                ğŸ’¤ å®‰é™ç­‰å¾…ä¸­...
                            </div>
                        </div>
                        
                        <!-- æ•°æ®å±•ç¤º -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                            <div style="background: white; padding: 16px; border-radius: 12px; text-align: center; border: 1px solid #d1fae5;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 4px; color: #059669;">580</div>
                                <div style="font-size: 12px; color: #6b7280;">æˆé•¿å€¼</div>
                            </div>
                            <div style="background: white; padding: 16px; border-radius: 12px; text-align: center; border: 1px solid #d1fae5;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 4px; color: #0891b2;">3</div>
                                <div style="font-size: 12px; color: #6b7280;">è¿ç»­å­¦ä¹ å¤©æ•°</div>
                            </div>
                        </div>
                        
                        <!-- æˆé•¿è¿›åº¦ -->
                        <div style="background: white; border-radius: 12px; padding: 16px; border: 1px solid #d1fae5;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="font-size: 14px; font-weight: 600; color: #374151;">æˆé•¿è¿›åº¦</span>
                                <span style="font-size: 12px; color: #6b7280;">580 / 800</span>
                            </div>
                            <div style="background: #f3f4f6; height: 8px; border-radius: 4px; overflow: hidden; margin-bottom: 8px;">
                                <div style="background: linear-gradient(90deg, #34d399, #059669); width: 72.5%; height: 100%; border-radius: 4px; transition: width 0.5s ease;"></div>
                            </div>
                            <div style="font-size: 12px; color: #6b7280; text-align: center;">è¿˜éœ€è¦ 220 æˆé•¿å€¼å³å¯è¿›åŒ–åˆ° Lv.5</div>
                        </div>
                    </div>
                    
                    <!-- æˆé•¿è§„åˆ™è¯´æ˜ -->
                    <div style="background: #fef3c7; border: 1px solid #fbbf24; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 16px; margin-right: 8px;">ğŸ’¡</span>
                            <span style="font-size: 14px; font-weight: 600; color: #92400e;">æˆé•¿è§„åˆ™</span>
                        </div>
                        <div style="font-size: 13px; color: #92400e; line-height: 1.4;">
                            â€¢ å®Œæˆè®­ç»ƒä»»åŠ¡å¯è·å¾—æˆé•¿å€¼ (+15~30)<br>
                            â€¢ è¿ç»­å­¦ä¹ æœ‰é¢å¤–å¥–åŠ± (+10~50)<br>
                            â€¢ å¦‚æœè¶…è¿‡2å¤©æ²¡æœ‰å­¦ä¹ ï¼Œæˆé•¿å€¼ä¼šå‡å°‘ (-20)
                        </div>
                    </div>
                    
                    <!-- æœ€è¿‘æˆé•¿è®°å½• -->
                    <div style="background: white; border-radius: 12px; padding: 16px; border: 1px solid #e5e7eb;">
                        <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #1f2937;">æœ€è¿‘æˆé•¿è®°å½•</h4>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 32px; height: 32px; background: #34d399; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <span style="font-size: 14px;">âœ…</span>
                                    </div>
                                    <div>
                                        <div style="font-size: 14px; font-weight: 500; color: #1f2937;">å®Œæˆåˆ›é€ åŠ›è®­ç»ƒ</div>
                                        <div style="font-size: 12px; color: #6b7280;">ä»Šå¤© 14:30</div>
                                    </div>
                                </div>
                                <span style="font-size: 14px; font-weight: 600; color: #059669;">+25</span>
                            </div>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 32px; height: 32px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <span style="font-size: 14px;">ğŸ”¥</span>
                                    </div>
                                    <div>
                                        <div style="font-size: 14px; font-weight: 500; color: #1f2937;">è¿ç»­å­¦ä¹ å¥–åŠ±</div>
                                        <div style="font-size: 12px; color: #6b7280;">æ˜¨å¤©</div>
                                    </div>
                                </div>
                                <span style="font-size: 14px; font-weight: 600; color: #059669;">+30</span>
                            </div>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 32px; height: 32px; background: #8b5cf6; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <span style="font-size: 14px;">ğŸ†</span>
                                    </div>
                                    <div>
                                        <div style="font-size: 14px; font-weight: 500; color: #1f2937;">è·å¾—"åˆ›æ„å¤§å¸ˆ"æˆå°±</div>
                                        <div style="font-size: 12px; color: #6b7280;">2å¤©å‰</div>
                                    </div>
                                </div>
                                <span style="font-size: 14px; font-weight: 600; color: #059669;">+50</span>
                            </div>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #fef2f2; border-radius: 8px; border: 1px solid #fecaca;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 32px; height: 32px; background: #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <span style="font-size: 14px;">ğŸ˜´</span>
                                    </div>
                                    <div>
                                        <div style="font-size: 14px; font-weight: 500; color: #1f2937;">å­¦ä¹ ä¸­æ–­æƒ©ç½š</div>
                                        <div style="font-size: 12px; color: #6b7280;">3å¤©å‰ï¼ˆ2å¤©æœªå­¦ä¹ ï¼‰</div>
                                    </div>
                                </div>
                                <span style="font-size: 14px; font-weight: 600; color: #dc2626;">-20</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function switchToProfileInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToHomeInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">ä¸ªäººä¸­å¿ƒ</h2>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; text-align: center; margin-bottom: 20px;">
                        <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; margin: 0 auto 12px;">ğŸ‘¦</div>
                        <h3 style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">å°æ˜</h3>
                        <p style="font-size: 14px; opacity: 0.9; margin-bottom: 12px;">Lv.4 æ™ºæ…§å°å°† â€¢ åŠ å…¥8å¤©</p>
                        <div style="background: rgba(255, 255, 255, 0.2); padding: 8px 16px; border-radius: 12px; display: inline-block;">
                            <i class="fas fa-fire"></i> è¿ç»­å­¦ä¹ 5å¤©
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                        <div style="background: white; border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 700; color: #667eea; margin-bottom: 4px;">320</div>
                            <div style="font-size: 12px; color: #8e8e93;">æ€»ç»éªŒå€¼</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 700; color: #34d399; margin-bottom: 4px;">12</div>
                            <div style="font-size: 12px; color: #8e8e93;">å®Œæˆä»»åŠ¡</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 700; color: #ff9500; margin-bottom: 4px;">4</div>
                            <div style="font-size: 12px; color: #8e8e93;">è·å¾—æˆå°±</div>
                        </div>
                        <div style="background: white; border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 700; color: #ff3b30; margin-bottom: 4px;">5.2</div>
                            <div style="font-size: 12px; color: #8e8e93;">å­¦ä¹ å°æ—¶</div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 20px;">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">æˆ‘çš„æˆå°±</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                            <div style="aspect-ratio: 1; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; position: relative;" onclick="showAchievement('creative-master')">
                                <div style="position: absolute; top: -4px; right: -4px; background: #ff3b30; width: 16px; height: 16px; border-radius: 50%; font-size: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold;">!</div>
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ¨</div>
                                <div style="font-size: 9px; font-weight: 600; text-align: center;">åˆ›æ„å¤§å¸ˆ</div>
                            </div>
                            <div style="aspect-ratio: 1; background: linear-gradient(135deg, #34d399, #10b981); color: white; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;" onclick="showAchievement('expression-expert')">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ’¬</div>
                                <div style="font-size: 9px; font-weight: 600; text-align: center;">è¡¨è¾¾ä¸“å®¶</div>
                            </div>
                            <div style="aspect-ratio: 1; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;" onclick="showAchievement('streak-champion')">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ”¥</div>
                                <div style="font-size: 9px; font-weight: 600; text-align: center;">åšæŒå† å†›</div>
                            </div>
                            <div style="aspect-ratio: 1; background: #f2f2f7; border: 2px dashed #d1d5db; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #8e8e93;">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ”’</div>
                                <div style="font-size: 9px; font-weight: 600; text-align: center;">å¾…è§£é”</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function switchToHomeInterface() {
            // å®Œå…¨é‡ç½®å¹¶é‡æ–°åŠ è½½é¦–é¡µå†…å®¹
            const appContent = document.getElementById('appContent');
            
            // æ¸…ç©ºå†…å®¹
            appContent.innerHTML = '';
            
            // é‡æ–°åˆå§‹åŒ–é¦–é¡µ
            initializeMainInterface();
            
            // é‡æ–°è®¾ç½®åº•éƒ¨å¯¼èˆªçŠ¶æ€
            resetTabNavigation();
            
            // ç«‹å³åº”ç”¨æ ·å¼ï¼Œä¸ç­‰å¾…
            applyHomePageStyles();
            
            // æ˜¾ç¤ºé‡ç½®é€šçŸ¥
            showNotification('ğŸ  å·²è¿”å›é¦–é¡µ');
        }
        
        // ä¸“é—¨ç”¨äºåº”ç”¨é¦–é¡µæ ·å¼çš„å‡½æ•°
        function applyHomePageStyles() {
            // ç§»é™¤ä¹‹å‰çš„åŠ¨æ€æ ·å¼
            const existingStyle = document.getElementById('homepage-dynamic-styles');
            if (existingStyle) {
                existingStyle.remove();
            }
            
            // åˆ›å»ºæ–°çš„æ ·å¼å…ƒç´ 
            const style = document.createElement('style');
            style.id = 'homepage-dynamic-styles';
            style.textContent = `
                .today-learning {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
                    color: white !important;
                    border-radius: 16px !important;
                    padding: 20px !important;
                    margin-bottom: 20px !important;
                    box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3) !important;
                }
                .learning-header {
                    display: flex !important;
                    justify-content: space-between !important;
                    align-items: center !important;
                    margin-bottom: 16px !important;
                }
                .learning-title {
                    font-size: 18px !important;
                    font-weight: 700 !important;
                }
                .learning-streak {
                    background: rgba(255, 255, 255, 0.2) !important;
                    padding: 4px 12px !important;
                    border-radius: 12px !important;
                    font-size: 12px !important;
                    font-weight: 600 !important;
                }
                .learning-stats {
                    display: grid !important;
                    grid-template-columns: repeat(3, 1fr) !important;
                    gap: 16px !important;
                }
                .stat-item {
                    text-align: center !important;
                    background: rgba(255, 255, 255, 0.15) !important;
                    padding: 12px !important;
                    border-radius: 12px !important;
                }
                .stat-number {
                    font-size: 24px !important;
                    font-weight: 700 !important;
                    margin-bottom: 4px !important;
                }
                .stat-label {
                    font-size: 12px !important;
                    opacity: 0.9 !important;
                }
                .ability-grid {
                    display: grid !important;
                    grid-template-columns: repeat(2, 1fr) !important;
                    gap: 12px !important;
                }
                .ability-item {
                    background: white !important;
                    border-radius: 12px !important;
                    padding: 16px !important;
                    text-align: center !important;
                    cursor: pointer !important;
                    transition: all 0.3s ease !important;
                    border: 2px solid transparent !important;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
                }
                .ability-item:hover {
                    transform: translateY(-2px) !important;
                    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15) !important;
                }
                .ability-item.completed {
                    border-color: #34d399 !important;
                    background: linear-gradient(135deg, #f0fdf4, #dcfce7) !important;
                }
                .ability-icon {
                    font-size: 32px !important;
                    margin-bottom: 8px !important;
                }
                .ability-name {
                    font-size: 14px !important;
                    font-weight: 600 !important;
                    color: #1f2937 !important;
                    margin-bottom: 4px !important;
                }
                .ability-progress {
                    font-size: 12px !important;
                    color: #6b7280 !important;
                    font-weight: 500 !important;
                }
                .ability-item.completed .ability-progress {
                    color: #059669 !important;
                    font-weight: 600 !important;
                }
            `;
            document.head.appendChild(style);
        }
        
        // åˆå§‹åŒ–ä¸»ç•Œé¢
        function initializeMainInterface() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px; background: #f8fafc; min-height: 100vh;">
                    <!-- æ¬¢è¿æ¨ªå¹… -->
                    <div class="today-learning">
                        <div class="learning-header">
                            <div class="learning-title">ä»Šæ—¥å­¦ä¹ </div>
                            <div class="learning-streak">ğŸ”¥ è¿ç»­5å¤©</div>
                        </div>
                        <div class="learning-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="todayTasks">3</div>
                                <div class="stat-label">å®Œæˆä»»åŠ¡</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="todayExp">45</div>
                                <div class="stat-label">è·å¾—ç»éªŒ</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="todayTime">25</div>
                                <div class="stat-label">å­¦ä¹ åˆ†é’Ÿ</div>
                            </div>
                        </div>
                    </div>
                
                <!-- èƒ½åŠ›è®­ç»ƒ -->
                <div class="ios-card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ğŸ¯</span>
                            èƒ½åŠ›è®­ç»ƒ
                        </div>
                        <span style="color: #007AFF; font-size: 14px;" onclick="openTrainingCenter()">æŸ¥çœ‹å…¨éƒ¨</span>
                    </div>
                    <div class="card-content">
                        <div class="ability-grid">
                            <div class="ability-item completed" onclick="openAbilityTraining('expression')">
                                <div class="ability-icon">ğŸ’¬</div>
                                <div class="ability-name">è¡¨è¾¾åŠ›</div>
                                <div class="ability-progress">65/100 âœ“</div>
                            </div>
                            <div class="ability-item" onclick="openAbilityTraining('logic')">
                                <div class="ability-icon">ğŸ§ </div>
                                <div class="ability-name">é€»è¾‘åŠ›</div>
                                <div class="ability-progress">45/100</div>
                            </div>
                            <div class="ability-item completed" onclick="openAbilityTraining('creativity')">
                                <div class="ability-icon">ğŸ¨</div>
                                <div class="ability-name">åˆ›é€ åŠ›</div>
                                <div class="ability-progress">80/100 âœ“</div>
                            </div>
                            <div class="ability-item" onclick="openAbilityTraining('exploration')">
                                <div class="ability-icon">ğŸ”</div>
                                <div class="ability-name">æ¢ç©¶åŠ›</div>
                                <div class="ability-progress">35/100</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- è™šæ‹Ÿä¼™ä¼´ -->
                <div class="ios-card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ğŸŒ±</span>
                            æˆ‘çš„å­¦ä¹ ä¼™ä¼´
                        </div>
                        <span style="color: #34d399; font-size: 14px;" onclick="openPartnerCenter()">è¯¦æƒ… ></span>
                    </div>
                    <div class="card-content" style="padding: 20px;">
                        <!-- ä¼™ä¼´å±•ç¤ºåŒºåŸŸ -->
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                            <div style="position: relative; width: 80px; height: 80px; background: linear-gradient(135deg, #a7f3d0, #34d399); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 25px rgba(52, 211, 153, 0.3);" onclick="openPartnerCenter()">
                                <div style="font-size: 40px; cursor: pointer;">ğŸŒ³</div>
                                <div style="position: absolute; top: -5px; right: -5px; background: #10b981; color: white; border-radius: 12px; padding: 2px 6px; font-size: 10px; font-weight: 600;">Lv.4</div>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; font-weight: 700; color: #1d1d1f; margin-bottom: 4px;">å°èŠ½èŠ½</div>
                                <div style="font-size: 14px; color: #6b7280; margin-bottom: 8px;">æ™ºæ…§æˆé•¿æ ‘</div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #f0fdf4; color: #166534; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
                                        ğŸ“ˆ æˆé•¿å€¼: 580
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æˆé•¿è¿›åº¦æ¡ -->
                        <div style="margin-bottom: 16px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <span style="font-size: 12px; color: #6b7280;">è·ç¦»ä¸‹æ¬¡è¿›åŒ–</span>
                                <span style="font-size: 12px; color: #6b7280;">220/800</span>
                            </div>
                            <div style="background: #f3f4f6; height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: linear-gradient(90deg, #34d399, #10b981); width: 27.5%; height: 100%; border-radius: 3px; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                        
                        <!-- çŠ¶æ€æç¤º -->
                        <div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; text-align: center;">
                            <div style="font-size: 13px; color: #64748b; margin-bottom: 4px;">ğŸ’¤ å°èŠ½èŠ½åœ¨å®‰é™ç­‰å¾…...</div>
                            <div style="font-size: 12px; color: #94a3b8;">å®Œæˆè®­ç»ƒä»»åŠ¡å¯ä»¥è·å¾—æˆé•¿å€¼å“¦ï¼</div>
                        </div>
                    </div>
                </div>
                
                <!-- AIåŠ©æ•™å¡ç‰‡ -->
                <div class="ios-card" onclick="openAIAssistant()">
                    <div class="card-content" style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div style="width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;">ğŸ¤–</div>
                            <div style="flex: 1;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">AIåŠ©æ•™å°èŒ</div>
                                <div style="font-size: 14px; opacity: 0.9;">ä½ å¥½å°æ˜ï¼ä»Šå¤©æƒ³å­¦ä»€ä¹ˆå‘¢ï¼Ÿ</div>
                            </div>
                            <div style="background: #ff3b30; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold;">3</div>
                        </div>
                    </div>
                </div>
                
                <!-- æœ€è¿‘æ´»åŠ¨ -->
                <div class="ios-card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ğŸ“Š</span>
                            æœ€è¿‘æ´»åŠ¨
                        </div>
                        <span style="color: #007AFF; font-size: 14px;">æŸ¥çœ‹å…¨éƒ¨</span>
                    </div>
                    <div class="card-content">
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: center; gap: 12px; padding: 8px 0;">
                                <div style="width: 32px; height: 32px; background: #34d399; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">âœ“</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">å®Œæˆåˆ›é€ åŠ›è®­ç»ƒ</div>
                                    <div style="font-size: 12px; color: #8e8e93;">è·å¾—15ç»éªŒå€¼ â€¢ åˆšåˆš</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px; padding: 8px 0;">
                                <div style="width: 32px; height: 32px; background: #007AFF; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">ğŸ¨</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">è·å¾—"åˆ›æ„å¤§å¸ˆ"å‹‹ç« </div>
                                    <div style="font-size: 12px; color: #8e8e93;">åˆ›é€ åŠ›è¾¾åˆ°80ç‚¹ â€¢ 5åˆ†é’Ÿå‰</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px; padding: 8px 0;">
                                <div style="width: 32px; height: 32px; background: #ff9500; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">ğŸŒ±</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">å°èŠ½èŠ½å‡çº§åˆ°Lv.4</div>
                                    <div style="font-size: 12px; color: #8e8e93;">ä¼™ä¼´æˆé•¿é‡Œç¨‹ç¢‘ â€¢ 10åˆ†é’Ÿå‰</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            `;
            
            // ç«‹å³åº”ç”¨æ ·å¼
            applyHomePageStyles();
            
            // é‡æ–°åˆå§‹åŒ–é¦–é¡µäº¤äº’é€»è¾‘
            updateHomePageData();
            setupHomePageInteractions();
        }
        
        // æ›´æ–°é¦–é¡µæ•°æ®æ˜¾ç¤º
        function updateHomePageData() {
            // æ›´æ–°ä»Šæ—¥å­¦ä¹ ç»Ÿè®¡
            const userData = JSON.parse(localStorage.getItem('mengya_user_data') || '{}');
            
            // æ›´æ–°ä»Šæ—¥ä»»åŠ¡æ•°
            const todayTasksEl = document.getElementById('todayTasks');
            if (todayTasksEl) {
                todayTasksEl.textContent = userData.dailyStats?.tasksCompleted || 3;
            }
            
            // æ›´æ–°ä»Šæ—¥ç»éªŒ
            const todayExpEl = document.getElementById('todayExp');
            if (todayExpEl) {
                todayExpEl.textContent = userData.dailyStats?.experienceGained || 45;
            }
            
            // æ›´æ–°å­¦ä¹ æ—¶é—´
            const todayTimeEl = document.getElementById('todayTime');
            if (todayTimeEl) {
                todayTimeEl.textContent = userData.dailyStats?.studyMinutes || 25;
            }
            
            // é‡æ–°è®¾ç½®é¦–é¡µTabä¸ºæ´»è·ƒçŠ¶æ€
            document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
            const homeTab = document.querySelector('.tab-item[onclick*="switchToHomeInterface"]');
            if (homeTab) {
                homeTab.classList.add('active');
            }
        }
        
        // è®¾ç½®é¦–é¡µäº¤äº’
        function setupHomePageInteractions() {
            // é‡æ–°ç»‘å®šæ‰€æœ‰ç‚¹å‡»äº‹ä»¶å·²åœ¨HTMLä¸­å®šä¹‰ï¼Œæ— éœ€é¢å¤–ç»‘å®š
            console.log('é¦–é¡µäº¤äº’å·²é‡æ–°åˆå§‹åŒ–');
        }
        
        // é‡ç½®åº•éƒ¨å¯¼èˆªçŠ¶æ€
        function resetTabNavigation() {
            // é‡ç½®æ‰€æœ‰tabçŠ¶æ€
            const tabs = document.querySelectorAll('.tab-item');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ¿€æ´»é¦–é¡µtab
            const homeTab = document.querySelector('.tab-item[onclick*="switchToHomeInterface"]');
            if (homeTab) {
                homeTab.classList.add('active');
            }
        }
        
        // è®­ç»ƒåŠŸèƒ½ - æ·»åŠ å…·ä½“è®­ç»ƒå†…å®¹
        function startTraining(ability) {
            const trainingContent = {
                expression: {
                    name: 'è¡¨è¾¾åŠ›',
                    tasks: [
                        'ğŸ–¼ï¸ çœ‹å›¾è¯´è¯ï¼šæè¿°è¿™å¹…ç”»ä¸­å°çŒ«åœ¨åšä»€ä¹ˆ',
                        'ğŸ“– æ•…äº‹å¤è¿°ï¼šç”¨ä½ çš„è¯é‡æ–°è®²è¿°ã€Šå°çº¢å¸½ã€‹',
                        'ğŸ­ æƒ…æ„Ÿè¡¨è¾¾ï¼šè¡¨æ¼”å¼€å¿ƒã€éš¾è¿‡ã€æƒŠè®¶çš„è¡¨æƒ…',
                        'ğŸ¤ æ¼”è®²ç»ƒä¹ ï¼šä»‹ç»ä½ æœ€å–œæ¬¢çš„ä¸€æœ¬ä¹¦'
                    ]
                },
                logic: {
                    name: 'é€»è¾‘åŠ›',
                    tasks: [
                        'ğŸ§© é€»è¾‘æ¨ç†ï¼šå¦‚æœæ‰€æœ‰ç«ç‘°éƒ½æ˜¯èŠ±ï¼Œæ‰€æœ‰èŠ±éƒ½éœ€è¦æ°´...',
                        'ğŸ”¢ æ•°å­¦æ€ç»´ï¼šæ‰¾å‡ºæ•°åˆ—1,3,6,10,?çš„è§„å¾‹',
                        'ğŸ” é—®é¢˜åˆ†æï¼šä¸ºä»€ä¹ˆå†¬å¤©ä¼šä¸‹é›ªï¼Ÿ',
                        'âš–ï¸ å› æœå…³ç³»ï¼šåˆ†ææ¤ç‰©ç”Ÿé•¿éœ€è¦å“ªäº›æ¡ä»¶'
                    ]
                },
                creativity: {
                    name: 'åˆ›é€ åŠ›',
                    tasks: [
                        'ğŸ¨ åˆ›æ„ç»˜ç”»ï¼šç”»ä¸€ä¸ªä½ æƒ³è±¡ä¸­çš„å¤–æ˜Ÿæœ‹å‹',
                        'ğŸ“ æ•…äº‹åˆ›ä½œï¼šç¼–å†™ä¸€ä¸ªå…³äºå‹‡æ•¢å°è€é¼ çš„æ•…äº‹',
                        'ğŸ”§ å‘æ˜è®¾è®¡ï¼šè®¾è®¡ä¸€ä¸ªèƒ½å¸®åŠ©å¦ˆå¦ˆçš„ç¥å¥‡å·¥å…·',
                        'ğŸ’­ æƒ³è±¡è¡¨è¾¾ï¼šå¦‚æœä½ æœ‰è¶…èƒ½åŠ›ï¼Œä½ æƒ³è¦ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ'
                    ]
                },
                exploration: {
                    name: 'æ¢ç©¶åŠ›',
                    tasks: [
                        'ğŸ”¬ ç§‘å­¦è§‚å¯Ÿï¼šè§‚å¯Ÿä¸€æ¯æ°´æ”¾åœ¨é˜³å…‰ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆ',
                        'ğŸ§ª å®éªŒæ¢ç©¶ï¼šæ··åˆä¸åŒé¢œè‰²çš„æ°´å½©ä¼šå˜æˆä»€ä¹ˆé¢œè‰²',
                        'â“ é—®é¢˜æå‡ºï¼šä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ï¼Ÿ',
                        'ğŸ” å‡è®¾éªŒè¯ï¼šçŒœæµ‹å¹¶éªŒè¯å“ªäº›ç‰©å“ä¼šæµ®åœ¨æ°´é¢ä¸Š'
                    ]
                }
            };
            
            const content = trainingContent[ability];
            if (!content) return;
            
            showNotification(`ğŸ¯ å¼€å§‹${content.name}è®­ç»ƒ...`);
            
            // æ˜¾ç¤ºå…·ä½“è®­ç»ƒä»»åŠ¡
            setTimeout(() => {
                showDetailedTraining(ability, content);
            }, 1000);
        }
        
        // æ˜¾ç¤ºè¯¦ç»†è®­ç»ƒå†…å®¹
        function showDetailedTraining(ability, content) {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToTrainingInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›è®­ç»ƒä¸­å¿ƒ
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">${content.name}è®­ç»ƒ</h2>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 16px;">${ability === 'expression' ? 'ğŸ’¬' : ability === 'logic' ? 'ğŸ§ ' : ability === 'creativity' ? 'ğŸ¨' : 'ğŸ”'}</div>
                        <h3 style="margin-bottom: 8px;">${content.name}ä¸“é¡¹è®­ç»ƒ</h3>
                        <p style="opacity: 0.9; font-size: 14px;">é€šè¿‡å¤šç§ç»ƒä¹ æå‡ä½ çš„${content.name}æ°´å¹³</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 16px;">
                        ${content.tasks.map((task, index) => `
                            <div class="function-card" onclick="startSpecificTask('${ability}', ${index}, '${task}')" style="cursor: pointer;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="flex: 1;">
                                        <div style="font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">ä»»åŠ¡ ${index + 1}</div>
                                        <div style="font-size: 14px; color: #666; line-height: 1.4;">${task}</div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="background: #e8f5e8; color: #388e3c; padding: 4px 8px; border-radius: 6px; font-size: 11px;">5åˆ†é’Ÿ</div>
                                        <button class="action-button" onclick="event.stopPropagation(); startSpecificTask('${ability}', ${index}, '${task}')">å¼€å§‹</button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-top: 20px; text-align: center;">
                        <div style="font-size: 32px; margin-bottom: 12px;">ğŸ¯</div>
                        <h3 style="color: #1d1d1f; margin-bottom: 8px;">è®­ç»ƒè¯´æ˜</h3>
                        <p style="color: #666; font-size: 14px; line-height: 1.5;">
                            æ¯ä¸ªä»»åŠ¡å®Œæˆåä¼šè·å¾—ç»éªŒå€¼ï¼ŒAIä¼šæ ¹æ®ä½ çš„è¡¨ç°ç»™å‡ºä¸“ä¸šåé¦ˆå’Œå»ºè®®ã€‚
                            å®Œæˆæ‰€æœ‰ä»»åŠ¡å¯ä»¥è§£é”æ–°çš„æˆå°±å’Œå¥–åŠ±ï¼
                        </p>
                    </div>
                </div>
            `;
        }
        
        // å¼€å§‹å…·ä½“è®­ç»ƒä»»åŠ¡
        function startSpecificTask(ability, taskIndex, taskDescription) {
            showNotification(`ğŸ¯ æ­£åœ¨åŠ è½½è®­ç»ƒå†…å®¹...`);
            
            setTimeout(() => {
                showTaskContent(ability, taskIndex, taskDescription);
            }, 1000);
        }
        
        // æ˜¾ç¤ºä»»åŠ¡å…·ä½“å†…å®¹
        function showTaskContent(ability, taskIndex, taskDescription) {
            const taskContents = {
                expression: [
                    {
                        title: 'çœ‹å›¾è¯´è¯è®­ç»ƒ',
                        instruction: 'ä»”ç»†è§‚å¯Ÿä¸‹é¢çš„å›¾ç‰‡ï¼Œç”¨è‡ªå·±çš„è¯æè¿°ä½ çœ‹åˆ°çš„å†…å®¹',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0; text-align: center;">
                                <div style="font-size: 80px; margin-bottom: 16px;">ğŸ±</div>
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <p style="color: #666; font-size: 14px; line-height: 1.5;">
                                        å›¾ç‰‡æè¿°ï¼šä¸€åªæ©™è‰²çš„å°çŒ«æ­£åœ¨èŠ±å›­é‡Œç©è€ï¼Œæ—è¾¹æœ‰ç¾ä¸½çš„èŠ±æœµå’Œè´è¶é£èˆã€‚
                                    </p>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·æè¿°ä½ çœ‹åˆ°çš„å†…å®¹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘çœ‹åˆ°äº†..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('expression', 0)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤ç­”æ¡ˆ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå¯ä»¥æè¿°å°çŒ«çš„é¢œè‰²ã€åŠ¨ä½œã€å‘¨å›´çš„ç¯å¢ƒç­‰'
                    },
                    {
                        title: 'æ•…äº‹å¤è¿°è®­ç»ƒ',
                        instruction: 'å¬å®Œã€Šå°çº¢å¸½ã€‹æ•…äº‹åï¼Œç”¨ä½ è‡ªå·±çš„è¯é‡æ–°è®²è¿°',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <h4 style="color: #1d1d1f; margin-bottom: 12px;">ğŸ“– ã€Šå°çº¢å¸½ã€‹æ•…äº‹åŸæ–‡ï¼š</h4>
                                    <p style="color: #666; font-size: 14px; line-height: 1.6;">
                                        ä»å‰æœ‰ä¸€ä¸ªå¯çˆ±çš„å°å¥³å­©ï¼Œå¤§å®¶éƒ½å«å¥¹å°çº¢å¸½ï¼Œå› ä¸ºå¥¹æ€»æ˜¯æˆ´ç€å¥¶å¥¶ç»™å¥¹çš„çº¢è‰²å¸½å­ã€‚
                                        æœ‰ä¸€å¤©ï¼Œå¦ˆå¦ˆè®©å°çº¢å¸½å»çœ‹æœ›ç”Ÿç—…çš„å¥¶å¥¶ï¼Œå¹¶ç»™å¥¶å¥¶é€å»ä¸€äº›é£Ÿç‰©...
                                    </p>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·ç”¨ä½ çš„è¯é‡æ–°è®²è¿°è¿™ä¸ªæ•…äº‹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="ä»å‰æœ‰ä¸€ä¸ª..." style="width: 100%; height: 100px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('expression', 1)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤å¤è¿°</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šç”¨ä½ è‡ªå·±çš„è¯ï¼Œä¿æŒæ•…äº‹çš„ä¸»è¦æƒ…èŠ‚'
                    },
                    {
                        title: 'æƒ…æ„Ÿè¡¨è¾¾è®­ç»ƒ',
                        instruction: 'é€šè¿‡è¡¨æƒ…å’ŒåŠ¨ä½œè¡¨è¾¾ä¸åŒçš„æƒ…æ„Ÿ',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0; text-align: center;">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px;">
                                    <div onclick="selectEmotion('happy')" style="background: white; border-radius: 8px; padding: 16px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s;" onmouseover="this.style.borderColor='#007AFF'" onmouseout="this.style.borderColor='transparent'">
                                        <div style="font-size: 32px; margin-bottom: 8px;">ğŸ˜Š</div>
                                        <div style="font-size: 14px; font-weight: 600;">å¼€å¿ƒ</div>
                                    </div>
                                    <div onclick="selectEmotion('sad')" style="background: white; border-radius: 8px; padding: 16px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s;" onmouseover="this.style.borderColor='#007AFF'" onmouseout="this.style.borderColor='transparent'">
                                        <div style="font-size: 32px; margin-bottom: 8px;">ğŸ˜¢</div>
                                        <div style="font-size: 14px; font-weight: 600;">éš¾è¿‡</div>
                                    </div>
                                    <div onclick="selectEmotion('surprised')" style="background: white; border-radius: 8px; padding: 16px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s;" onmouseover="this.style.borderColor='#007AFF'" onmouseout="this.style.borderColor='transparent'">
                                        <div style="font-size: 32px; margin-bottom: 8px;">ğŸ˜²</div>
                                        <div style="font-size: 14px; font-weight: 600;">æƒŠè®¶</div>
                                    </div>
                                </div>
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <p style="color: #666; font-size: 14px;">è¯·é€‰æ‹©ä¸€ç§æƒ…æ„Ÿï¼Œç„¶ååšå‡ºç›¸åº”çš„è¡¨æƒ…å’ŒåŠ¨ä½œ</p>
                                </div>
                                <button onclick="submitTaskAnswer('expression', 2)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">å®Œæˆè¡¨æ¼”</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå¯ä»¥é…åˆæ‰‹åŠ¿å’Œå£°éŸ³æ¥è¡¨è¾¾æƒ…æ„Ÿ'
                    },
                    {
                        title: 'æ¼”è®²ç»ƒä¹ è®­ç»ƒ',
                        instruction: 'ä»‹ç»ä½ æœ€å–œæ¬¢çš„ä¸€æœ¬ä¹¦',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ¤</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">æ¼”è®²ä¸»é¢˜ï¼šæˆ‘æœ€å–œæ¬¢çš„ä¹¦</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">ä¹¦åï¼š</label>
                                    <input type="text" id="bookName" placeholder="ä¾‹å¦‚ï¼šã€Šè¥¿æ¸¸è®°ã€‹" style="width: 100%; padding: 10px 12px; border: 1px solid #e5e5ea; border-radius: 6px; margin-bottom: 12px;">
                                    
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">ä¸ºä»€ä¹ˆå–œæ¬¢è¿™æœ¬ä¹¦ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="è¿™æœ¬ä¹¦å¾ˆæœ‰è¶£ï¼Œå› ä¸º..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('expression', 3)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">å¼€å§‹æ¼”è®²</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå¯ä»¥è¯´è¯´ä¹¦çš„å†…å®¹ã€å–œæ¬¢çš„è§’è‰²ã€å­¦åˆ°çš„é“ç†'
                    }
                ],
                logic: [
                    {
                        title: 'é€»è¾‘æ¨ç†è®­ç»ƒ',
                        instruction: 'æ ¹æ®ç»™å‡ºçš„æ¡ä»¶è¿›è¡Œé€»è¾‘æ¨ç†',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <h4 style="color: #1d1d1f; margin-bottom: 12px;">ğŸ§© é€»è¾‘æ¨ç†é¢˜ï¼š</h4>
                                    <p style="color: #666; font-size: 14px; line-height: 1.6; margin-bottom: 16px;">
                                        å·²çŸ¥æ¡ä»¶ï¼š<br>
                                        1. æ‰€æœ‰çš„ç«ç‘°éƒ½æ˜¯èŠ±<br>
                                        2. æ‰€æœ‰çš„èŠ±éƒ½éœ€è¦æ°´<br>
                                        3. çº¢ç«ç‘°æ˜¯ç«ç‘°<br><br>
                                        é—®é¢˜ï¼šçº¢ç«ç‘°éœ€è¦æ°´å—ï¼Ÿ
                                    </p>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                        <button onclick="selectLogicAnswer('yes')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">âœ… éœ€è¦æ°´</button>
                                        <button onclick="selectLogicAnswer('no')" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">âŒ ä¸éœ€è¦æ°´</button>
                                    </div>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·è§£é‡Šä½ çš„æ¨ç†è¿‡ç¨‹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘çš„æ¨ç†æ˜¯..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('logic', 0)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤ç­”æ¡ˆ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šæŒ‰ç…§é€»è¾‘å…³ç³»ä¸€æ­¥æ­¥æ¨ç†'
                    },
                    {
                        title: 'æ•°å­¦æ€ç»´è®­ç»ƒ',
                        instruction: 'æ‰¾å‡ºæ•°åˆ—çš„è§„å¾‹',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <h4 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ”¢ æ‰¾è§„å¾‹ï¼š</h4>
                                    <div style="font-size: 24px; font-weight: 700; color: #007AFF; margin-bottom: 16px;">
                                        1, 3, 6, 10, ?
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 16px;">
                                        <button onclick="selectMathAnswer(15)" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 10px; border-radius: 6px; cursor: pointer;">15</button>
                                        <button onclick="selectMathAnswer(14)" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 10px; border-radius: 6px; cursor: pointer;">14</button>
                                        <button onclick="selectMathAnswer(16)" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 10px; border-radius: 6px; cursor: pointer;">16</button>
                                        <button onclick="selectMathAnswer(13)" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 10px; border-radius: 6px; cursor: pointer;">13</button>
                                    </div>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·è¯´æ˜ä½ å‘ç°çš„è§„å¾‹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘å‘ç°çš„è§„å¾‹æ˜¯..." style="width: 100%; height: 60px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('logic', 1)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤ç­”æ¡ˆ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šè§‚å¯Ÿç›¸é‚»æ•°å­—ä¹‹é—´çš„å…³ç³»'
                    },
                    {
                        title: 'é—®é¢˜åˆ†æè®­ç»ƒ',
                        instruction: 'åˆ†æä¸ºä»€ä¹ˆå†¬å¤©ä¼šä¸‹é›ª',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">â„ï¸</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">é—®é¢˜ï¼šä¸ºä»€ä¹ˆå†¬å¤©ä¼šä¸‹é›ªï¼Ÿ</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·åˆ†æåŸå› ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘è®¤ä¸ºå†¬å¤©ä¸‹é›ªæ˜¯å› ä¸º..." style="width: 100%; height: 100px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <div style="background: #e3f2fd; border-radius: 8px; padding: 12px; margin-bottom: 16px;">
                                    <div style="font-size: 12px; color: #1976d2; font-weight: 600; margin-bottom: 4px;">ğŸ’¡ æ€è€ƒæç¤ºï¼š</div>
                                    <div style="font-size: 12px; color: #666;">å¯ä»¥ä»æ¸©åº¦ã€æ°´è’¸æ°”ã€äº‘æœµç­‰è§’åº¦æ€è€ƒ</div>
                                </div>
                                
                                <button onclick="submitTaskAnswer('logic', 2)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤åˆ†æ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå¯ä»¥ä»ç§‘å­¦è§’åº¦åˆ†æè‡ªç„¶ç°è±¡'
                    },
                    {
                        title: 'å› æœå…³ç³»è®­ç»ƒ',
                        instruction: 'åˆ†ææ¤ç‰©ç”Ÿé•¿éœ€è¦çš„æ¡ä»¶',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸŒ±</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">æ¤ç‰©ç”Ÿé•¿éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Ÿ</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·é€‰æ‹©æ¤ç‰©ç”Ÿé•¿éœ€è¦çš„æ¡ä»¶ï¼š</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                        <label style="display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border-radius: 6px; cursor: pointer;">
                                            <input type="checkbox" id="sunlight"> é˜³å…‰ â˜€ï¸
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border-radius: 6px; cursor: pointer;">
                                            <input type="checkbox" id="water"> æ°´åˆ† ğŸ’§
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border-radius: 6px; cursor: pointer;">
                                            <input type="checkbox" id="soil"> åœŸå£¤ ğŸŒ
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border-radius: 6px; cursor: pointer;">
                                            <input type="checkbox" id="air"> ç©ºæ°” ğŸŒ¬ï¸
                                        </label>
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯·è§£é‡Šè¿™äº›æ¡ä»¶çš„ä½œç”¨ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="é˜³å…‰çš„ä½œç”¨æ˜¯...æ°´åˆ†çš„ä½œç”¨æ˜¯..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('logic', 3)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤ç­”æ¡ˆ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šæ€è€ƒæ¯ä¸ªæ¡ä»¶å¯¹æ¤ç‰©çš„é‡è¦æ€§'
                    }
                ],
                creativity: [
                    {
                        title: 'åˆ›æ„ç»˜ç”»è®­ç»ƒ',
                        instruction: 'ç”»ä¸€ä¸ªä½ æƒ³è±¡ä¸­çš„å¤–æ˜Ÿæœ‹å‹',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0; text-align: center;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ¨</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">åˆ›æ„ç»˜ç”»ï¼šå¤–æ˜Ÿæœ‹å‹</h4>
                                </div>
                                
                                <div style="background: white; border: 2px dashed #ddd; border-radius: 8px; height: 200px; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; color: #666;">
                                    <div style="text-align: center;">
                                        <div style="font-size: 32px; margin-bottom: 8px;">ğŸ–Œï¸</div>
                                        <div>åœ¨è¿™é‡Œç”»å‡ºä½ çš„å¤–æ˜Ÿæœ‹å‹</div>
                                        <div style="font-size: 12px; margin-top: 4px;">ï¼ˆå®é™…åº”ç”¨ä¸­å¯é›†æˆç»˜ç”»å·¥å…·ï¼‰</div>
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">æè¿°ä½ çš„å¤–æ˜Ÿæœ‹å‹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘çš„å¤–æ˜Ÿæœ‹å‹é•¿å¾—åƒ...å®ƒæœ‰ä»€ä¹ˆç‰¹æ®Šèƒ½åŠ›..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                <button onclick="submitTaskAnswer('creativity', 0)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">å®Œæˆåˆ›ä½œ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå‘æŒ¥æƒ³è±¡åŠ›ï¼Œå¤–æ˜Ÿæœ‹å‹å¯ä»¥æœ‰ä»»ä½•ç‰¹å¾'
                    },
                    {
                        title: 'æ•…äº‹åˆ›ä½œè®­ç»ƒ',
                        instruction: 'ç¼–å†™ä¸€ä¸ªå…³äºå‹‡æ•¢å°è€é¼ çš„æ•…äº‹',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ­</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">æ•…äº‹åˆ›ä½œï¼šå‹‡æ•¢çš„å°è€é¼ </h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">æ•…äº‹æ ‡é¢˜ï¼š</label>
                                    <input type="text" id="storyTitleCreative" placeholder="ä¾‹å¦‚ï¼šã€Šå°è€é¼ çš„å¤§å†’é™©ã€‹" style="width: 100%; padding: 10px 12px; border: 1px solid #e5e5ea; border-radius: 6px; margin-bottom: 12px;">
                                    
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">æ•…äº‹å†…å®¹ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="ä»å‰æœ‰ä¸€åªå‹‡æ•¢çš„å°è€é¼ ..." style="width: 100%; height: 120px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none; line-height: 1.5;"></textarea>
                                </div>
                                
                                <div style="background: #e8f5e8; border-radius: 8px; padding: 12px; margin-bottom: 16px;">
                                    <div style="font-size: 12px; color: #388e3c; font-weight: 600; margin-bottom: 4px;">ğŸ’¡ åˆ›ä½œæç¤ºï¼š</div>
                                    <div style="font-size: 12px; color: #666;">æ•…äº‹è¦æœ‰å¼€å¤´ã€ç»è¿‡ã€ç»“å°¾ï¼Œå¯ä»¥åŠ å…¥å†’é™©ã€å‹æƒ…ã€æˆé•¿ç­‰å…ƒç´ </div>
                                </div>
                                
                                <button onclick="submitTaskAnswer('creativity', 1)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">å®Œæˆåˆ›ä½œ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šè®©æ•…äº‹æœ‰è¶£ç”ŸåŠ¨ï¼ŒåŠ å…¥ä½ çš„æƒ³è±¡åŠ›'
                    },
                    {
                        title: 'å‘æ˜è®¾è®¡è®­ç»ƒ',
                        instruction: 'è®¾è®¡ä¸€ä¸ªèƒ½å¸®åŠ©å¦ˆå¦ˆçš„ç¥å¥‡å·¥å…·',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ”§</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">å‘æ˜è®¾è®¡ï¼šå¸®åŠ©å¦ˆå¦ˆçš„å·¥å…·</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">å‘æ˜åç§°ï¼š</label>
                                    <input type="text" id="inventionName" placeholder="ä¾‹å¦‚ï¼šè¶…çº§æ¸…æ´æœºå™¨äºº" style="width: 100%; padding: 10px 12px; border: 1px solid #e5e5ea; border-radius: 6px; margin-bottom: 12px;">
                                    
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">å·¥å…·åŠŸèƒ½ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©å¦ˆå¦ˆ..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <div style="background: white; border: 2px dashed #ddd; border-radius: 8px; height: 120px; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; color: #666;">
                                    <div style="text-align: center;">
                                        <div style="font-size: 24px; margin-bottom: 8px;">âœï¸</div>
                                        <div>ç”»å‡ºä½ çš„å‘æ˜è®¾è®¡å›¾</div>
                                    </div>
                                </div>
                                
                                <button onclick="submitTaskAnswer('creativity', 2)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">å®Œæˆè®¾è®¡</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šæƒ³æƒ³å¦ˆå¦ˆå¹³æ—¶åšä»€ä¹ˆäº‹æƒ…æ¯”è¾ƒè¾›è‹¦'
                    },
                    {
                        title: 'æƒ³è±¡è¡¨è¾¾è®­ç»ƒ',
                        instruction: 'å¦‚æœä½ æœ‰è¶…èƒ½åŠ›ï¼Œä½ æƒ³è¦ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ¦¸</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">æƒ³è±¡è¡¨è¾¾ï¼šæˆ‘çš„è¶…èƒ½åŠ›</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">é€‰æ‹©ä½ æƒ³è¦çš„è¶…èƒ½åŠ›ï¼š</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 12px;">
                                        <button onclick="selectSuperpower('fly')" style="background: white; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">ğŸ¦… é£è¡Œ</button>
                                        <button onclick="selectSuperpower('invisible')" style="background: white; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">ğŸ‘» éšèº«</button>
                                        <button onclick="selectSuperpower('time')" style="background: white; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">â° æ—¶é—´æ§åˆ¶</button>
                                        <button onclick="selectSuperpower('mind')" style="background: white; border: 1px solid #e5e5ea; padding: 12px; border-radius: 8px; cursor: pointer;">ğŸ§  è¯»å¿ƒæœ¯</button>
                                    </div>
                                    
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¯´è¯´ä½ ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªè¶…èƒ½åŠ›ï¼Œä½ ä¼šç”¨å®ƒåšä»€ä¹ˆï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘é€‰æ‹©è¿™ä¸ªè¶…èƒ½åŠ›æ˜¯å› ä¸º...æˆ‘ä¼šç”¨å®ƒæ¥..." style="width: 100%; height: 100px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <button onclick="submitTaskAnswer('creativity', 3)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">åˆ†äº«æƒ³æ³•</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå‘æŒ¥æƒ³è±¡åŠ›ï¼Œæƒ³æƒ³è¶…èƒ½åŠ›èƒ½å¸®åŠ©è°'
                    }
                ],
                exploration: [
                    {
                        title: 'ç§‘å­¦è§‚å¯Ÿè®­ç»ƒ',
                        instruction: 'è§‚å¯Ÿä¸€æ¯æ°´æ”¾åœ¨é˜³å…‰ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆ',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ”¬</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">ç§‘å­¦è§‚å¯Ÿå®éªŒ</h4>
                                </div>
                                
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">ğŸ§ª å®éªŒæ­¥éª¤ï¼š</div>
                                    <div style="color: #666; font-size: 13px; line-height: 1.5;">
                                        1. å‡†å¤‡ä¸€æ¯é€æ˜çš„æ°´<br>
                                        2. å°†æ°´æ¯æ”¾åœ¨é˜³å…‰ç›´å°„çš„åœ°æ–¹<br>
                                        3. è§‚å¯Ÿ30åˆ†é’Ÿï¼Œè®°å½•å˜åŒ–<br>
                                        4. æ€è€ƒä¸ºä»€ä¹ˆä¼šæœ‰è¿™äº›å˜åŒ–
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">ä½ è§‚å¯Ÿåˆ°äº†ä»€ä¹ˆå˜åŒ–ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘è§‚å¯Ÿåˆ°..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <button onclick="submitTaskAnswer('exploration', 0)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤è§‚å¯Ÿ</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šä»”ç»†è§‚å¯Ÿæ°´ä½ã€æ¸©åº¦ã€è’¸æ±½ç­‰å˜åŒ–'
                    },
                    {
                        title: 'å®éªŒæ¢ç©¶è®­ç»ƒ',
                        instruction: 'æ··åˆä¸åŒé¢œè‰²çš„æ°´å½©ä¼šå˜æˆä»€ä¹ˆé¢œè‰²',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ¨</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">é¢œè‰²æ··åˆå®éªŒ</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">é€‰æ‹©è¦æ··åˆçš„é¢œè‰²ï¼š</div>
                                    <div style="display: flex; gap: 12px; justify-content: center; margin-bottom: 12px;">
                                        <button onclick="selectColor('red')" style="background: #ff4444; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">ğŸ”´ çº¢è‰²</button>
                                        <button onclick="selectColor('blue')" style="background: #4444ff; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">ğŸ”µ è“è‰²</button>
                                        <button onclick="selectColor('yellow')" style="background: #ffdd44; color: black; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">ğŸŸ¡ é»„è‰²</button>
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">é¢„æµ‹æ··åˆç»“æœå¹¶è¯´æ˜åŸå› ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘è§‰å¾—çº¢è‰²+è“è‰²ä¼šå˜æˆ...å› ä¸º..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <button onclick="submitTaskAnswer('exploration', 1)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤é¢„æµ‹</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šæƒ³æƒ³ä¸‰åŸè‰²çš„æ··åˆè§„å¾‹'
                    },
                    {
                        title: 'é—®é¢˜æå‡ºè®­ç»ƒ',
                        instruction: 'ä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ï¼Ÿ',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸŒŒ</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">ç§‘å­¦æ¢ç©¶ï¼šå¤©ç©ºçš„é¢œè‰²</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">ä½ è®¤ä¸ºå¤©ç©ºä¸ºä»€ä¹ˆæ˜¯è“è‰²çš„ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘è§‰å¾—å¤©ç©ºæ˜¯è“è‰²çš„ï¼Œå¯èƒ½æ˜¯å› ä¸º..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">è¿˜æœ‰ä»€ä¹ˆç›¸å…³é—®é¢˜æƒ³æ¢ç©¶ï¼š</div>
                                    <div style="display: flex; flex-direction: column; gap: 8px;">
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox"> ä¸ºä»€ä¹ˆäº‘æœµæ˜¯ç™½è‰²çš„ï¼Ÿ
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox"> ä¸ºä»€ä¹ˆå¤•é˜³æ˜¯çº¢è‰²çš„ï¼Ÿ
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox"> ä¸ºä»€ä¹ˆå½©è™¹æœ‰ä¸ƒç§é¢œè‰²ï¼Ÿ
                                        </label>
                                    </div>
                                </div>
                                
                                <button onclick="submitTaskAnswer('exploration', 2)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤æ¢ç©¶</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šå¯ä»¥ä»å…‰çº¿ã€å¤§æ°”ç­‰è§’åº¦æ€è€ƒ'
                    },
                    {
                        title: 'å‡è®¾éªŒè¯è®­ç»ƒ',
                        instruction: 'çŒœæµ‹å¹¶éªŒè¯å“ªäº›ç‰©å“ä¼šæµ®åœ¨æ°´é¢ä¸Š',
                        content: `
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 16px 0;">
                                <div style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 12px;">ğŸ›Ÿ</div>
                                    <h4 style="color: #1d1d1f; margin-bottom: 8px;">æµ®æ²‰å®éªŒ</h4>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">é¢„æµ‹è¿™äº›ç‰©å“åœ¨æ°´ä¸­çš„çŠ¶æ€ï¼š</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                        <div style="background: white; border-radius: 6px; padding: 12px; border: 1px solid #e5e5ea;">
                                            <div style="margin-bottom: 8px;">ğŸª¨ çŸ³å¤´</div>
                                            <select style="width: 100%; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                                                <option>é€‰æ‹©çŠ¶æ€</option>
                                                <option>æµ®èµ·æ¥</option>
                                                <option>æ²‰ä¸‹å»</option>
                                            </select>
                                        </div>
                                        <div style="background: white; border-radius: 6px; padding: 12px; border: 1px solid #e5e5ea;">
                                            <div style="margin-bottom: 8px;">ğŸªµ æœ¨å—</div>
                                            <select style="width: 100%; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                                                <option>é€‰æ‹©çŠ¶æ€</option>
                                                <option>æµ®èµ·æ¥</option>
                                                <option>æ²‰ä¸‹å»</option>
                                            </select>
                                        </div>
                                        <div style="background: white; border-radius: 6px; padding: 12px; border: 1px solid #e5e5ea;">
                                            <div style="margin-bottom: 8px;">ğŸª™ ç¡¬å¸</div>
                                            <select style="width: 100%; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                                                <option>é€‰æ‹©çŠ¶æ€</option>
                                                <option>æµ®èµ·æ¥</option>
                                                <option>æ²‰ä¸‹å»</option>
                                            </select>
                                        </div>
                                        <div style="background: white; border-radius: 6px; padding: 12px; border: 1px solid #e5e5ea;">
                                            <div style="margin-bottom: 8px;">ğŸˆ æ°”çƒ</div>
                                            <select style="width: 100%; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                                                <option>é€‰æ‹©çŠ¶æ€</option>
                                                <option>æµ®èµ·æ¥</option>
                                                <option>æ²‰ä¸‹å»</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">è§£é‡Šä½ çš„é¢„æµ‹ç†ç”±ï¼š</label>
                                    <textarea id="taskAnswer" placeholder="æˆ‘è§‰å¾—...ä¼šæµ®èµ·æ¥ï¼Œå› ä¸º..." style="width: 100%; height: 80px; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; resize: none; outline: none;"></textarea>
                                </div>
                                
                                <button onclick="submitTaskAnswer('exploration', 3)" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">æäº¤å‡è®¾</button>
                            </div>
                        `,
                        tips: 'æç¤ºï¼šæ€è€ƒç‰©å“çš„é‡é‡å’Œä½“ç§¯å…³ç³»'
                    }
                ]
            };
            
            const content = taskContents[ability][taskIndex];
            if (!content) {
                showNotification('âš ï¸ ä»»åŠ¡å†…å®¹åŠ è½½å¤±è´¥');
                return;
            }
            
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="showDetailedTraining('${ability}', {name: '${ability === 'expression' ? 'è¡¨è¾¾åŠ›' : ability === 'logic' ? 'é€»è¾‘åŠ›' : ability === 'creativity' ? 'åˆ›é€ åŠ›' : 'æ¢ç©¶åŠ›'}', tasks: []})" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›ä»»åŠ¡åˆ—è¡¨
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">${content.title}</h2>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; text-align: center;">
                        <h3 style="margin-bottom: 8px;">ä»»åŠ¡ç›®æ ‡</h3>
                        <p style="opacity: 0.9; font-size: 14px;">${content.instruction}</p>
                    </div>
                    
                    ${content.content}
                    
                    <div style="background: #fff3cd; border-radius: 8px; padding: 12px; margin-top: 16px;">
                        <div style="font-size: 12px; color: #856404; font-weight: 600; margin-bottom: 4px;">ğŸ’¡ ${content.tips}</div>
                    </div>
                </div>
            `;
        }
        
        // ä»»åŠ¡äº¤äº’å‡½æ•°
        function selectEmotion(emotion) {
            document.querySelectorAll('[onclick*="selectEmotion"]').forEach(btn => {
                btn.style.borderColor = 'transparent';
            });
            event.currentTarget.style.borderColor = '#007AFF';
            showNotification(`é€‰æ‹©äº†æƒ…æ„Ÿï¼š${emotion === 'happy' ? 'å¼€å¿ƒ' : emotion === 'sad' ? 'éš¾è¿‡' : 'æƒŠè®¶'}`);
        }
        
        function selectLogicAnswer(answer) {
            document.querySelectorAll('[onclick*="selectLogicAnswer"]').forEach(btn => {
                btn.style.background = '#f2f2f7';
            });
            event.currentTarget.style.background = '#007AFF';
            event.currentTarget.style.color = 'white';
            showNotification(`é€‰æ‹©ç­”æ¡ˆï¼š${answer === 'yes' ? 'éœ€è¦æ°´' : 'ä¸éœ€è¦æ°´'}`);
        }
        
        function selectMathAnswer(number) {
            document.querySelectorAll('[onclick*="selectMathAnswer"]').forEach(btn => {
                btn.style.background = '#f2f2f7';
                btn.style.color = '#1d1d1f';
            });
            event.currentTarget.style.background = '#007AFF';
            event.currentTarget.style.color = 'white';
            showNotification(`é€‰æ‹©ç­”æ¡ˆï¼š${number}`);
        }
        
        function selectSuperpower(power) {
            document.querySelectorAll('[onclick*="selectSuperpower"]').forEach(btn => {
                btn.style.background = 'white';
                btn.style.borderColor = '#e5e5ea';
            });
            event.currentTarget.style.background = '#007AFF';
            event.currentTarget.style.color = 'white';
            event.currentTarget.style.borderColor = '#007AFF';
            
            const powerNames = {
                fly: 'é£è¡Œ',
                invisible: 'éšèº«',
                time: 'æ—¶é—´æ§åˆ¶',
                mind: 'è¯»å¿ƒæœ¯'
            };
            showNotification(`é€‰æ‹©è¶…èƒ½åŠ›ï¼š${powerNames[power]}`);
        }
        
        function selectColor(color) {
            const colorNames = {
                red: 'çº¢è‰²',
                blue: 'è“è‰²', 
                yellow: 'é»„è‰²'
            };
            showNotification(`é€‰æ‹©é¢œè‰²ï¼š${colorNames[color]}`);
        }
        
        // æäº¤ä»»åŠ¡ç­”æ¡ˆ
        function submitTaskAnswer(ability, taskIndex) {
            const answer = document.getElementById('taskAnswer').value.trim();
            
            if (!answer) {
                showNotification('âš ï¸ è¯·å¡«å†™ç­”æ¡ˆå†…å®¹');
                return;
            }
            
            showNotification('ğŸ“ æ­£åœ¨æäº¤ç­”æ¡ˆ...');
            
            setTimeout(() => {
                showNotification('ğŸ¤– AIæ­£åœ¨åˆ†æä½ çš„ç­”æ¡ˆ...');
            }, 1500);
            
            setTimeout(() => {
                // æ˜¾ç¤ºä»»åŠ¡å®Œæˆç»“æœé¡µé¢
                showTaskResult(ability, taskIndex, answer);
            }, 3000);
        }
        
        // æ˜¾ç¤ºä»»åŠ¡å®Œæˆç»“æœ
        function showTaskResult(ability, taskIndex, userAnswer) {
            const abilityNames = {
                expression: 'è¡¨è¾¾åŠ›',
                logic: 'é€»è¾‘åŠ›',
                creativity: 'åˆ›é€ åŠ›',
                exploration: 'æ¢ç©¶åŠ›'
            };
            
            const abilityName = abilityNames[ability];
            const aiFeedback = getAIFeedback(ability, taskIndex);
            const taskTitles = {
                expression: ['çœ‹å›¾è¯´è¯è®­ç»ƒ', 'æ•…äº‹å¤è¿°è®­ç»ƒ', 'æƒ…æ„Ÿè¡¨è¾¾è®­ç»ƒ', 'æ¼”è®²ç»ƒä¹ è®­ç»ƒ'],
                logic: ['é€»è¾‘æ¨ç†è®­ç»ƒ', 'æ•°å­¦æ€ç»´è®­ç»ƒ', 'é—®é¢˜åˆ†æè®­ç»ƒ', 'å› æœå…³ç³»è®­ç»ƒ'],
                creativity: ['åˆ›æ„ç»˜ç”»è®­ç»ƒ', 'æ•…äº‹åˆ›ä½œè®­ç»ƒ', 'å‘æ˜è®¾è®¡è®­ç»ƒ', 'æƒ³è±¡è¡¨è¾¾è®­ç»ƒ'],
                exploration: ['ç§‘å­¦è§‚å¯Ÿè®­ç»ƒ', 'å®éªŒæ¢ç©¶è®­ç»ƒ', 'é—®é¢˜æå‡ºè®­ç»ƒ', 'å‡è®¾éªŒè¯è®­ç»ƒ']
            };
            
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">ğŸ‰</div>
                        <h2 style="font-size: 24px; font-weight: 700; color: #1d1d1f; margin-bottom: 8px;">ä»»åŠ¡å®Œæˆï¼</h2>
                        <p style="color: #8e8e93; font-size: 16px;">${taskTitles[ability][taskIndex]}</p>
                    </div>
                    
                    <!-- AIè¯„ä»·ç»“æœ -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="font-size: 32px;">ğŸ¤–</div>
                            <div>
                                <h3 style="margin-bottom: 4px;">AIåŠ©æ•™è¯„ä»·</h3>
                                <p style="opacity: 0.9; font-size: 14px;">åŸºäºä½ çš„è¡¨ç°è¿›è¡Œä¸“ä¸šåˆ†æ</p>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                            <p style="font-size: 16px; line-height: 1.5; margin-bottom: 12px;">${aiFeedback}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-size: 14px; opacity: 0.9;">ç»¼åˆè¯„åˆ†</div>
                                <div style="background: rgba(255, 255, 255, 0.2); padding: 6px 12px; border-radius: 8px; font-weight: 700;">
                                    ${85 + Math.floor(Math.random() * 15)}åˆ†
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                            <div style="text-align: center;">
                                <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">+3</div>
                                <div style="font-size: 12px; opacity: 0.9;">${abilityName}ç‚¹æ•°</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">+5</div>
                                <div style="font-size: 12px; opacity: 0.9;">ç»éªŒå€¼</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px; color: #34d399;">+25</div>
                                <div style="font-size: 12px; opacity: 0.9;">ğŸŒ±æˆé•¿å€¼</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">+1</div>
                                <div style="font-size: 12px; opacity: 0.9;">å®Œæˆä»»åŠ¡</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä½ çš„ç­”æ¡ˆå›é¡¾ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 12px;">ğŸ“ ä½ çš„ç­”æ¡ˆ</h3>
                        <div style="background: #f8fafc; border-radius: 8px; padding: 16px; border-left: 4px solid #667eea;">
                            <p style="color: #374151; font-size: 14px; line-height: 1.5;">${userAnswer}</p>
                        </div>
                    </div>
                    
                    <!-- å­¦ä¹ å»ºè®® -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 12px;">ğŸ’¡ å­¦ä¹ å»ºè®®</h3>
                        <div style="color: #666; font-size: 14px; line-height: 1.5;">
                            ${getLearningAdvice(ability, taskIndex)}
                        </div>
                    </div>
                    
                    <!-- å°èŠ½èŠ½æˆé•¿æç¤º -->
                    <div style="background: linear-gradient(135deg, #dcfce7, #bbf7d0); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #86efac;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <div style="font-size: 32px;">ğŸŒ³</div>
                            <div>
                                <h3 style="color: #065f46; margin-bottom: 4px;">å°èŠ½èŠ½å¾ˆå¼€å¿ƒï¼</h3>
                                <p style="color: #047857; font-size: 14px;">ä½ çš„åŠªåŠ›å­¦ä¹ è®©æˆ‘åˆæˆé•¿äº†ä¸€äº› âœ¨</p>
                            </div>
                        </div>
                        <div style="background: white; border-radius: 8px; padding: 12px; border-left: 4px solid #34d399;">
                            <p style="color: #374151; font-size: 13px; line-height: 1.4;">
                                ğŸ’ª é€šè¿‡è¿™æ¬¡è®­ç»ƒï¼Œæˆ‘è·å¾—äº† +25 æˆé•¿å€¼ï¼<br>
                                ğŸ”¥ åšæŒæ¯å¤©å­¦ä¹ ï¼Œæˆ‘å°±èƒ½æ›´å¿«è¿›åŒ–åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µå“¦ï¼<br>
                                ğŸ˜´ è®°ä½ï¼Œå¦‚æœè¶…è¿‡2å¤©ä¸å­¦ä¹ ï¼Œæˆ‘çš„æˆé•¿å€¼ä¼šå‡å°‘çš„...
                            </p>
                        </div>
                    </div>
                    
                    <!-- ä¸‹ä¸€æ­¥æ“ä½œ -->
                    <div style="display: flex; gap: 12px;">
                        <button onclick="continueNextTask('${ability}', ${taskIndex})" style="flex: 1; background: #007AFF; color: white; border: none; padding: 16px 24px; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 16px;">
                            ğŸ¯ ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡
                        </button>
                        <button onclick="showDetailedTraining('${ability}', {name: '${abilityName}', tasks: []})" style="flex: 1; background: #8e8e93; color: white; border: none; padding: 16px 24px; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 16px;">
                            ğŸ“‹ è¿”å›ä»»åŠ¡åˆ—è¡¨
                        </button>
                        <button onclick="switchToHomeInterface()" style="background: #34d399; color: white; border: none; padding: 16px 20px; border-radius: 12px; cursor: pointer; font-weight: 600;">
                            ğŸ  å›åˆ°é¦–é¡µ
                        </button>
                    </div>
                </div>
            `;
        }
        
        // ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡
        function continueNextTask(ability, currentTaskIndex) {
            const nextTaskIndex = currentTaskIndex + 1;
            const maxTasks = 4;
            
            if (nextTaskIndex >= maxTasks) {
                // æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œæ˜¾ç¤ºèƒ½åŠ›å®Œæˆé¡µé¢
                showAbilityCompleted(ability);
            } else {
                // ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡
                const taskDescriptions = {
                    expression: [
                        'ğŸ–¼ï¸ çœ‹å›¾è¯´è¯ï¼šæè¿°è¿™å¹…ç”»ä¸­å°çŒ«åœ¨åšä»€ä¹ˆ',
                        'ğŸ“– æ•…äº‹å¤è¿°ï¼šç”¨ä½ çš„è¯é‡æ–°è®²è¿°ã€Šå°çº¢å¸½ã€‹',
                        'ğŸ­ æƒ…æ„Ÿè¡¨è¾¾ï¼šè¡¨æ¼”å¼€å¿ƒã€éš¾è¿‡ã€æƒŠè®¶çš„è¡¨æƒ…',
                        'ğŸ¤ æ¼”è®²ç»ƒä¹ ï¼šä»‹ç»ä½ æœ€å–œæ¬¢çš„ä¸€æœ¬ä¹¦'
                    ],
                    logic: [
                        'ğŸ§© é€»è¾‘æ¨ç†ï¼šå¦‚æœæ‰€æœ‰ç«ç‘°éƒ½æ˜¯èŠ±ï¼Œæ‰€æœ‰èŠ±éƒ½éœ€è¦æ°´...',
                        'ğŸ”¢ æ•°å­¦æ€ç»´ï¼šæ‰¾å‡ºæ•°åˆ—1,3,6,10,?çš„è§„å¾‹',
                        'ğŸ” é—®é¢˜åˆ†æï¼šä¸ºä»€ä¹ˆå†¬å¤©ä¼šä¸‹é›ªï¼Ÿ',
                        'âš–ï¸ å› æœå…³ç³»ï¼šåˆ†ææ¤ç‰©ç”Ÿé•¿éœ€è¦å“ªäº›æ¡ä»¶'
                    ],
                    creativity: [
                        'ğŸ¨ åˆ›æ„ç»˜ç”»ï¼šç”»ä¸€ä¸ªä½ æƒ³è±¡ä¸­çš„å¤–æ˜Ÿæœ‹å‹',
                        'ğŸ“ æ•…äº‹åˆ›ä½œï¼šç¼–å†™ä¸€ä¸ªå…³äºå‹‡æ•¢å°è€é¼ çš„æ•…äº‹',
                        'ğŸ”§ å‘æ˜è®¾è®¡ï¼šè®¾è®¡ä¸€ä¸ªèƒ½å¸®åŠ©å¦ˆå¦ˆçš„ç¥å¥‡å·¥å…·',
                        'ğŸ’­ æƒ³è±¡è¡¨è¾¾ï¼šå¦‚æœä½ æœ‰è¶…èƒ½åŠ›ï¼Œä½ æƒ³è¦ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ'
                    ],
                    exploration: [
                        'ğŸ”¬ ç§‘å­¦è§‚å¯Ÿï¼šè§‚å¯Ÿä¸€æ¯æ°´æ”¾åœ¨é˜³å…‰ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆ',
                        'ğŸ§ª å®éªŒæ¢ç©¶ï¼šæ··åˆä¸åŒé¢œè‰²çš„æ°´å½©ä¼šå˜æˆä»€ä¹ˆé¢œè‰²',
                        'â“ é—®é¢˜æå‡ºï¼šä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ï¼Ÿ',
                        'ğŸ” å‡è®¾éªŒè¯ï¼šçŒœæµ‹å¹¶éªŒè¯å“ªäº›ç‰©å“ä¼šæµ®åœ¨æ°´é¢ä¸Š'
                    ]
                };
                
                const nextTask = taskDescriptions[ability][nextTaskIndex];
                showNotification(`ğŸ¯ å‡†å¤‡ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼š${nextTask.split('ï¼š')[0]}`);
                
                setTimeout(() => {
                    showTaskContent(ability, nextTaskIndex, nextTask);
                }, 1500);
            }
        }
        
        // æ˜¾ç¤ºèƒ½åŠ›è®­ç»ƒå®Œæˆé¡µé¢
        function showAbilityCompleted(ability) {
            const abilityNames = {
                expression: 'è¡¨è¾¾åŠ›',
                logic: 'é€»è¾‘åŠ›',
                creativity: 'åˆ›é€ åŠ›',
                exploration: 'æ¢ç©¶åŠ›'
            };
            
            const abilityName = abilityNames[ability];
            
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px; text-align: center;">
                    <div style="font-size: 80px; margin-bottom: 20px;">ğŸ†</div>
                    <h2 style="font-size: 28px; font-weight: 700; color: #1d1d1f; margin-bottom: 12px;">æ­å–œå®Œæˆ${abilityName}è®­ç»ƒï¼</h2>
                    <p style="color: #8e8e93; font-size: 16px; margin-bottom: 32px;">ä½ å·²ç»å®Œæˆäº†æ‰€æœ‰${abilityName}ç›¸å…³çš„è®­ç»ƒä»»åŠ¡</p>
                    
                    <!-- æ€»ä½“æˆæœ -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px;">ğŸ¯ è®­ç»ƒæˆæœ</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 16px; border-radius: 8px;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 4px;">+12</div>
                                <div style="font-size: 12px; opacity: 0.9;">${abilityName}ç‚¹æ•°</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 16px; border-radius: 8px;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 4px;">+20</div>
                                <div style="font-size: 12px; opacity: 0.9;">æ€»ç»éªŒå€¼</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 16px; border-radius: 8px;">
                                <div style="font-size: 24px; font-weight: 700; margin-bottom: 4px;">4/4</div>
                                <div style="font-size: 12px; opacity: 0.9;">å®Œæˆä»»åŠ¡</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è§£é”æˆå°± -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ† è§£é”æ–°æˆå°±</h3>
                        <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 12px; padding: 20px; position: relative;">
                            <div style="position: absolute; top: -8px; right: -8px; background: #ff3b30; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">!</div>
                            <div style="font-size: 32px; margin-bottom: 8px;">${ability === 'expression' ? 'ğŸ’¬' : ability === 'logic' ? 'ğŸ§ ' : ability === 'creativity' ? 'ğŸ¨' : 'ğŸ”'}</div>
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">${abilityName}ä¸“å®¶</div>
                            <div style="font-size: 12px; opacity: 0.9;">å®Œæˆæ‰€æœ‰${abilityName}åŸºç¡€è®­ç»ƒ</div>
                        </div>
                    </div>
                    
                    <!-- ä¸‹ä¸€æ­¥å»ºè®® -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 12px;">ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®</h3>
                        <p style="color: #666; font-size: 14px; line-height: 1.5;">
                            ${getNextStepAdvice(ability)}
                        </p>
                    </div>
                    
                    <!-- æ“ä½œé€‰æ‹© -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                        <button onclick="exploreOtherAbilities()" style="background: #007AFF; color: white; border: none; padding: 20px; border-radius: 12px; cursor: pointer; font-weight: 600; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 8px;">ğŸ¯</div>
                            <div style="font-size: 16px; margin-bottom: 4px;">æ¢ç´¢å…¶ä»–èƒ½åŠ›</div>
                            <div style="font-size: 12px; opacity: 0.9;">è®­ç»ƒæ›´å¤šæŠ€èƒ½</div>
                        </button>
                        
                        <button onclick="chatWithAI()" style="background: #34d399; color: white; border: none; padding: 20px; border-radius: 12px; cursor: pointer; font-weight: 600; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 8px;">ğŸ¤–</div>
                            <div style="font-size: 16px; margin-bottom: 4px;">ä¸AIåŠ©æ•™èŠå¤©</div>
                            <div style="font-size: 12px; opacity: 0.9;">è·å¾—æ›´å¤šæŒ‡å¯¼</div>
                        </button>
                        
                        <button onclick="shareAchievement()" style="background: #f59e0b; color: white; border: none; padding: 20px; border-radius: 12px; cursor: pointer; font-weight: 600; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 8px;">ğŸ“¤</div>
                            <div style="font-size: 16px; margin-bottom: 4px;">åˆ†äº«æˆå°±</div>
                            <div style="font-size: 12px; opacity: 0.9;">è®©æœ‹å‹çœ‹åˆ°</div>
                        </button>
                        
                        <button onclick="switchToHomeInterface()" style="background: #8e8e93; color: white; border: none; padding: 20px; border-radius: 12px; cursor: pointer; font-weight: 600; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 8px;">ğŸ </div>
                            <div style="font-size: 16px; margin-bottom: 4px;">è¿”å›é¦–é¡µ</div>
                            <div style="font-size: 12px; opacity: 0.9;">æŸ¥çœ‹æ€»ä½“è¿›åº¦</div>
                        </button>
                    </div>
                </div>
            `;
        }
        
        // è·å–ä¸‹ä¸€æ­¥å»ºè®®
        function getNextStepAdvice(ability) {
            const advice = {
                expression: 'ä½ çš„è¡¨è¾¾èƒ½åŠ›æœ‰äº†å¾ˆå¤§æå‡ï¼å»ºè®®æ¥ä¸‹æ¥å¯ä»¥å°è¯•é€»è¾‘åŠ›è®­ç»ƒï¼Œè¿™æ ·èƒ½è®©ä½ çš„è¡¨è¾¾æ›´æœ‰æ¡ç†æ€§ã€‚ä¹Ÿå¯ä»¥å¤šå‚ä¸æ•…äº‹å¢™çš„åˆ›ä½œåˆ†äº«ï¼Œé”»ç‚¼å®é™…è¡¨è¾¾èƒ½åŠ›ã€‚',
                logic: 'é€»è¾‘æ€ç»´èƒ½åŠ›å¢å¼ºäº†ï¼å»ºè®®ç»“åˆåˆ›é€ åŠ›è®­ç»ƒï¼Œè®©ä½ çš„æƒ³æ³•æ—¢æœ‰é€»è¾‘åˆæœ‰åˆ›æ„ã€‚è¿˜å¯ä»¥å¤šåšä¸€äº›æ¢ç©¶æ€§çš„é—®é¢˜åˆ†æï¼Œæå‡ç»¼åˆæ€ç»´èƒ½åŠ›ã€‚',
                creativity: 'åˆ›é€ åŠ›è¡¨ç°å¾ˆæ£’ï¼å»ºè®®å°†åˆ›æ„ä¸è¡¨è¾¾åŠ›ç»“åˆï¼Œå¤šåœ¨æ•…äº‹å¢™åˆ†äº«ä½ çš„åˆ›ä½œã€‚ä¹Ÿå¯ä»¥å°è¯•æ¢ç©¶åŠ›è®­ç»ƒï¼Œä¸ºåˆ›æ„æä¾›æ›´å¤šç§‘å­¦ä¾æ®ã€‚',
                exploration: 'æ¢ç©¶ç²¾ç¥å¾ˆå¼ºï¼å»ºè®®å°†æ¢ç©¶å‘ç°ä¸åˆ›é€ åŠ›ç»“åˆï¼Œè®¾è®¡æ›´å¤šæœ‰è¶£çš„å®éªŒã€‚ä¹Ÿå¯ä»¥æå‡è¡¨è¾¾åŠ›ï¼Œæ›´å¥½åœ°åˆ†äº«ä½ çš„æ¢ç©¶æˆæœã€‚'
            };
            
            return advice[ability] || 'ç»§ç»­ä¿æŒå­¦ä¹ çƒ­æƒ…ï¼Œæ¢ç´¢æ›´å¤šæœ‰è¶£çš„çŸ¥è¯†é¢†åŸŸï¼';
        }
        
        // ä¸‹ä¸€æ­¥æ“ä½œå‡½æ•°
        function exploreOtherAbilities() {
            showNotification('ğŸ¯ æ­£åœ¨ä¸ºä½ æ¨èå…¶ä»–èƒ½åŠ›è®­ç»ƒ...');
            setTimeout(() => {
                switchToTrainingInterface();
            }, 1500);
        }
        
        function chatWithAI() {
            showNotification('ğŸ¤– æ­£åœ¨è¿æ¥AIåŠ©æ•™...');
            setTimeout(() => {
                switchToAIInterface();
            }, 1500);
        }
        
        function shareAchievement() {
            showNotification('ğŸ“¤ æˆå°±åˆ†äº«æˆåŠŸï¼ä½ çš„æœ‹å‹ä»¬ä¼šçœ‹åˆ°ä½ çš„å­¦ä¹ æˆæœï¼');
            setTimeout(() => {
                showNotification('ğŸ‰ åˆ†äº«è·å¾—é¢å¤–ç»éªŒå€¼+2ï¼');
            }, 2000);
        }
        
        // è·å–å­¦ä¹ å»ºè®®
        function getLearningAdvice(ability, taskIndex) {
            const advice = {
                expression: [
                    'ç»§ç»­ç»ƒä¹ æè¿°æŠ€å·§ï¼Œå¯ä»¥å¤šè§‚å¯Ÿèº«è¾¹çš„äº‹ç‰©ï¼Œç”¨ä¸°å¯Œçš„è¯æ±‡æ¥å½¢å®¹ã€‚å»ºè®®æ¯å¤©ç»ƒä¹ æè¿°ä¸€æ ·æ–°äº‹ç‰©ã€‚',
                    'æ•…äº‹å¤è¿°èƒ½åŠ›å¾ˆå¥½ï¼å¯ä»¥å°è¯•å¤è¿°æ›´å¤æ‚çš„æ•…äº‹ï¼Œæ³¨æ„ä¿æŒæ•…äº‹çš„é€»è¾‘æ€§å’Œå®Œæ•´æ€§ã€‚',
                    'æƒ…æ„Ÿè¡¨è¾¾å¾ˆåˆ°ä½ï¼å¯ä»¥åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å¤šç»ƒä¹ ï¼Œç”¨è¡¨æƒ…å’ŒåŠ¨ä½œæ¥å¢å¼ºè¯­è¨€çš„è¡¨ç°åŠ›ã€‚',
                    'æ¼”è®²æŠ€å·§ä¸é”™ï¼å»ºè®®å¤šç»ƒä¹ åœ¨ä¸åŒåœºåˆçš„è¡¨è¾¾ï¼Œæå‡è‡ªä¿¡å¿ƒå’Œè¡¨è¾¾çš„æ„ŸæŸ“åŠ›ã€‚'
                ],
                logic: [
                    'é€»è¾‘æ¨ç†èƒ½åŠ›å¾ˆå¼ºï¼å¯ä»¥å¤šåšä¸€äº›ç±»ä¼¼çš„æ¨ç†é¢˜ï¼Œé”»ç‚¼ä¸¥å¯†çš„æ€ç»´èƒ½åŠ›ã€‚',
                    'æ•°å­¦æ€ç»´æ•æ·ï¼å»ºè®®å¤šæ¥è§¦ä¸åŒç±»å‹çš„æ•°å­¦è§„å¾‹é¢˜ï¼Œæå‡æŠ½è±¡æ€ç»´èƒ½åŠ›ã€‚',
                    'é—®é¢˜åˆ†æå¾ˆæ·±å…¥ï¼å¯ä»¥å¤šå…³æ³¨ç”Ÿæ´»ä¸­çš„ç°è±¡ï¼ŒåŸ¹å…»ç§‘å­¦æ€ç»´å’Œæ¢ç©¶ç²¾ç¥ã€‚',
                    'å› æœå…³ç³»ç†è§£æ­£ç¡®ï¼å»ºè®®å¤šè§‚å¯Ÿè‡ªç„¶ç°è±¡ï¼Œæ€è€ƒäº‹ç‰©ä¹‹é—´çš„è”ç³»ã€‚'
                ],
                creativity: [
                    'æƒ³è±¡åŠ›å¾ˆä¸°å¯Œï¼å¯ä»¥å¤šç”»ç”»ã€å¤šåˆ›ä½œï¼ŒæŠŠæƒ³è±¡å˜æˆå…·ä½“çš„ä½œå“ã€‚',
                    'æ•…äº‹åˆ›ä½œå¾ˆæœ‰å¤©èµ‹ï¼å»ºè®®å¤šè¯»ä¼˜ç§€çš„æ•…äº‹ï¼Œå­¦ä¹ ä¸åŒçš„å†™ä½œæŠ€å·§ã€‚',
                    'å‘æ˜åˆ›æ„å¾ˆæ£’ï¼å¯ä»¥å¤šè§‚å¯Ÿç”Ÿæ´»ä¸­çš„é—®é¢˜ï¼Œæ€è€ƒåˆ›æ–°çš„è§£å†³æ–¹æ¡ˆã€‚',
                    'æƒ³è±¡è¡¨è¾¾å¾ˆç‹¬ç‰¹ï¼å»ºè®®å¤šä¸æœ‹å‹åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œæ¿€å‘æ›´å¤šåˆ›æ„ç«èŠ±ã€‚'
                ],
                exploration: [
                    'è§‚å¯Ÿèƒ½åŠ›å¾ˆå¼ºï¼å»ºè®®å¤šåšç§‘å­¦å°å®éªŒï¼ŒåŸ¹å…»ä¸¥è°¨çš„ç§‘å­¦æ€åº¦ã€‚',
                    'å®éªŒæ¢ç©¶å¾ˆè®¤çœŸï¼å¯ä»¥å°è¯•æ›´å¤šæœ‰è¶£çš„å®éªŒï¼Œæ¢ç´¢ç§‘å­¦çš„å¥¥ç§˜ã€‚',
                    'æé—®è´¨é‡å¾ˆé«˜ï¼å¥½å¥‡å¿ƒæ˜¯å­¦ä¹ çš„åŠ¨åŠ›ï¼Œç»§ç»­ä¿æŒå¯¹ä¸–ç•Œçš„å¥½å¥‡ã€‚',
                    'å‡è®¾éªŒè¯å¾ˆç§‘å­¦ï¼å»ºè®®å¤šæ€è€ƒç”Ÿæ´»ä¸­çš„ç°è±¡ï¼Œç”¨ç§‘å­¦æ–¹æ³•éªŒè¯æƒ³æ³•ã€‚'
                ]
            };
            
            return advice[ability][taskIndex] || 'ç»§ç»­ä¿æŒå­¦ä¹ çƒ­æƒ…ï¼Œä½ çš„è¡¨ç°å¾ˆæ£’ï¼';
        }
        
        // è·å–AIåé¦ˆ
        function getAIFeedback(ability, taskIndex) {
            const feedback = {
                expression: [
                    'è¯­è¨€è¡¨è¾¾æ¸…æ™°ï¼Œæè¿°ç”ŸåŠ¨æœ‰è¶£ï¼',
                    'æ•…äº‹å¤è¿°å®Œæ•´ï¼Œè¯­è¨€ç»„ç»‡å¾ˆå¥½ï¼',
                    'æƒ…æ„Ÿè¡¨è¾¾ä¸°å¯Œï¼Œè¡¨æ¼”å¾ˆåˆ°ä½ï¼',
                    'æ¼”è®²å†…å®¹æœ‰æ¡ç†ï¼Œå£°éŸ³æ´ªäº®ï¼'
                ],
                logic: [
                    'é€»è¾‘æ¨ç†å‡†ç¡®ï¼Œæ€è·¯æ¸…æ™°ï¼',
                    'æ•°å­¦æ€ç»´æ•æ·ï¼Œæ‰¾è§„å¾‹å¾ˆæ£’ï¼',
                    'é—®é¢˜åˆ†ææ·±å…¥ï¼Œæ€è€ƒå…¨é¢ï¼',
                    'å› æœå…³ç³»ç†è§£æ­£ç¡®ï¼Œé€»è¾‘æ€§å¼ºï¼'
                ],
                creativity: [
                    'æƒ³è±¡åŠ›ä¸°å¯Œï¼Œåˆ›æ„åè¶³ï¼',
                    'æ•…äº‹æƒ…èŠ‚æœ‰è¶£ï¼Œåˆ›æ–°æ€§å¼ºï¼',
                    'å‘æ˜è®¾è®¡å®ç”¨ï¼Œå¾ˆæœ‰åˆ›æ„ï¼',
                    'æƒ³è±¡è¡¨è¾¾ç‹¬ç‰¹ï¼Œæ€ç»´æ´»è·ƒï¼'
                ],
                exploration: [
                    'è§‚å¯Ÿä»”ç»†ï¼Œç§‘å­¦æ€åº¦å¾ˆå¥½ï¼',
                    'å®éªŒæ“ä½œè§„èŒƒï¼Œæ¢ç´¢ç²¾ç¥å¼ºï¼',
                    'æé—®è´¨é‡é«˜ï¼Œå¥½å¥‡å¿ƒå¼ºï¼',
                    'å‡è®¾åˆç†ï¼ŒéªŒè¯æ–¹æ³•æ­£ç¡®ï¼'
                ]
            };
            
            return feedback[ability][taskIndex] || 'è¡¨ç°å¾ˆæ£’ï¼Œç»§ç»­åŠ æ²¹ï¼';
        }
        
        // AIèŠå¤©åŠŸèƒ½
        function sendQuickAIMessage(message) {
            addChatMessage(message, 'user');
            
            setTimeout(() => {
                let response = '';
                if (message.includes('è¿›åº¦')) {
                    response = 'ä½ çš„å­¦ä¹ è¿›åº¦å¾ˆæ£’ï¼è¡¨è¾¾åŠ›65ç‚¹ï¼Œåˆ›é€ åŠ›80ç‚¹ï¼Œå·²ç»æ˜¯å°ä¸“å®¶äº†ï¼ç»§ç»­ä¿æŒè¿™ç§å­¦ä¹ çƒ­æƒ…ï¼';
                } else if (message.includes('å°èŠ½èŠ½')) {
                    response = 'å°èŠ½èŠ½ç°åœ¨Lv.4ï¼Œå¾ˆå¼€å¿ƒï¼å®ƒçš„æˆé•¿å€¼580ï¼Œæ´»è·ƒåº¦420ï¼Œæƒ³å’Œä½ ä¸€èµ·å­¦ä¹ å‘¢ï¼';
                } else if (message.includes('å­¦ä¹ ')) {
                    response = 'å¤ªå¥½äº†ï¼æ ¹æ®ä½ çš„æƒ…å†µï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥åŠ å¼ºé€»è¾‘åŠ›è®­ç»ƒï¼Œç°åœ¨45ç‚¹è¿˜æœ‰æå‡ç©ºé—´ã€‚è¦å¼€å§‹å—ï¼Ÿ';
                } else if (message.includes('æ•…äº‹')) {
                    response = 'å¥½çš„ï¼æˆ‘æ¥ç»™ä½ è®²ä¸€ä¸ªæ•…äº‹ï¼šä»å‰æœ‰ä¸€åªå‹‡æ•¢çš„å°å…”å­ï¼Œå®ƒæœ‰ä¸€ä¸ªæ¢¦æƒ³å°±æ˜¯æˆä¸ºæ£®æ—é‡Œæœ€ä¼šè®²æ•…äº‹çš„åŠ¨ç‰©...';
                }
                addChatMessage(response, 'ai');
            }, 1500);
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
            
            sendQuickAIMessage(message);
            input.value = '';
        }
        
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }
        
        function addChatMessage(message, sender) {
            const chatArea = document.getElementById('chatMessages');
            const messageEl = document.createElement('div');
            messageEl.style.marginBottom = '12px';
            
            if (sender === 'user') {
                messageEl.innerHTML = `
                    <div style="display: flex; justify-content: flex-end;">
                        <div style="background: #007AFF; color: white; padding: 12px 16px; border-radius: 18px; max-width: 70%; font-size: 14px;">
                            ${message}
                        </div>
                    </div>
                `;
            } else {
                messageEl.innerHTML = `
                    <div style="display: flex; justify-content: flex-start;">
                        <div style="background: white; color: #1d1d1f; padding: 12px 16px; border-radius: 18px; max-width: 70%; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-size: 14px;">
                            ${message}
                        </div>
                    </div>
                `;
            }
            
            chatArea.appendChild(messageEl);
            chatArea.scrollTop = chatArea.scrollHeight;
        }
        
        // ä¼™ä¼´äº’åŠ¨åŠŸèƒ½
        function partnerBigInteraction() {
            showNotification('ğŸŒ³ å°èŠ½èŠ½ï¼šä¸»äººï¼æˆ‘ç°åœ¨æ˜¯æ™ºæ…§æ ‘äº†ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦æ›´å¤šçŸ¥è¯†å§ï¼');
        }
        
        function feedPartnerBig() {
            showNotification('ğŸ¯ å°èŠ½èŠ½ï¼šè°¢è°¢ä¸»äººï¼æˆ‘æ›´æœ‰æ´»åŠ›äº†ï¼æˆé•¿å€¼+25');
        }
        
        function playWithPartnerBig() {
            showNotification('ğŸ® å°èŠ½èŠ½ï¼šå’Œä¸»äººç©æ¸¸æˆæœ€å¼€å¿ƒäº†ï¼æ´»è·ƒåº¦+30');
        }
        
        function decoratePartnerBig() {
            showNotification('ğŸ¨ å°èŠ½èŠ½ï¼šæˆ‘æˆ´ä¸Šäº†æ–°å¸½å­ï¼è°¢è°¢ä¸»äººï¼');
        }
        
        // æ•…äº‹å‘å¸ƒåŠŸèƒ½
        function openStoryPublish() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToStoryInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›æ•…äº‹å¢™
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">å‘å¸ƒæ–°æ•…äº‹</h2>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">æ•…äº‹æ ‡é¢˜</label>
                            <input type="text" id="storyTitle" placeholder="ç»™ä½ çš„æ•…äº‹èµ·ä¸ªå¥½å¬çš„åå­—..." style="width: 100%; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 16px; outline: none;">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">æ•…äº‹å†…å®¹</label>
                            <textarea id="storyContent" placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„ç²¾å½©æ•…äº‹..." style="width: 100%; height: 120px; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; resize: none; outline: none; line-height: 1.5;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">æ•…äº‹ç±»å‹</label>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <button onclick="selectStoryType('adventure', this)" class="story-type-btn" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 6px 12px; border-radius: 12px; font-size: 12px; cursor: pointer;">ğŸ”ï¸ å†’é™©</button>
                                <button onclick="selectStoryType('fairy', this)" class="story-type-btn" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 6px 12px; border-radius: 12px; font-size: 12px; cursor: pointer;">ğŸ§š ç«¥è¯</button>
                                <button onclick="selectStoryType('science', this)" class="story-type-btn" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 6px 12px; border-radius: 12px; font-size: 12px; cursor: pointer;">ğŸ”¬ ç§‘å¹»</button>
                                <button onclick="selectStoryType('daily', this)" class="story-type-btn" style="background: #f2f2f7; border: 1px solid #e5e5ea; padding: 6px 12px; border-radius: 12px; font-size: 12px; cursor: pointer;">ğŸ“ æ—¥å¸¸</button>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 12px; justify-content: flex-end;">
                            <button onclick="switchToStoryInterface()" style="background: #8e8e93; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">å–æ¶ˆ</button>
                            <button onclick="publishNewStory()" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">ğŸ“ å‘å¸ƒæ•…äº‹</button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // é€‰æ‹©æ•…äº‹ç±»å‹
        function selectStoryType(type, element) {
            // é‡ç½®æ‰€æœ‰æŒ‰é’®æ ·å¼
            document.querySelectorAll('.story-type-btn').forEach(btn => {
                btn.style.background = '#f2f2f7';
                btn.style.color = '#1d1d1f';
                btn.style.borderColor = '#e5e5ea';
            });
            
            // é«˜äº®é€‰ä¸­çš„æŒ‰é’®
            element.style.background = '#007AFF';
            element.style.color = 'white';
            element.style.borderColor = '#007AFF';
            
            showNotification(`å·²é€‰æ‹©æ•…äº‹ç±»å‹ï¼š${type === 'adventure' ? 'å†’é™©' : type === 'fairy' ? 'ç«¥è¯' : type === 'science' ? 'ç§‘å¹»' : 'æ—¥å¸¸'}`);
        }
        
        // å‘å¸ƒæ–°æ•…äº‹
        function publishNewStory() {
            const title = document.getElementById('storyTitle').value.trim();
            const content = document.getElementById('storyContent').value.trim();
            
            if (!title || !content) {
                showNotification('âš ï¸ è¯·å¡«å†™æ•…äº‹æ ‡é¢˜å’Œå†…å®¹');
                return;
            }
            
            showNotification('ğŸ“ æ­£åœ¨å‘å¸ƒæ•…äº‹...');
            
            setTimeout(() => {
                showNotification('ğŸ¤– AIæ­£åœ¨åˆ†æä½ çš„æ•…äº‹...');
            }, 1500);
            
            setTimeout(() => {
                showNotification('ğŸ‰ æ•…äº‹å‘å¸ƒæˆåŠŸï¼AIè¯„åˆ†ï¼š92åˆ†');
            }, 3000);
            
            setTimeout(() => {
                showNotification('ğŸ† æ­å–œè·å¾—"æ•…äº‹åˆ›ä½œå®¶"æˆå°±ï¼');
                switchToStoryInterface();
            }, 4500);
        }
        
        // å…±åˆ›åŠŸèƒ½
        function openCollaboration() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="switchToStoryInterface()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›æ•…äº‹å¢™
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">å…±åˆ›æ•…äº‹</h2>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #34d399 0%, #10b981 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ¤</div>
                        <h3 style="margin-bottom: 8px;">å¤šäººåä½œæ•…äº‹åˆ›ä½œ</h3>
                        <p style="opacity: 0.9; font-size: 14px;">ä¸å…¶ä»–å°æœ‹å‹ä¸€èµ·åˆ›ä½œç²¾å½©æ•…äº‹</p>
                    </div>
                    
                    <!-- å½“å‰å…±åˆ›æ•…äº‹ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <h3 style="color: #1d1d1f;">ã€Šæ£®æ—å¤§å†’é™©ã€‹</h3>
                            <div style="display: flex; gap: 8px;">
                                <div style="background: #e8f5e8; color: #388e3c; padding: 4px 8px; border-radius: 6px; font-size: 11px;">è¿›è¡Œä¸­</div>
                                <div style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 6px; font-size: 11px;">3äººå‚ä¸</div>
                            </div>
                        </div>
                        
                        <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                            <div style="font-size: 14px; line-height: 1.6; color: #374151;">
                                <div style="margin-bottom: 8px;"><strong>å°æ˜:</strong> åœ¨ä¸€ä¸ªé˜³å…‰æ˜åªšçš„æ—©æ™¨ï¼Œå°ç†Šå†³å®šå»æ£®æ—æ¢é™©ã€‚å®ƒèƒŒç€å°èƒŒåŒ…ï¼Œå¸¦ç€æ”¾å¤§é•œå’ŒæŒ‡å—é’ˆ...</div>
                                <div style="margin-bottom: 8px;"><strong>å°çº¢:</strong> çªç„¶ï¼Œå°ç†Šå¬åˆ°äº†å¥‡æ€ªçš„å£°éŸ³ï¼Œå®ƒå°å¿ƒç¿¼ç¿¼åœ°èµ°å‘å£°éŸ³æ¥æºã€‚åŸæ¥æ˜¯ä¸€åªå—ä¼¤çš„å°é¸Ÿåœ¨æ ‘ä¸‹...</div>
                                <div style="color: #007AFF; font-style: italic;">ç­‰å¾…ä¸‹ä¸€ä½å°æœ‹å‹ç»­å†™...</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">ç»­å†™æ•…äº‹</label>
                            <textarea id="collaborationContent" placeholder="æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå‘æŒ¥ä½ çš„æƒ³è±¡åŠ›..." style="width: 100%; height: 80px; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; resize: none; outline: none;"></textarea>
                        </div>
                        
                        <button onclick="submitCollaboration()" style="background: #34d399; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;">
                            âœï¸ æäº¤ç»­å†™
                        </button>
                    </div>
                    
                    <!-- åˆ›å»ºæ–°çš„å…±åˆ›æ•…äº‹ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ†• å‘èµ·æ–°çš„å…±åˆ›æ•…äº‹</h3>
                        <div style="margin-bottom: 16px;">
                            <input type="text" id="newCollabTitle" placeholder="å…±åˆ›æ•…äº‹æ ‡é¢˜..." style="width: 100%; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; outline: none; margin-bottom: 12px;">
                            <textarea id="newCollabStart" placeholder="å†™ä¸‹æ•…äº‹çš„å¼€å¤´ï¼Œè®©å…¶ä»–å°æœ‹å‹æ¥ç€åˆ›ä½œ..." style="width: 100%; height: 80px; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; resize: none; outline: none;"></textarea>
                        </div>
                        <button onclick="createNewCollaboration()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;">
                            ğŸš€ åˆ›å»ºå…±åˆ›æ•…äº‹
                        </button>
                    </div>
                </div>
            `;
        }
        
        // å‚ä¸å…±åˆ›
        function joinCollaboration() {
            showNotification('âœï¸ æ­£åœ¨è¿›å…¥å…±åˆ›æ¨¡å¼...');
            setTimeout(() => {
                openCollaboration();
            }, 1000);
        }
        
        // æäº¤å…±åˆ›å†…å®¹
        function submitCollaboration() {
            const content = document.getElementById('collaborationContent').value.trim();
            
            if (!content) {
                showNotification('âš ï¸ è¯·è¾“å…¥ç»­å†™å†…å®¹');
                return;
            }
            
            showNotification('ğŸ“ æ­£åœ¨æäº¤ç»­å†™å†…å®¹...');
            
            setTimeout(() => {
                showNotification('ğŸ¤– AIæ­£åœ¨å®¡æ ¸ä½ çš„ç»­å†™...');
            }, 1500);
            
            setTimeout(() => {
                showNotification('âœ… ç»­å†™æäº¤æˆåŠŸï¼ç­‰å¾…å…¶ä»–å°æœ‹å‹ç»§ç»­åˆ›ä½œ');
            }, 3000);
            
            setTimeout(() => {
                showNotification('ğŸ‰ ä½ çš„ç»­å†™å¾ˆç²¾å½©ï¼è·å¾—åˆ›ä½œç»éªŒ+10');
                switchToStoryInterface();
            }, 4500);
        }
        
        // åˆ›å»ºæ–°å…±åˆ›æ•…äº‹
        function createNewCollaboration() {
            const title = document.getElementById('newCollabTitle').value.trim();
            const startContent = document.getElementById('newCollabStart').value.trim();
            
            if (!title || !startContent) {
                showNotification('âš ï¸ è¯·å¡«å†™æ•…äº‹æ ‡é¢˜å’Œå¼€å¤´å†…å®¹');
                return;
            }
            
            showNotification('ğŸš€ æ­£åœ¨åˆ›å»ºå…±åˆ›æ•…äº‹...');
            
            setTimeout(() => {
                showNotification('ğŸ¤– AIæ­£åœ¨åˆ†ææ•…äº‹å¼€å¤´...');
            }, 1500);
            
            setTimeout(() => {
                showNotification('âœ… å…±åˆ›æ•…äº‹åˆ›å»ºæˆåŠŸï¼é‚€è¯·æœ‹å‹ä»¬ä¸€èµ·åˆ›ä½œå§');
            }, 3000);
            
            setTimeout(() => {
                showNotification('ğŸŠ æ­å–œè·å¾—"å…±åˆ›å‘èµ·äºº"æˆå°±ï¼');
                switchToStoryInterface();
            }, 4500);
        }
        
        // æ•…äº‹äº’åŠ¨
        function likeStoryDetail() {
            const likeBtn = event.currentTarget;
            const countEl = document.getElementById('likeCount');
            const currentCount = parseInt(countEl.textContent);
            countEl.textContent = currentCount + 1;
            likeBtn.style.color = '#ff3b30';
            showNotification('â¤ï¸ å·²ä¸ºæ•…äº‹ç‚¹èµï¼');
        }
        
        function likeStorySecond() {
            const countEl = document.getElementById('likeCount2');
            const currentCount = parseInt(countEl.textContent);
            countEl.textContent = currentCount + 1;
            showNotification('â¤ï¸ å·²ä¸ºã€Šç¥å¥‡çš„èŠ±å›­ã€‹ç‚¹èµï¼');
        }
        
        function commentStory() {
            showNotification('ğŸ’¬ è¯„è®ºåŠŸèƒ½ï¼šè¿™ä¸ªæ•…äº‹çœŸç²¾å½©ï¼æˆ‘ä¹Ÿæƒ³å†™ä¸€ä¸ªï¼');
        }
        
        function shareStoryDetail() {
            showNotification('ğŸ“¤ æ•…äº‹åˆ†äº«æˆåŠŸï¼ä½ çš„æœ‹å‹ä»¬ä¼šçœ‹åˆ°è¿™ä¸ªç²¾å½©æ•…äº‹ï¼');
        }
        
        // æˆå°±å±•ç¤º
        function showAchievement(achievementId) {
            const achievements = {
                'creative-master': 'ğŸ¨ åˆ›æ„å¤§å¸ˆ\n\nåˆ›é€ åŠ›è¾¾åˆ°80ç‚¹\nè·å¾—æ—¶é—´ï¼šåˆšåˆš\n\nä½ çš„æƒ³è±¡åŠ›å’Œåˆ›æ–°èƒ½åŠ›éå¸¸å‡ºè‰²ï¼',
                'expression-expert': 'ğŸ’¬ è¡¨è¾¾ä¸“å®¶\n\nè¡¨è¾¾åŠ›è¾¾åˆ°60ç‚¹\nè·å¾—æ—¶é—´ï¼š2å¤©å‰\n\nä½ çš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾ˆæ£’ï¼',
                'streak-champion': 'ğŸ”¥ åšæŒå† å†›\n\nè¿ç»­å­¦ä¹ 5å¤©\nè·å¾—æ—¶é—´ï¼šä»Šå¤©\n\nåšæŒå°±æ˜¯èƒœåˆ©ï¼'
            };
            
            alert(achievements[achievementId] || 'æˆå°±è¯¦æƒ…');
        }
        
        // ===== æ·»åŠ é¦–é¡µç¼ºå¤±çš„åŠŸèƒ½å‡½æ•° =====
        
        // èƒ½åŠ›è®­ç»ƒå…¥å£
        function openAbilityTraining(ability) {
            const abilityNames = {
                expression: 'è¡¨è¾¾åŠ›',
                logic: 'é€»è¾‘åŠ›',
                creativity: 'åˆ›é€ åŠ›',
                exploration: 'æ¢ç©¶åŠ›'
            };
            
            const abilityName = abilityNames[ability];
            showNotification(`ğŸ¯ å¼€å§‹${abilityName}è®­ç»ƒ...`);
            
            // æ¨¡æ‹Ÿè®­ç»ƒè¿‡ç¨‹
            setTimeout(() => {
                showNotification(`ğŸš€ ${abilityName}è®­ç»ƒè¿›è¡Œä¸­...`);
            }, 1000);
            
            setTimeout(() => {
                showNotification(`ğŸ¤– AIåé¦ˆï¼š${abilityName}æœ‰æ˜æ˜¾æå‡ï¼`);
            }, 2500);
            
            setTimeout(() => {
                showNotification(`ğŸ‰ è®­ç»ƒå®Œæˆï¼${abilityName}+15ï¼Œè·å¾—ç»éªŒå€¼ï¼`);
            }, 4000);
        }
        
        // è™šæ‹Ÿä¼™ä¼´äº’åŠ¨
        function interactWithPartner() {
            showNotification('ğŸŒ³ å°èŠ½èŠ½ï¼šä¸»äººï¼æˆ‘ç°åœ¨æ˜¯æ™ºæ…§æ ‘äº†ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ å§ï¼');
        }
        
        function partnerBigInteraction() {
            showNotification('ğŸŒ³ å°èŠ½èŠ½é™é™åœ°ç­‰å¾…ç€ï¼Œåªæœ‰é€šè¿‡å­¦ä¹ è®­ç»ƒæ‰èƒ½å¸®åŠ©å®ƒæˆé•¿å“¦ï¼');
        }
        
        // æ·»åŠ CSSåŠ¨ç”»
        const additionalStyles = document.createElement('style');
        additionalStyles.textContent = `
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
        `;
        document.head.appendChild(additionalStyles);
        
        // ===== AIæµ‹è¯„ç³»ç»Ÿå®ç° =====
        
        let assessmentData = {
            currentQuestion: 0,
            answers: [],
            abilities: {
                expression: 0,
                logic: 0,
                creativity: 0,
                exploration: 0,
                habit: 0
            }
        };
        
        // å¼€å§‹AIæµ‹è¯„
        function startAIAssessment() {
            assessmentData.currentQuestion = 0;
            assessmentData.answers = [];
            showNotification('ğŸ¤– AIæµ‹è¯„ç³»ç»Ÿå¯åŠ¨ä¸­...');
            
            setTimeout(() => {
                showAssessmentQuestion();
            }, 1500);
        }
        
        // æ˜¾ç¤ºæµ‹è¯„é—®é¢˜
        function showAssessmentQuestion() {
            const questions = [
                {
                    type: 'expression',
                    question: 'å½“ä½ çœ‹åˆ°ä¸€åªå¯çˆ±çš„å°çŒ«æ—¶ï¼Œä½ ä¼šæ€ä¹ˆæè¿°å®ƒï¼Ÿ',
                    options: [
                        { text: 'å°çŒ«å¾ˆå¯çˆ±', points: 1 },
                        { text: 'è¿™åªå°çŒ«æœ‰ç€é›ªç™½çš„æ¯›å‘ï¼Œåœ†åœ†çš„çœ¼ç›ï¼Œæ­£åœ¨ä¼˜é›…åœ°èˆ”ç€çˆªå­', points: 3 },
                        { text: 'çŒ«', points: 0 },
                        { text: 'è¿™åªå°çŒ«çœ‹èµ·æ¥å¾ˆæ¸©é¡ºï¼Œå®ƒçš„æ¯›å¾ˆè½¯ï¼Œçœ¼ç›äº®æ™¶æ™¶çš„', points: 2 }
                    ],
                    subject: 'è¯­æ–‡å­¦ç§‘ - è¯æ±‡è¿ç”¨ä¸æè¿°èƒ½åŠ›'
                },
                {
                    type: 'logic',
                    question: 'å¦‚æœä»Šå¤©ä¸‹é›¨ï¼Œå°æ˜å°±ä¸å»å…¬å›­ã€‚ä»Šå¤©å°æ˜å»äº†å…¬å›­ï¼Œé‚£ä¹ˆä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ',
                    options: [
                        { text: 'ä»Šå¤©æ²¡æœ‰ä¸‹é›¨', points: 3 },
                        { text: 'ä»Šå¤©ä¸‹é›¨äº†', points: 0 },
                        { text: 'ä¸çŸ¥é“', points: 1 },
                        { text: 'å¯èƒ½ä¸‹é›¨ä¹Ÿå¯èƒ½ä¸ä¸‹é›¨', points: 1 }
                    ],
                    subject: 'æ•°å­¦å­¦ç§‘ - é€»è¾‘æ¨ç†ä¸æ¡ä»¶åˆ¤æ–­'
                },
                {
                    type: 'creativity',
                    question: 'å¦‚æœä½ æ˜¯ä¸€æœµäº‘ï¼Œä½ æœ€æƒ³å˜æˆä»€ä¹ˆå½¢çŠ¶ï¼Ÿ',
                    options: [
                        { text: 'å°å…”å­ï¼Œè¿™æ ·å°±èƒ½å’Œåœ°ä¸Šçš„å°æœ‹å‹ä¸€èµ·ç©è€', points: 3 },
                        { text: 'åœ†å½¢', points: 1 },
                        { text: 'ä¸€åº§åŸå ¡ï¼Œé‡Œé¢ä½ç€äº‘æœµå…¬ä¸»å’Œå½©è™¹ç‹å­', points: 3 },
                        { text: 'ä¸çŸ¥é“', points: 0 }
                    ],
                    subject: 'ç¾æœ¯å­¦ç§‘ - æƒ³è±¡åŠ›ä¸åˆ›æ„è¡¨è¾¾'
                },
                {
                    type: 'exploration',
                    question: 'çœ‹åˆ°ä¸€ä¸ªæ–°çš„ç©å…·ï¼Œä½ ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ä»€ä¹ˆï¼Ÿ',
                    options: [
                        { text: 'è¿™ä¸ªç©å…·æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ', points: 3 },
                        { text: 'å¥½æƒ³è¦è¿™ä¸ªç©å…·', points: 1 },
                        { text: 'å®ƒèƒ½åšä»€ä¹ˆï¼Ÿå¯ä»¥æ€ä¹ˆç©ï¼Ÿ', points: 2 },
                        { text: 'æ²¡ä»€ä¹ˆç‰¹åˆ«çš„', points: 0 }
                    ],
                    subject: 'ç§‘å­¦å­¦ç§‘ - è§‚å¯Ÿèƒ½åŠ›ä¸æ¢ç©¶ç²¾ç¥'
                },
                {
                    type: 'habit',
                    question: 'ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå®‰æ’å­¦ä¹ æ—¶é—´çš„ï¼Ÿ',
                    options: [
                        { text: 'æœ‰å›ºå®šçš„å­¦ä¹ æ—¶é—´ï¼Œä¼šåˆ¶å®šè®¡åˆ’', points: 3 },
                        { text: 'æƒ³èµ·æ¥å°±å­¦ä¹ ', points: 1 },
                        { text: 'å¦ˆå¦ˆæé†’æ‰å­¦ä¹ ', points: 1 },
                        { text: 'ä¼šè®¾å®šå­¦ä¹ ç›®æ ‡ï¼Œå®Œæˆåå¥–åŠ±è‡ªå·±', points: 3 }
                    ],
                    subject: 'ç»¼åˆç´ å…» - è‡ªä¸»å­¦ä¹ ä¸æ—¶é—´ç®¡ç†'
                }
            ];
            
            const currentQ = questions[assessmentData.currentQuestion];
            if (!currentQ) {
                // æµ‹è¯„å®Œæˆ
                completeAssessment();
                return;
            }
            
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #007AFF; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                ${assessmentData.currentQuestion + 1}
                            </div>
                            <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">AIèƒ½åŠ›æµ‹è¯„</h2>
                        </div>
                        <div style="font-size: 14px; color: #8e8e93;">
                            ${assessmentData.currentQuestion + 1}/${questions.length}
                        </div>
                    </div>
                    
                    <!-- è¿›åº¦æ¡ -->
                    <div style="background: #e5e5ea; height: 6px; border-radius: 3px; margin-bottom: 24px; overflow: hidden;">
                        <div style="background: #007AFF; height: 100%; width: ${((assessmentData.currentQuestion + 1) / questions.length) * 100}%; border-radius: 3px; transition: width 0.5s ease;"></div>
                    </div>
                    
                    <!-- AIå­¦ç§‘æ ‡è¯† -->
                    <div style="background: #f0f9ff; border: 1px solid #e0f2fe; border-radius: 8px; padding: 12px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="background: #007AFF; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600;">AIåˆ†æ</span>
                            <span style="color: #0369a1; font-size: 12px;">${currentQ.subject}</span>
                        </div>
                    </div>
                    
                    <!-- é—®é¢˜å†…å®¹ -->
                    <div style="background: white; border-radius: 12px; padding: 24px; margin-bottom: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="font-size: 32px;">${currentQ.type === 'expression' ? 'ğŸ’¬' : currentQ.type === 'logic' ? 'ğŸ§ ' : currentQ.type === 'creativity' ? 'ğŸ¨' : currentQ.type === 'exploration' ? 'ğŸ”' : 'â°'}</div>
                            <div>
                                <div style="font-size: 14px; color: #007AFF; font-weight: 600;">${currentQ.type === 'expression' ? 'è¡¨è¾¾åŠ›æµ‹è¯„' : currentQ.type === 'logic' ? 'é€»è¾‘åŠ›æµ‹è¯„' : currentQ.type === 'creativity' ? 'åˆ›é€ åŠ›æµ‹è¯„' : currentQ.type === 'exploration' ? 'æ¢ç©¶åŠ›æµ‹è¯„' : 'ä¹ æƒ¯åŠ›æµ‹è¯„'}</div>
                            </div>
                        </div>
                        <h3 style="color: #1d1d1f; margin-bottom: 20px; font-size: 18px; line-height: 1.4;">${currentQ.question}</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            ${currentQ.options.map((option, index) => `
                                <button onclick="selectAssessmentAnswer(${index}, ${option.points})" style="background: #f8fafc; border: 2px solid #e5e5ea; padding: 16px; border-radius: 12px; cursor: pointer; text-align: left; transition: all 0.3s ease; font-size: 14px; line-height: 1.4;" onmouseover="this.style.borderColor='#007AFF'; this.style.background='#f0f9ff'" onmouseout="this.style.borderColor='#e5e5ea'; this.style.background='#f8fafc'">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="background: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #007AFF;">
                                            ${String.fromCharCode(65 + index)}
                                        </div>
                                        <span>${option.text}</span>
                                    </div>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- AIæç¤º -->
                    <div style="background: #e8f5e8; border-radius: 8px; padding: 12px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px;">ğŸ¤–</span>
                            <span style="color: #388e3c; font-size: 12px; font-weight: 600;">AIæç¤ºï¼šæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œé€‰æ‹©æœ€ç¬¦åˆä½ æƒ³æ³•çš„é€‰é¡¹å³å¯</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // é€‰æ‹©æµ‹è¯„ç­”æ¡ˆ
        function selectAssessmentAnswer(optionIndex, points) {
            // è®°å½•ç­”æ¡ˆ
            assessmentData.answers.push({
                questionIndex: assessmentData.currentQuestion,
                optionIndex: optionIndex,
                points: points
            });
            
            // æ›´æ–°èƒ½åŠ›åˆ†æ•°
            const questions = [
                { type: 'expression' },
                { type: 'logic' },
                { type: 'creativity' },
                { type: 'exploration' },
                { type: 'habit' }
            ];
            
            const currentType = questions[assessmentData.currentQuestion].type;
            assessmentData.abilities[currentType] += points * 10; // æ”¾å¤§åˆ†æ•°
            
            showNotification('ğŸ¤– AIæ­£åœ¨åˆ†æä½ çš„ç­”æ¡ˆ...');
            
            // ä¸‹ä¸€é¢˜
            setTimeout(() => {
                assessmentData.currentQuestion++;
                showAssessmentQuestion();
            }, 1500);
        }
        
        // å®Œæˆæµ‹è¯„
        function completeAssessment() {
            showNotification('ğŸ¤– AIæ­£åœ¨ç”Ÿæˆä½ çš„ä¸ªæ€§åŒ–å­¦ä¹ æ–¹æ¡ˆ...');
            
            setTimeout(() => {
                showAssessmentResults();
            }, 3000);
        }
        
        // æ˜¾ç¤ºæµ‹è¯„ç»“æœ
        function showAssessmentResults() {
            // ä¿å­˜æµ‹è¯„å®ŒæˆçŠ¶æ€
            localStorage.setItem('mengya_assessment_completed', 'true');
            
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">ğŸ¯</div>
                        <h2 style="font-size: 24px; font-weight: 700; color: #1d1d1f; margin-bottom: 8px;">AIæµ‹è¯„å®Œæˆï¼</h2>
                        <p style="color: #8e8e93; font-size: 16px;">AIå·²ä¸ºä½ ç”Ÿæˆä¸“å±å­¦ä¹ æ–¹æ¡ˆ</p>
                    </div>
                    
                    <!-- AIåˆ†æç»“æœ -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="font-size: 32px;">ğŸ¤–</div>
                            <div>
                                <h3 style="margin-bottom: 4px;">AIæ™ºèƒ½åˆ†ææŠ¥å‘Š</h3>
                                <p style="opacity: 0.9; font-size: 14px;">åŸºäºå­¦ç§‘å†…å®¹çš„ä¸ªæ€§åŒ–èƒ½åŠ›è¯„ä¼°</p>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            ${Object.entries(assessmentData.abilities).map(([ability, score]) => {
                                const abilityNames = {
                                    expression: 'è¡¨è¾¾åŠ›',
                                    logic: 'é€»è¾‘åŠ›',
                                    creativity: 'åˆ›é€ åŠ›',
                                    exploration: 'æ¢ç©¶åŠ›',
                                    habit: 'ä¹ æƒ¯åŠ›'
                                };
                                const level = score >= 25 ? 'ä¼˜ç§€' : score >= 15 ? 'è‰¯å¥½' : score >= 5 ? 'ä¸€èˆ¬' : 'å¾…æå‡';
                                const color = score >= 25 ? '#34d399' : score >= 15 ? '#f59e0b' : score >= 5 ? '#007AFF' : '#ff3b30';
                                
                                return `
                                    <div style="background: rgba(255, 255, 255, 0.15); padding: 12px; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">${abilityNames[ability]}</div>
                                        <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px; color: ${color};">${score}åˆ†</div>
                                        <div style="font-size: 11px; opacity: 0.9;">${level}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    
                    <!-- AIç”Ÿæˆçš„å­¦ä¹ è·¯å¾„ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="background: #007AFF; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600;">AIç”Ÿæˆ</span>
                            <h3 style="color: #1d1d1f;">ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„</h3>
                        </div>
                        
                        <div id="aiGeneratedPath" style="color: #666; font-size: 14px; line-height: 1.6;">
                            ${generatePersonalizedPath(assessmentData.abilities)}
                        </div>
                    </div>
                    
                    <!-- AIå­¦ç§‘å†…å®¹åŒ¹é… -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="background: #34d399; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600;">å­¦ç§‘èåˆ</span>
                            <h3 style="color: #1d1d1f;">AIæ¨èå­¦ä¹ å†…å®¹</h3>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            ${generateSubjectContent(assessmentData.abilities)}
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="enterMainApp()" style="background: #007AFF; color: white; border: none; padding: 16px 32px; border-radius: 25px; cursor: pointer; font-weight: 600; font-size: 18px; box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);">
                            ğŸš€ å¼€å§‹ä¸ªæ€§åŒ–å­¦ä¹ 
                        </button>
                    </div>
                </div>
            `;
        }
        
        // ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
        function generatePersonalizedPath(abilities) {
            const strongest = Object.entries(abilities).reduce((a, b) => abilities[a[0]] > abilities[b[0]] ? a : b);
            const weakest = Object.entries(abilities).reduce((a, b) => abilities[a[0]] < abilities[b[0]] ? a : b);
            
            const abilityNames = {
                expression: 'è¡¨è¾¾åŠ›',
                logic: 'é€»è¾‘åŠ›',
                creativity: 'åˆ›é€ åŠ›',
                exploration: 'æ¢ç©¶åŠ›',
                habit: 'ä¹ æƒ¯åŠ›'
            };
            
            return `
                åŸºäºAIåˆ†æï¼Œä½ çš„<strong>${abilityNames[strongest[0]]}</strong>è¡¨ç°æœ€å¥½(${strongest[1]}åˆ†)ï¼Œ<strong>${abilityNames[weakest[0]]}</strong>è¿˜æœ‰æå‡ç©ºé—´(${weakest[1]}åˆ†)ã€‚
                <br><br>
                <strong>ğŸ¯ AIæ¨èå­¦ä¹ è·¯å¾„ï¼š</strong><br>
                1. å…ˆä»${abilityNames[weakest[0]]}å¼€å§‹ï¼Œå»ºç«‹åŸºç¡€ä¿¡å¿ƒ<br>
                2. ç»“åˆä½ çš„${abilityNames[strongest[0]]}ä¼˜åŠ¿ï¼Œè¿›è¡Œç»¼åˆè®­ç»ƒ<br>
                3. é€æ­¥å¹³è¡¡å‘å±•å…¶ä»–èƒ½åŠ›<br>
                4. å®šæœŸè¿›è¡ŒAIè¯„ä¼°ï¼Œè°ƒæ•´å­¦ä¹ æ–¹å‘
            `;
        }
        
        // ç”Ÿæˆå­¦ç§‘å†…å®¹
        function generateSubjectContent(abilities) {
            const subjectMapping = [
                {
                    icon: 'ğŸ“–',
                    subject: 'è¯­æ–‡èåˆå†…å®¹',
                    content: 'åŸºäºä½ çš„è¡¨è¾¾åŠ›æ°´å¹³ï¼ŒAIç”Ÿæˆå¤è¯—è¯æœ—è¯µã€çœ‹å›¾å†™è¯ã€æ•…äº‹åˆ›ä½œç­‰å†…å®¹',
                    aiGenerated: true
                },
                {
                    icon: 'ğŸ”¢',
                    subject: 'æ•°å­¦èåˆå†…å®¹', 
                    content: 'ç»“åˆé€»è¾‘åŠ›è¯„ä¼°ï¼ŒAIå®šåˆ¶æ•°å­¦æ¸¸æˆã€é€»è¾‘æ¨ç†ã€ç©ºé—´æ€ç»´ç­‰è®­ç»ƒ',
                    aiGenerated: true
                },
                {
                    icon: 'ğŸ”¬',
                    subject: 'ç§‘å­¦èåˆå†…å®¹',
                    content: 'åŸºäºæ¢ç©¶åŠ›åˆ†æï¼ŒAIæ¨èç§‘å­¦å®éªŒã€è‡ªç„¶è§‚å¯Ÿã€ç§‘æ™®æ•…äº‹ç­‰å†…å®¹',
                    aiGenerated: true
                },
                {
                    icon: 'ğŸ¨',
                    subject: 'è‰ºæœ¯èåˆå†…å®¹',
                    content: 'ä¾æ®åˆ›é€ åŠ›æ°´å¹³ï¼ŒAIç”Ÿæˆç»˜ç”»åˆ›ä½œã€éŸ³ä¹å¾‹åŠ¨ã€æ‰‹å·¥åˆ¶ä½œç­‰æ´»åŠ¨',
                    aiGenerated: true
                }
            ];
            
            return subjectMapping.map(item => `
                <div style="background: #f8fafc; border-radius: 8px; padding: 16px; border-left: 4px solid #667eea;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <span style="font-size: 20px;">${item.icon}</span>
                        <div>
                            <div style="font-size: 14px; font-weight: 600; color: #1d1d1f;">${item.subject}</div>
                            ${item.aiGenerated ? '<div style="background: #667eea; color: white; padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: 600; display: inline-block; margin-top: 2px;">AIç”Ÿæˆ</div>' : ''}
                        </div>
                    </div>
                    <p style="color: #666; font-size: 12px; line-height: 1.4;">${item.content}</p>
                </div>
            `).join('');
        }
        
        // è·³è¿‡æµ‹è¯„
        function skipAssessment() {
            showNotification('âš ï¸ è·³è¿‡æµ‹è¯„å°†ä½¿ç”¨é»˜è®¤å­¦ä¹ æ–¹æ¡ˆ');
            
            setTimeout(() => {
                // æ ‡è®°æµ‹è¯„å·²å®Œæˆï¼ˆè·³è¿‡ä¹Ÿç®—å®Œæˆï¼‰
                sessionStorage.setItem('session_assessment_completed', 'true');
                localStorage.setItem('mengya_assessment_completed', 'true');
                
                // ç›´æ¥è¿›å…¥ä¸»ç•Œé¢
                initializeMainInterface();
                showWelcomeNotification();
            }, 2000);
        }
        
        // è¿›å…¥ä¸»åº”ç”¨
        function enterMainApp() {
            showNotification('ğŸ¯ æ­£åœ¨åº”ç”¨AIåˆ†æç»“æœï¼Œç”Ÿæˆä½ çš„ä¸“å±å†…å®¹...');
            
            // ä¿å­˜AIæµ‹è¯„ç»“æœåˆ°ç”¨æˆ·æ•°æ®
            setTimeout(() => {
                initializeAppDataWithAssessment();
                showNotification('âœ… ä¸ªæ€§åŒ–å­¦ä¹ ç¯å¢ƒå·²å‡†å¤‡å°±ç»ªï¼');
                
                setTimeout(() => {
                    // æ ‡è®°å½“å‰ä¼šè¯å·²å®Œæˆæµ‹è¯„
                    sessionStorage.setItem('session_assessment_completed', 'true');
                    localStorage.setItem('mengya_assessment_completed', 'true');
                    
                    // ç›´æ¥è¿›å…¥ä¸»ç•Œé¢ï¼Œä¸é‡æ–°åŠ è½½é¡µé¢
                    initializeMainInterface();
                    showWelcomeNotification();
                }, 2000);
            }, 2000);
        }
        
        // åŸºäºæµ‹è¯„ç»“æœåˆå§‹åŒ–æ•°æ®
        function initializeAppDataWithAssessment() {
            // æ ¹æ®æµ‹è¯„ç»“æœè°ƒæ•´åˆå§‹æ•°æ®
            const baseData = {
                profile: {
                    nickname: 'å°æ˜',
                    avatar: 'ğŸ‘¦',
                    level: 1,
                    experience: 0,
                    joinDate: new Date().toISOString(),
                    assessmentCompleted: true,
                    aiGeneratedPath: true
                },
                progress: {
                    totalTasks: 0,
                    completedTasks: 0,
                    currentStreak: 0,
                    maxStreak: 0,
                    abilities: assessmentData.abilities, // ä½¿ç”¨æµ‹è¯„ç»“æœ
                    aiRecommendations: generateAIRecommendations(assessmentData.abilities)
                }
            };
            
            // ä¿å­˜åˆ°localStorage
            Object.entries(baseData).forEach(([key, value]) => {
                localStorage.setItem(`mengya_child.${key}`, JSON.stringify(value));
            });
        }
        
        // ç”ŸæˆAIæ¨è
        function generateAIRecommendations(abilities) {
            const weakestAbility = Object.entries(abilities).reduce((a, b) => abilities[a[0]] < abilities[b[0]] ? a : b);
            const strongestAbility = Object.entries(abilities).reduce((a, b) => abilities[a[0]] > abilities[b[0]] ? a : b);
            
            return {
                priorityAbility: weakestAbility[0],
                strengthAbility: strongestAbility[0],
                suggestedOrder: [weakestAbility[0], strongestAbility[0]],
                aiGenerated: true,
                timestamp: new Date().toISOString()
            };
        }
        
        // ===== ä¿®å¤Tabåˆ‡æ¢ä¸­ç¼ºå¤±çš„å‡½æ•° =====
        
        function showLearningContent() {
            switchToTrainingInterface();
        }
        
        function showAIContent() {
            switchToAIInterface();
        }
        
        function showStoryContent() {
            switchToStoryInterface();
        }
        
        function showProfileContent() {
            switchToProfileInterface();
        }
        
        // ===== å®¶é•¿ç«¯åŠŸèƒ½å®ç° =====
        
        function openParentPortal() {
            // é¦–å…ˆæ˜¾ç¤ºå®¶é•¿éªŒè¯
            showParentAuth();
        }
        
        function showParentAuth() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 40px; text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 20px;">ğŸ”</div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #1d1d1f; margin-bottom: 12px;">å®¶é•¿èº«ä»½éªŒè¯</h2>
                    <p style="color: #8e8e93; font-size: 16px; margin-bottom: 32px;">
                        è¯·éªŒè¯å®¶é•¿èº«ä»½ä»¥è®¿é—®å­¦ä¹ ç›‘æ§å’Œåˆ†æåŠŸèƒ½
                    </p>
                    
                    <div style="background: white; border-radius: 12px; padding: 24px; margin-bottom: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 300px; margin: 0 auto 24px;">
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; text-align: left;">éªŒè¯å¯†ç </label>
                            <input type="password" id="parentPassword" placeholder="è¯·è¾“å…¥å®¶é•¿å¯†ç " style="width: 100%; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 16px; outline: none;">
                        </div>
                        <div style="font-size: 12px; color: #8e8e93; margin-bottom: 16px;">
                            æ¼”ç¤ºå¯†ç ï¼š<code style="background: #f2f2f7; padding: 2px 4px; border-radius: 4px;">123456</code>
                        </div>
                        <button onclick="verifyParentAccess()" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;">
                            éªŒè¯å¹¶è¿›å…¥
                        </button>
                    </div>
                    
                    <button onclick="switchTab('home')" style="background: #8e8e93; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                        è¿”å›å„¿ç«¥æ¨¡å¼
                    </button>
                </div>
            `;
        }
        
        function verifyParentAccess() {
            const password = document.getElementById('parentPassword').value;
            
            if (password === '123456') {
                showNotification('âœ… éªŒè¯æˆåŠŸï¼æ­£åœ¨è¿›å…¥å®¶é•¿ç«¯...');
                setTimeout(() => {
                    showParentDashboard();
                }, 1500);
            } else {
                showNotification('âŒ å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•');
            }
        }
        
        function showParentDashboard() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                        <div>
                            <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">å®¶é•¿æ§åˆ¶é¢æ¿</h2>
                            <p style="color: #8e8e93; font-size: 14px;">å°æ˜çš„å­¦ä¹ æ•°æ®åˆ†æ</p>
                        </div>
                        <button onclick="switchTab('home')" style="background: #8e8e93; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">
                            è¿”å›å„¿ç«¥æ¨¡å¼
                        </button>
                    </div>
                    
                    <!-- AIå­¦ä¹ åˆ†ææŠ¥å‘Š -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="font-size: 32px;">ğŸ¤–</div>
                            <div>
                                <h3 style="margin-bottom: 4px;">AIæ™ºèƒ½å­¦ä¹ æŠ¥å‘Š</h3>
                                <p style="opacity: 0.9; font-size: 14px;">åŸºäº7å¤©å­¦ä¹ æ•°æ®çš„æ·±åº¦åˆ†æ</p>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 12px; padding: 16px;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px;">
                                <div style="text-align: center;">
                                    <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">5.2å°æ—¶</div>
                                    <div style="font-size: 11px; opacity: 0.9;">æœ¬å‘¨å­¦ä¹ æ—¶é•¿</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">12ä¸ª</div>
                                    <div style="font-size: 11px; opacity: 0.9;">å®Œæˆä»»åŠ¡æ•°</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">92%</div>
                                    <div style="font-size: 11px; opacity: 0.9;">å­¦ä¹ ä¸“æ³¨åº¦</div>
                                </div>
                            </div>
                            
                            <div style="border-top: 1px solid rgba(255, 255, 255, 0.2); padding-top: 12px;">
                                <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">ğŸ¯ AIåˆ†æç»“è®ºï¼š</div>
                                <div style="font-size: 12px; opacity: 0.9; line-height: 1.4;">
                                    å­©å­å­¦ä¹ æ€åº¦ç§¯æï¼Œåˆ›é€ åŠ›è¡¨ç°çªå‡º(80åˆ†)ï¼Œå»ºè®®åŠ å¼ºé€»è¾‘åŠ›è®­ç»ƒã€‚
                                    å­¦ä¹ ä¸“æ³¨åº¦é«˜ï¼Œå»ºè®®ä¿æŒå½“å‰å­¦ä¹ èŠ‚å¥ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- èƒ½åŠ›å‘å±•è¶‹åŠ¿ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <h3 style="color: #1d1d1f;">ğŸ“ˆ èƒ½åŠ›å‘å±•è¶‹åŠ¿</h3>
                            <div style="display: flex; gap: 8px;">
                                <span style="background: #007AFF; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px;">AIåˆ†æ</span>
                                <span style="color: #8e8e93; font-size: 12px;">æœ€è¿‘7å¤©</span>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span>ğŸ’¬ è¡¨è¾¾åŠ›</span>
                                    <div style="background: #34d399; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">â†—ï¸ +15</div>
                                </div>
                                <div style="font-size: 14px; font-weight: 600; color: #34d399;">65åˆ†</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span>ğŸ¨ åˆ›é€ åŠ›</span>
                                    <div style="background: #34d399; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">â†—ï¸ +20</div>
                                </div>
                                <div style="font-size: 14px; font-weight: 600; color: #34d399;">80åˆ†</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span>ğŸ§  é€»è¾‘åŠ›</span>
                                    <div style="background: #f59e0b; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">â†’ +5</div>
                                </div>
                                <div style="font-size: 14px; font-weight: 600; color: #f59e0b;">45åˆ†</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å­¦ä¹ è¡Œä¸ºåˆ†æ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ§  AIè¡Œä¸ºåˆ†æ</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            <div style="background: #e8f5e8; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #388e3c; font-weight: 600; margin-bottom: 4px;">âœ… å­¦ä¹ ä¹ æƒ¯è‰¯å¥½</div>
                                <div style="font-size: 11px; color: #666;">è¿ç»­5å¤©ä¿æŒå­¦ä¹ ï¼Œæ—¶é—´è§„å¾‹æ€§å¼º</div>
                            </div>
                            <div style="background: #fff3e0; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #f57c00; font-weight: 600; margin-bottom: 4px;">âš ï¸ éœ€è¦å…³æ³¨</div>
                                <div style="font-size: 11px; color: #666;">é€»è¾‘åŠ›è®­ç»ƒå‚ä¸åº¦è¾ƒä½ï¼Œå»ºè®®å¼•å¯¼</div>
                            </div>
                            <div style="background: #e3f2fd; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #1976d2; font-weight: 600; margin-bottom: 4px;">ğŸ’¡ AIå»ºè®®</div>
                                <div style="font-size: 11px; color: #666;">å¯ä»¥é€šè¿‡æ•°å­¦æ¸¸æˆæå‡é€»è¾‘æ€ç»´å…´è¶£</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å®¶é•¿æ“ä½œé¢æ¿ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">âš™ï¸ å®¶é•¿æ§åˆ¶</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <button onclick="exportLearningReport()" style="background: #007AFF; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; font-weight: 600; text-align: center;">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ“Š</div>
                                <div style="font-size: 12px;">å¯¼å‡ºå­¦ä¹ æŠ¥å‘Š</div>
                            </button>
                            
                            <button onclick="setLearningGoals()" style="background: #34d399; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; font-weight: 600; text-align: center;">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ¯</div>
                                <div style="font-size: 12px;">è®¾ç½®å­¦ä¹ ç›®æ ‡</div>
                            </button>
                            
                            <button onclick="configureTimeLimit()" style="background: #f59e0b; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; font-weight: 600; text-align: center;">
                                <div style="font-size: 20px; margin-bottom: 4px;">â°</div>
                                <div style="font-size: 12px;">æ—¶é•¿æ§åˆ¶</div>
                            </button>
                            
                            <button onclick="viewAIInsights()" style="background: #667eea; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; font-weight: 600; text-align: center;">
                                <div style="font-size: 20px; margin-bottom: 4px;">ğŸ§ </div>
                                <div style="font-size: 12px;">AIæ·±åº¦æ´å¯Ÿ</div>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // å¯¼å‡ºå­¦ä¹ æŠ¥å‘Š
        function exportLearningReport() {
            showNotification('ğŸ“Š æ­£åœ¨ç”ŸæˆAIå­¦ä¹ æŠ¥å‘Š...');
            
            setTimeout(() => {
                showLearningReport();
            }, 2000);
        }
        
        function showLearningReport() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="showParentDashboard()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›æ§åˆ¶é¢æ¿
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">AIå­¦ä¹ åˆ†ææŠ¥å‘Š</h2>
                    </div>
                    
                    <!-- æŠ¥å‘Šå¤´éƒ¨ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <h3 style="color: #1d1d1f; margin-bottom: 4px;">å­¦ä¹ è€…ï¼šå°æ˜</h3>
                                <p style="color: #8e8e93; font-size: 12px;">æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š${new Date().toLocaleDateString()}</p>
                            </div>
                            <div style="background: #007AFF; color: white; padding: 6px 12px; border-radius: 8px; font-size: 11px; font-weight: 600;">
                                AIç”ŸæˆæŠ¥å‘Š
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #007AFF;">Lv.4</div>
                                <div style="font-size: 11px; color: #8e8e93;">å½“å‰ç­‰çº§</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #34d399;">320</div>
                                <div style="font-size: 11px; color: #8e8e93;">æ€»ç»éªŒå€¼</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #f59e0b;">5å¤©</div>
                                <div style="font-size: 11px; color: #8e8e93;">è¿ç»­å­¦ä¹ </div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #667eea;">4ä¸ª</div>
                                <div style="font-size: 11px; color: #8e8e93;">è§£é”æˆå°±</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- èƒ½åŠ›é›·è¾¾åˆ†æ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ¯ äº”ç»´èƒ½åŠ›åˆ†æ</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <span style="font-size: 14px;">ğŸ’¬ è¡¨è¾¾åŠ›</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #e5e5ea; width: 100px; height: 6px; border-radius: 3px; overflow: hidden;">
                                        <div style="background: #34d399; height: 100%; width: 65%; border-radius: 3px;"></div>
                                    </div>
                                    <span style="font-size: 12px; color: #34d399; font-weight: 600;">65åˆ†</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <span style="font-size: 14px;">ğŸ§  é€»è¾‘åŠ›</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #e5e5ea; width: 100px; height: 6px; border-radius: 3px; overflow: hidden;">
                                        <div style="background: #f59e0b; height: 100%; width: 45%; border-radius: 3px;"></div>
                                    </div>
                                    <span style="font-size: 12px; color: #f59e0b; font-weight: 600;">45åˆ†</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <span style="font-size: 14px;">ğŸ¨ åˆ›é€ åŠ›</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #e5e5ea; width: 100px; height: 6px; border-radius: 3px; overflow: hidden;">
                                        <div style="background: #667eea; height: 100%; width: 80%; border-radius: 3px;"></div>
                                    </div>
                                    <span style="font-size: 12px; color: #667eea; font-weight: 600;">80åˆ†</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <span style="font-size: 14px;">ğŸ” æ¢ç©¶åŠ›</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #e5e5ea; width: 100px; height: 6px; border-radius: 3px; overflow: hidden;">
                                        <div style="background: #007AFF; height: 100%; width: 35%; border-radius: 3px;"></div>
                                    </div>
                                    <span style="font-size: 12px; color: #007AFF; font-weight: 600;">35åˆ†</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <span style="font-size: 14px;">â° ä¹ æƒ¯åŠ›</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="background: #e5e5ea; width: 100px; height: 6px; border-radius: 3px; overflow: hidden;">
                                        <div style="background: #34d399; height: 100%; width: 55%; border-radius: 3px;"></div>
                                    </div>
                                    <span style="font-size: 12px; color: #34d399; font-weight: 600;">55åˆ†</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- AIå®¶åº­æŒ‡å¯¼å»ºè®® -->
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="background: #667eea; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600;">AIæŒ‡å¯¼</span>
                            <h3 style="color: #1d1d1f;">å®¶åº­å­¦ä¹ å»ºè®®</h3>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            <div style="background: #f0f9ff; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #0369a1; font-weight: 600; margin-bottom: 4px;">ğŸ“š å­¦ç§‘èåˆå»ºè®®</div>
                                <div style="font-size: 11px; color: #666; line-height: 1.4;">
                                    å¯ä»¥åœ¨æ—¥å¸¸å¯¹è¯ä¸­èå…¥é€»è¾‘æ€ç»´è®­ç»ƒï¼Œæ¯”å¦‚é—®"ä¸ºä»€ä¹ˆ"ã€"æ€ä¹ˆæ ·"ç­‰é—®é¢˜
                                </div>
                            </div>
                            <div style="background: #f0f9ff; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #0369a1; font-weight: 600; margin-bottom: 4px;">ğŸ¯ èƒ½åŠ›æå‡å»ºè®®</div>
                                <div style="font-size: 11px; color: #666; line-height: 1.4;">
                                    å»ºè®®å¢åŠ æ•°å­¦ç±»æ¸¸æˆå’Œç§‘å­¦å°å®éªŒï¼Œå¹³è¡¡èƒ½åŠ›å‘å±•
                                </div>
                            </div>
                            <div style="background: #f0f9ff; border-radius: 8px; padding: 12px;">
                                <div style="font-size: 12px; color: #0369a1; font-weight: 600; margin-bottom: 4px;">â° æ—¶é—´å®‰æ’å»ºè®®</div>
                                <div style="font-size: 11px; color: #666; line-height: 1.4;">
                                    å½“å‰å­¦ä¹ æ—¶é•¿é€‚ä¸­ï¼Œå»ºè®®ä¿æŒæ¯å¤©25-30åˆ†é’Ÿçš„å­¦ä¹ èŠ‚å¥
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // å®¶é•¿åŠŸèƒ½å®ç°
        function setLearningGoals() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="showParentDashboard()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›æ§åˆ¶é¢æ¿
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">å­¦ä¹ ç›®æ ‡è®¾ç½®</h2>
                    </div>
                    
                    <!-- å®¶åº­é™ªä¼´åŠŸèƒ½å…¥å£ -->
                    <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border-radius: 16px; padding: 20px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 12px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­é™ªä¼´å­¦ä¹ </h3>
                        <p style="opacity: 0.9; font-size: 13px; margin-bottom: 16px;">å¢å¼ºå®¶åº­äº’åŠ¨ï¼Œè®©å­¦ä¹ æˆä¸ºå…¨å®¶çš„å¿«ä¹æ—¶å…‰</p>
                        <div style="display: flex; gap: 12px;">
                            <button onclick="openFamilyTasks()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                ğŸ¯ äº²å­ä»»åŠ¡
                            </button>
                            <button onclick="openFamilyStories()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                ğŸ“š å®¶åº­å…±åˆ›
                            </button>
                        </div>
                    </div>
                    
                    <!-- å½“å‰ç›®æ ‡çŠ¶æ€ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ“Š å½“å‰å­¦ä¹ ç›®æ ‡</h3>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <span>ğŸ“… æ¯æ—¥å­¦ä¹ æ—¶é•¿</span>
                                <div style="background: #34d399; color: white; padding: 4px 8px; border-radius: 6px; font-size: 12px;">25åˆ†é’Ÿ/30åˆ†é’Ÿ âœ…</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <span>ğŸ¯ æ¯å‘¨å®Œæˆä»»åŠ¡</span>
                                <div style="background: #007AFF; color: white; padding: 4px 8px; border-radius: 6px; font-size: 12px;">3ä¸ª/5ä¸ª â³</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­äº’åŠ¨æ¬¡æ•°</span>
                                <div style="background: #34d399; color: white; padding: 4px 8px; border-radius: 6px; font-size: 12px;">8æ¬¡/10æ¬¡ âœ…</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // äº²å­ä»»åŠ¡åŠŸèƒ½
        function openFamilyTasks() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="setLearningGoals()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›ç›®æ ‡è®¾ç½®
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ äº²å­äº’åŠ¨ä»»åŠ¡</h2>
                    </div>
                    
                    <!-- AIæ¨èäº²å­ä»»åŠ¡ -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="font-size: 32px;">ğŸ¤–</div>
                            <div>
                                <h3 style="margin-bottom: 4px;">AIæ™ºèƒ½æ¨è</h3>
                                <p style="opacity: 0.9; font-size: 14px;">åŸºäºå°æ˜å­¦ä¹ ç‰¹ç‚¹çš„äº²å­ä»»åŠ¡</p>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 12px; padding: 16px;">
                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">ğŸ¯ æœ¬å‘¨é‡ç‚¹ï¼šåˆ›é€ åŠ›+é€»è¾‘åŠ›è”åˆè®­ç»ƒ</div>
                            <div style="font-size: 12px; opacity: 0.9;">
                                ç»“åˆå°æ˜çš„åˆ›é€ åŠ›ä¼˜åŠ¿(80åˆ†)ï¼Œé€šè¿‡äº²å­äº’åŠ¨æå‡é€»è¾‘æ€ç»´èƒ½åŠ›(45åˆ†)
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä»Šæ—¥æ¨èä»»åŠ¡ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="background: #34d399; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600;">ä»Šæ—¥æ¨è</span>
                            <h3 style="color: #1d1d1f;">äº²å­äº’åŠ¨ä»»åŠ¡</h3>
                        </div>
                        
                        <div class="function-card" onclick="startFamilyTask('story-creation')" style="margin-bottom: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="font-size: 24px;">ğŸ“š</div>
                                    <div>
                                        <div style="font-size: 16px; font-weight: 600; color: #1d1d1f;">å®¶åº­æ•…äº‹åˆ›ä½œ</div>
                                        <div style="font-size: 12px; color: #8e8e93;">äº²å­åä½œ â€¢ 20åˆ†é’Ÿ</div>
                                    </div>
                                </div>
                                <div style="background: #34d399; color: white; padding: 4px 8px; border-radius: 6px; font-size: 10px;">æ¨è</div>
                            </div>
                            <div style="color: #666; font-size: 13px; margin-bottom: 8px;">
                                å®¶é•¿å’Œå­©å­ä¸€èµ·åˆ›ä½œæ•…äº‹ï¼Œé”»ç‚¼è¡¨è¾¾åŠ›å’Œæƒ³è±¡åŠ›
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <span style="background: #e3f2fd; color: #0369a1; padding: 4px 8px; border-radius: 6px; font-size: 10px;">è¯­æ–‡èåˆ</span>
                                <span style="background: #fce4ec; color: #c2185b; padding: 4px 8px; border-radius: 6px; font-size: 10px;">åˆ›é€ åŠ›+è¡¨è¾¾åŠ›</span>
                            </div>
                        </div>
                        
                        <div class="function-card" onclick="startFamilyTask('math-game')" style="margin-bottom: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="font-size: 24px;">ğŸ”¢</div>
                                    <div>
                                        <div style="font-size: 16px; font-weight: 600; color: #1d1d1f;">æ•°å­¦é€»è¾‘æ¸¸æˆ</div>
                                        <div style="font-size: 12px; color: #8e8e93;">äº²å­å¯¹æˆ˜ â€¢ 15åˆ†é’Ÿ</div>
                                    </div>
                                </div>
                                <div style="background: #f59e0b; color: white; padding: 4px 8px; border-radius: 6px; font-size: 10px;">é‡ç‚¹</div>
                            </div>
                            <div style="color: #666; font-size: 13px; margin-bottom: 8px;">
                                é€šè¿‡è¶£å‘³æ•°å­¦æ¸¸æˆï¼Œåœ¨ç«æŠ€ä¸­æå‡é€»è¾‘æ€ç»´èƒ½åŠ›
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <span style="background: #e8f5e8; color: #388e3c; padding: 4px 8px; border-radius: 6px; font-size: 10px;">æ•°å­¦èåˆ</span>
                                <span style="background: #e3f2fd; color: #0369a1; padding: 4px 8px; border-radius: 6px; font-size: 10px;">é€»è¾‘åŠ›</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å®¶åº­å­¦ä¹ ç»Ÿè®¡ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ“ˆ å®¶åº­å‚ä¸ç»Ÿè®¡</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #667eea;">3ä¸ª</div>
                                <div style="font-size: 11px; color: #8e8e93;">å®¶åº­å…±åˆ›</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #34d399;">8æ¬¡</div>
                                <div style="font-size: 11px; color: #8e8e93;">äº²å­äº’åŠ¨</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 18px; font-weight: 700; color: #f59e0b;">95%</div>
                                <div style="font-size: 11px; color: #8e8e93;">å‚ä¸åº¦</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // å®¶åº­å…±åˆ›æ•…äº‹åŠŸèƒ½
        function openFamilyStories() {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="setLearningGoals()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›ç›®æ ‡è®¾ç½®
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­å…±åˆ›æ•…äº‹</h2>
                    </div>
                    
                    <!-- æ­£åœ¨è¿›è¡Œçš„å®¶åº­å…±åˆ› -->
                    <div style="background: linear-gradient(135deg, #34d399 0%, #10b981 100%); color: white; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 16px;">ğŸ¤ æ­£åœ¨è¿›è¡Œçš„å®¶åº­å…±åˆ›</h3>
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">ã€Šæˆ‘ä»¬å®¶çš„è¶…çº§è‹±é›„ã€‹</div>
                            <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">
                                çˆ¸çˆ¸å¼€å§‹ï¼šä»å‰æœ‰ä¸€ä¸ªæ™®é€šçš„å®¶åº­ï¼Œä½†ä»–ä»¬éƒ½æœ‰ç§˜å¯†çš„è¶…èƒ½åŠ›...<br>
                                å°æ˜ç»­å†™ï¼šçˆ¸çˆ¸çš„è¶…èƒ½åŠ›æ˜¯åšä¸–ç•Œä¸Šæœ€å¥½åƒçš„é¥­èœï¼Œå¦ˆå¦ˆçš„è¶…èƒ½åŠ›æ˜¯ç»™äººæ¸©æš–çš„æ‹¥æŠ±...<br>
                                <span style="color: #fff3cd;">ç­‰å¾…å¦ˆå¦ˆç»­å†™ â†’</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-size: 11px;">å‚ä¸è€…ï¼šğŸ‘¨çˆ¸çˆ¸ ğŸ‘¦å°æ˜ ğŸ‘©å¦ˆå¦ˆ</div>
                                <button onclick="continueFamilyStory()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 6px 12px; border-radius: 6px; cursor: pointer;">æé†’ç»­å†™</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ›å»ºæ–°å®¶åº­å…±åˆ› -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ†• å‘èµ·å®¶åº­å…±åˆ›</h3>
                        
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">å…±åˆ›ä¸»é¢˜</label>
                            <input type="text" id="familyStoryTitle" placeholder="ä¾‹å¦‚ï¼šæˆ‘ä»¬å®¶çš„å¥‡å¦™æ—…è¡Œ" style="width: 100%; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; outline: none;">
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">æ•…äº‹å¼€å¤´ï¼ˆå®¶é•¿å¼•å¯¼ï¼‰</label>
                            <textarea id="familyStoryStart" placeholder="å†™ä¸‹æ•…äº‹çš„å¼€å¤´ï¼Œè®©å­©å­æ¥ç€åˆ›ä½œ..." style="width: 100%; height: 80px; padding: 12px 16px; border: 1px solid #e5e5ea; border-radius: 8px; font-size: 14px; resize: none; outline: none;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">å‚ä¸æˆå‘˜</label>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <label style="display: flex; align-items: center; gap: 4px; background: #f8fafc; padding: 6px 12px; border-radius: 6px;">
                                    <input type="checkbox" checked> ğŸ‘¨ çˆ¸çˆ¸
                                </label>
                                <label style="display: flex; align-items: center; gap: 4px; background: #f8fafc; padding: 6px 12px; border-radius: 6px;">
                                    <input type="checkbox" checked> ğŸ‘© å¦ˆå¦ˆ
                                </label>
                                <label style="display: flex; align-items: center; gap: 4px; background: #f8fafc; padding: 6px 12px; border-radius: 6px;">
                                    <input type="checkbox" checked> ğŸ‘¦ å°æ˜
                                </label>
                                <label style="display: flex; align-items: center; gap: 4px; background: #f8fafc; padding: 6px 12px; border-radius: 6px;">
                                    <input type="checkbox"> ğŸ‘§ å§å§
                                </label>
                            </div>
                        </div>
                        
                        <button onclick="createFamilyStory()" style="background: #34d399; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;">
                            ğŸš€ åˆ›å»ºå®¶åº­å…±åˆ›æ•…äº‹
                        </button>
                    </div>
                </div>
            `;
        }
        
        // å®¶åº­ä»»åŠ¡å®ç°
        function startFamilyTask(taskType) {
            const taskDetails = {
                'story-creation': {
                    name: 'å®¶åº­æ•…äº‹åˆ›ä½œ',
                    description: 'å…¨å®¶ä¸€èµ·ç¼–å†™ä¸€ä¸ªæœ‰è¶£çš„æ•…äº‹',
                    steps: [
                        'ğŸ‘¨ çˆ¸çˆ¸æä¾›æ•…äº‹ä¸»é¢˜å’ŒèƒŒæ™¯è®¾å®š',
                        'ğŸ‘¦ å°æ˜å‘æŒ¥æƒ³è±¡åŠ›ï¼Œæ·»åŠ æœ‰è¶£çš„è§’è‰²',
                        'ğŸ‘© å¦ˆå¦ˆå®Œå–„æ•…äº‹æƒ…èŠ‚å’Œç»†èŠ‚',
                        'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å…¨å®¶ä¸€èµ·è®¨è®ºæ•…äº‹ç»“å±€'
                    ]
                },
                'math-game': {
                    name: 'æ•°å­¦é€»è¾‘æ¸¸æˆ',
                    description: 'é€šè¿‡æ¸¸æˆåŒ–æ–¹å¼æå‡é€»è¾‘æ€ç»´',
                    steps: [
                        'ğŸ¯ å®¶é•¿å‡†å¤‡ç®€å•çš„é€»è¾‘é¢˜ç›®',
                        'ğŸ® å­©å­å°è¯•è§£ç­”ï¼Œå®¶é•¿ç»™äºˆæç¤º',
                        'ğŸ† æ­£ç¡®ç­”æ¡ˆåå…¨å®¶ä¸€èµ·åº†ç¥',
                        'ğŸ“Š æ€»ç»“å­¦ä¹ è¦ç‚¹å’Œè¿›æ­¥'
                    ]
                },
                'science-experiment': {
                    name: 'ç§‘å­¦å°å®éªŒ',
                    description: 'å®¶åº­ç§‘å­¦æ¢ç´¢ï¼ŒåŸ¹å…»æ¢ç©¶ç²¾ç¥',
                    steps: [
                        'ğŸ”¬ å®¶é•¿ä»‹ç»å®éªŒåŸç†å’Œå®‰å…¨æ³¨æ„äº‹é¡¹',
                        'ğŸ‘¦ å­©å­åŠ¨æ‰‹æ“ä½œï¼Œè§‚å¯Ÿå®éªŒç°è±¡',
                        'â“ ä¸€èµ·è®¨è®º"ä¸ºä»€ä¹ˆä¼šè¿™æ ·"',
                        'ğŸ“ è®°å½•å®éªŒç»“æœå’Œæ–°å‘ç°'
                    ]
                }
            };
            
            const task = taskDetails[taskType];
            if (!task) return;
            
            showNotification(`ğŸš€ æ­£åœ¨å¯åŠ¨${task.name}...`);
            
            setTimeout(() => {
                showFamilyTaskDetail(task);
            }, 1500);
        }
        
        function showFamilyTaskDetail(task) {
            const appContent = document.getElementById('appContent');
            appContent.innerHTML = `
                <div style="padding: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <button onclick="openFamilyTasks()" style="background: none; border: none; color: #007AFF; font-size: 16px; cursor: pointer; margin-right: 16px;">
                            <i class="fas fa-arrow-left"></i> è¿”å›ä»»åŠ¡åˆ—è¡¨
                        </button>
                        <h2 style="font-size: 20px; font-weight: 700; color: #1d1d1f;">${task.name}</h2>
                    </div>
                    
                    <!-- ä»»åŠ¡ä»‹ç» -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 12px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <h3 style="margin-bottom: 8px;">${task.name}</h3>
                        <p style="opacity: 0.9; font-size: 14px;">${task.description}</p>
                    </div>
                    
                    <!-- ä»»åŠ¡æ­¥éª¤ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h3 style="color: #1d1d1f; margin-bottom: 16px;">ğŸ“‹ ä»»åŠ¡æ­¥éª¤</h3>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                            ${task.steps.map((step, index) => `
                                <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                    <div style="background: #007AFF; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">
                                        ${index + 1}
                                    </div>
                                    <span style="font-size: 14px; color: #374151;">${step}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- å¼€å§‹ä»»åŠ¡ -->
                    <div style="display: flex; gap: 12px;">
                        <button onclick="beginFamilyTask()" style="flex: 1; background: #34d399; color: white; border: none; padding: 16px 24px; border-radius: 12px; cursor: pointer; font-weight: 600;">
                            ğŸš€ å¼€å§‹å®¶åº­ä»»åŠ¡
                        </button>
                        <button onclick="scheduleFamilyTask()" style="background: #f59e0b; color: white; border: none; padding: 16px 20px; border-radius: 12px; cursor: pointer; font-weight: 600;">
                            â° é¢„çº¦æ—¶é—´
                        </button>
                    </div>
                </div>
            `;
        }
        
        function configureTimeLimit() {
            showNotification('â° æ­£åœ¨æ‰“å¼€æ—¶é•¿æ§åˆ¶è®¾ç½®...');
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ—¶é•¿æ§åˆ¶ç•Œé¢
        }
        
        function viewAIInsights() {
            showNotification('ğŸ§  æ­£åœ¨ç”ŸæˆAIæ·±åº¦åˆ†ææŠ¥å‘Š...');
            
            setTimeout(() => {
                showNotification('ğŸ“ˆ AIå‘ç°ï¼šå­©å­åœ¨åˆ›é€ åŠ›æ–¹é¢æœ‰å¤©èµ‹ï¼Œå»ºè®®é‡ç‚¹åŸ¹å…»');
            }, 2000);
        }
        
        // å®¶åº­ä»»åŠ¡äº¤äº’åŠŸèƒ½
        function beginFamilyTask() {
            showNotification('ğŸš€ å®¶åº­ä»»åŠ¡å¼€å§‹ï¼è¯·å…¨å®¶æˆå‘˜ä¸€èµ·å‚ä¸');
            
            setTimeout(() => {
                showNotification('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ AIä¼šå®æ—¶ç›‘æ§å®¶åº­äº’åŠ¨è´¨é‡ï¼Œæä¾›æŒ‡å¯¼å»ºè®®');
            }, 2000);
            
            setTimeout(() => {
                showNotification('ğŸ‰ å®¶åº­ä»»åŠ¡å®Œæˆï¼å…¨å®¶è·å¾—"å®¶åº­åä½œ"æˆå°±ï¼');
            }, 4000);
        }
        
        function scheduleFamilyTask() {
            showNotification('â° å·²è®¾ç½®å®¶åº­ä»»åŠ¡æé†’ï¼šä»Šæ™š19:00');
            
            setTimeout(() => {
                showNotification('ğŸ“± å°†åœ¨æŒ‡å®šæ—¶é—´é€šçŸ¥æ‰€æœ‰å®¶åº­æˆå‘˜');
            }, 1500);
        }
        
        function continueFamilyStory() {
            showNotification('âœï¸ æ­£åœ¨é€šçŸ¥å¦ˆå¦ˆç»§ç»­åˆ›ä½œ...');
            
            setTimeout(() => {
                showNotification('ğŸ“± å·²å‘é€æé†’åˆ°å¦ˆå¦ˆæ‰‹æœºï¼Œç­‰å¾…ç»­å†™');
            }, 1500);
        }
        
        function createFamilyStory() {
            const title = document.getElementById('familyStoryTitle').value.trim();
            const start = document.getElementById('familyStoryStart').value.trim();
            
            if (!title || !start) {
                showNotification('âš ï¸ è¯·å¡«å†™æ•…äº‹æ ‡é¢˜å’Œå¼€å¤´å†…å®¹');
                return;
            }
            
            showNotification('ğŸš€ æ­£åœ¨åˆ›å»ºå®¶åº­å…±åˆ›æ•…äº‹...');
            
            setTimeout(() => {
                showNotification('ğŸ¤– AIæ­£åœ¨åˆ†ææ•…äº‹ä¸»é¢˜ï¼Œç”Ÿæˆç»­å†™å»ºè®®...');
            }, 1500);
            
            setTimeout(() => {
                showNotification('âœ… å®¶åº­å…±åˆ›æ•…äº‹åˆ›å»ºæˆåŠŸï¼å·²é€šçŸ¥æ‰€æœ‰å®¶åº­æˆå‘˜');
            }, 3000);
            
            setTimeout(() => {
                showNotification('ğŸ‰ è·å¾—"å®¶åº­åˆ›ä½œè¾¾äºº"æˆå°±ï¼');
            }, 4500);
        }
        
        // ===== ç¡®ä¿æ‰€æœ‰é¦–é¡µåŠŸèƒ½éƒ½å¯ç”¨ =====
        
        // ä¿®å¤é¦–é¡µä¸­å¯èƒ½ç¼ºå¤±çš„å‡½æ•°
        window.addEventListener('load', function() {
            // ç¡®ä¿æ‰€æœ‰ç‚¹å‡»äº‹ä»¶éƒ½æœ‰å¯¹åº”çš„å‡½æ•°
            console.log('âœ… èŒèŠ½AI iPadæ¼”ç¤ºå·²å®Œå…¨åŠ è½½');
            console.log('âœ… æ‰€æœ‰åŠŸèƒ½éƒ½å·²å¯ç”¨ï¼š');
            console.log('   - ğŸŒ± è™šæ‹Ÿä¼™ä¼´äº’åŠ¨');
            console.log('   - ğŸ¯ èƒ½åŠ›è®­ç»ƒç³»ç»Ÿ');
            console.log('   - ğŸ¤– AIåŠ©æ•™å¯¹è¯');
            console.log('   - ğŸ“š æ•…äº‹å¢™æµè§ˆ');
            console.log('   - ğŸ‘¤ ä¸ªäººä¸­å¿ƒæŸ¥çœ‹');
            console.log('   - ğŸ“± Tabé¡µé¢åˆ‡æ¢');
            
            // æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†
            window.addEventListener('error', function(event) {
                console.error('å‘ç”Ÿé”™è¯¯:', event.error);
                showNotification('âš ï¸ ç³»ç»Ÿæç¤ºï¼šå¦‚æœ‰é—®é¢˜è¯·åˆ·æ–°é¡µé¢é‡è¯•', 'warning');
            });
        });
        
        // æ·»åŠ ç‚¹å‡»åé¦ˆæ•ˆæœ
        document.addEventListener('click', function(event) {
            const clickableElements = [
                '.feature-card', '.tab-item', '.partner-action-btn', 
                '.action-button', '.demo-button', '.achievement-badge'
            ];
            
            for (let selector of clickableElements) {
                if (event.target.closest(selector)) {
                    const element = event.target.closest(selector);
                    element.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        element.style.transform = '';
                    }, 150);
                    break;
                }
            }
        });
    </script>
</body>
</html>
